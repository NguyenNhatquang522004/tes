"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[7032],{3157:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"agents/graph-database/neo4j-query","title":"neo4j-query","description":"\x3c!--","source":"@site/docs/agents/graph-database/neo4j-query.md","sourceDirName":"agents/graph-database","slug":"/agents/graph-database/neo4j-query","permalink":"/tes/vi/docs/agents/graph-database/neo4j-query","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/graph-database/neo4j-query.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"neo4j-sync","permalink":"/tes/vi/docs/agents/graph-database/neo4j-sync"},"next":{"title":"health-check","permalink":"/tes/vi/docs/agents/monitoring/health-check"}}');var a=r(4848),i=r(8453);const s={sidebar_position:2},l="Neo4j Query Agent",c={},o=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\ud83c\udfaf Purpose",id:"-purpose",level:2},{value:"\ud83d\udd27 Query Types",id:"-query-types",level:2},{value:"Entity Queries",id:"entity-queries",level:3},{value:"Path Queries",id:"path-queries",level:3},{value:"Analytics Queries",id:"analytics-queries",level:3},{value:"\ud83d\udcca Query Examples",id:"-query-examples",level:2},{value:"Find Nearby Cameras",id:"find-nearby-cameras",level:3},{value:"Traffic Pattern Analysis",id:"traffic-pattern-analysis",level:3},{value:"Accident Impact Analysis",id:"accident-impact-analysis",level:3},{value:"\ud83d\ude80 Usage",id:"-usage",level:2},{value:"Initialize Agent",id:"initialize-agent",level:3},{value:"Execute Custom Queries",id:"execute-custom-queries",level:3},{value:"Aggregate Functions",id:"aggregate-functions",level:3},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:2},{value:"\ud83d\udcc8 Performance Optimization",id:"-performance-optimization",level:2},{value:"Index Usage",id:"index-usage",level:3},{value:"Query Profiling",id:"query-profiling",level:3},{value:"\ud83d\udcd6 Related Documentation",id:"-related-documentation",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"neo4j-query-agent",children:"Neo4j Query Agent"})}),"\n",(0,a.jsx)(n.p,{children:"The Neo4j Query Agent provides high-level graph query operations for traffic analytics and relationship analysis."}),"\n",(0,a.jsx)(n.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Property"}),(0,a.jsx)(n.th,{children:"Value"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Module"})}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"src.agents.graph_database.neo4j_query_agent"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Class"})}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"Neo4jQueryAgent"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Author"})}),(0,a.jsx)(n.td,{children:"UIP Team"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Version"})}),(0,a.jsx)(n.td,{children:"1.0.0"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"-purpose",children:"\ud83c\udfaf Purpose"}),"\n",(0,a.jsx)(n.p,{children:"The Neo4j Query Agent enables:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Complex graph queries"})," using Cypher language"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Path finding"})," between traffic entities"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Aggregation queries"})," for analytics dashboards"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Real-time graph traversal"})," for pattern detection"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"-query-types",children:"\ud83d\udd27 Query Types"}),"\n",(0,a.jsx)(n.h3,{id:"entity-queries",children:"Entity Queries"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Get camera with relationships\r\nagent.get_camera_with_observations("CAM_001", limit=100)\r\n\r\n# Get accident with related entities\r\nagent.get_accident_context("ACC_001")\n'})}),"\n",(0,a.jsx)(n.h3,{id:"path-queries",children:"Path Queries"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Find shortest path between cameras\r\nagent.find_path("CAM_001", "CAM_050", max_hops=5)\r\n\r\n# Find all paths through congestion zones\r\nagent.find_congestion_paths(start_camera, end_camera)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"analytics-queries",children:"Analytics Queries"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Get hotspot cameras\r\nagent.get_accident_hotspots(min_accidents=5)\r\n\r\n# Get traffic flow patterns\r\nagent.get_flow_patterns(time_range="24h")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"-query-examples",children:"\ud83d\udcca Query Examples"}),"\n",(0,a.jsx)(n.h3,{id:"find-nearby-cameras",children:"Find Nearby Cameras"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from src.agents.graph_database.neo4j_query_agent import Neo4jQueryAgent\r\n\r\nquery_agent = Neo4jQueryAgent()\r\n\r\n# Find cameras within spatial proximity\r\nnearby = query_agent.find_nearby_cameras(\r\n    camera_id="CAM_001",\r\n    max_distance_km=1.0\r\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"traffic-pattern-analysis",children:"Traffic Pattern Analysis"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Analyze morning rush patterns\r\npatterns = query_agent.analyze_patterns(\r\n    time_window="07:00-09:00",\r\n    days=["Monday", "Tuesday", "Wednesday"]\r\n)\r\n\r\n# Get congestion correlations\r\ncorrelations = query_agent.get_congestion_correlations(\r\n    threshold=0.7\r\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"accident-impact-analysis",children:"Accident Impact Analysis"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Find all entities affected by accident\r\nimpact = query_agent.get_accident_impact("ACC_001")\r\n\r\n# Result includes:\r\n# - Affected cameras\r\n# - Traffic flow changes\r\n# - Congestion ripple effects\r\n# - Estimated recovery time\n'})}),"\n",(0,a.jsx)(n.h2,{id:"-usage",children:"\ud83d\ude80 Usage"}),"\n",(0,a.jsx)(n.h3,{id:"initialize-agent",children:"Initialize Agent"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from src.agents.graph_database.neo4j_query_agent import Neo4jQueryAgent\r\n\r\nconfig = {\r\n    "enabled": True,\r\n    "neo4j_uri": "bolt://localhost:7687",\r\n    "username": "neo4j",\r\n    "password": "password"\r\n}\r\nquery_agent = Neo4jQueryAgent(config)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"execute-custom-queries",children:"Execute Custom Queries"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Run custom Cypher query\r\nresult = query_agent.execute_query("""\r\n    MATCH (c:Camera)-[:OBSERVES]->(o:Observation)\r\n    WHERE o.timestamp > datetime() - duration(\'PT1H\')\r\n    RETURN c.name, avg(o.vehicle_count) as avg_count\r\n    ORDER BY avg_count DESC\r\n""")\r\n\r\n# Run with parameters\r\nresult = query_agent.execute_query(\r\n    query="MATCH (c:Camera {id: $id}) RETURN c",\r\n    params={"id": "CAM_001"}\r\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"aggregate-functions",children:"Aggregate Functions"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Get statistics\r\nstats = query_agent.get_statistics()\r\n# Returns:\r\n# {\r\n#     "total_cameras": 150,\r\n#     "total_observations": 45000,\r\n#     "total_accidents": 234,\r\n#     "avg_observations_per_camera": 300\r\n# }\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# config/neo4j_sync.yaml\r\nneo4j_query:\r\n  enabled: true\r\n  \r\n  # Query optimization\r\n  optimization:\r\n    use_indexes: true\r\n    cache_results: true\r\n    cache_ttl: 60\r\n  \r\n  # Query limits\r\n  limits:\r\n    max_results: 10000\r\n    timeout_seconds: 30\r\n    max_path_length: 10\n"})}),"\n",(0,a.jsx)(n.h2,{id:"-performance-optimization",children:"\ud83d\udcc8 Performance Optimization"}),"\n",(0,a.jsx)(n.h3,{id:"index-usage",children:"Index Usage"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cypher",children:"// Ensure indexes exist\r\nCREATE INDEX camera_id_index FOR (c:Camera) ON (c.id)\r\nCREATE INDEX observation_timestamp_index FOR (o:Observation) ON (o.timestamp)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"query-profiling",children:"Query Profiling"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Profile query performance\r\nprofile = query_agent.profile_query("""\r\n    MATCH (c:Camera)-[:DETECTS]->(a:Accident)\r\n    RETURN c, a\r\n""")\r\n# Returns execution plan and timing\n'})}),"\n",(0,a.jsx)(n.h2,{id:"-related-documentation",children:"\ud83d\udcd6 Related Documentation"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"neo4j-sync",children:"Neo4j Sync Agent"})," - Entity synchronization"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"../analytics/pattern-recognition",children:"Pattern Recognition Agent"})," - Pattern analysis"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"../analytics/congestion-detection",children:"Congestion Detection Agent"})," - Congestion analytics"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsxs)(n.p,{children:["See the ",(0,a.jsx)(n.a,{href:"../complete-agents-reference",children:"complete agents reference"})," for all available agents."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>l});var t=r(6540);const a={},i=t.createContext(a);function s(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);