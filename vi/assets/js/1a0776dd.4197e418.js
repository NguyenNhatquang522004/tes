"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[285],{8453:(e,r,n)=>{n.d(r,{R:()=>c,x:()=>a});var t=n(6540);const i={},s=t.createContext(i);function c(e){const r=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(s.Provider,{value:r},e.children)}},9772:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"agents/monitoring/performance-monitor","title":"performance-monitor","description":"\x3c!--","source":"@site/docs/agents/monitoring/performance-monitor.md","sourceDirName":"agents/monitoring","slug":"/agents/monitoring/performance-monitor","permalink":"/tes/vi/docs/agents/monitoring/performance-monitor","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/monitoring/performance-monitor.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"health-check","permalink":"/tes/vi/docs/agents/monitoring/health-check"},"next":{"title":"data-quality-validator","permalink":"/tes/vi/docs/agents/monitoring/data-quality-validator"}}');var i=n(4848),s=n(8453);const c={sidebar_position:2},a="Performance Monitor Agent",o={},l=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\ud83c\udfaf Purpose",id:"-purpose",level:2},{value:"\ud83d\udcca Metrics Collected",id:"-metrics-collected",level:2},{value:"System Metrics",id:"system-metrics",level:3},{value:"Application Metrics",id:"application-metrics",level:3},{value:"Agent Metrics",id:"agent-metrics",level:3},{value:"\ud83d\udd27 Architecture",id:"-architecture",level:2},{value:"\ud83d\ude80 Usage",id:"-usage",level:2},{value:"Basic Monitoring",id:"basic-monitoring",level:3},{value:"Track Specific Operations",id:"track-specific-operations",level:3},{value:"Custom Metrics",id:"custom-metrics",level:3},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:2},{value:"\ud83d\udcc8 Dashboard Integration",id:"-dashboard-integration",level:2},{value:"Grafana Queries",id:"grafana-queries",level:3},{value:"Sample Dashboard",id:"sample-dashboard",level:3},{value:"\ud83d\udee1\ufe0f Performance Alerts",id:"\ufe0f-performance-alerts",level:2},{value:"\ud83d\udcd6 Related Documentation",id:"-related-documentation",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"performance-monitor-agent",children:"Performance Monitor Agent"})}),"\n",(0,i.jsx)(r.p,{children:"The Performance Monitor Agent tracks system performance metrics, identifies bottlenecks, and provides optimization recommendations."}),"\n",(0,i.jsx)(r.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Property"}),(0,i.jsx)(r.th,{children:"Value"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Module"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"src.agents.monitoring.performance_monitor_agent"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Class"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"PerformanceMonitorAgent"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Author"})}),(0,i.jsx)(r.td,{children:"UIP Team"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Version"})}),(0,i.jsx)(r.td,{children:"1.0.0"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"-purpose",children:"\ud83c\udfaf Purpose"}),"\n",(0,i.jsx)(r.p,{children:"The Performance Monitor Agent provides:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Real-time performance tracking"})," for all system components"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Resource utilization monitoring"})," (CPU, memory, I/O)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Latency analysis"})," for API endpoints and database queries"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Bottleneck identification"})," and optimization recommendations"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Historical trend analysis"})," for capacity planning"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"-metrics-collected",children:"\ud83d\udcca Metrics Collected"}),"\n",(0,i.jsx)(r.h3,{id:"system-metrics",children:"System Metrics"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Metric"}),(0,i.jsx)(r.th,{children:"Unit"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"cpu_usage"})}),(0,i.jsx)(r.td,{children:"%"}),(0,i.jsx)(r.td,{children:"CPU utilization"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"memory_usage"})}),(0,i.jsx)(r.td,{children:"MB"}),(0,i.jsx)(r.td,{children:"Memory consumption"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"disk_io"})}),(0,i.jsx)(r.td,{children:"MB/s"}),(0,i.jsx)(r.td,{children:"Disk read/write rate"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"network_io"})}),(0,i.jsx)(r.td,{children:"MB/s"}),(0,i.jsx)(r.td,{children:"Network throughput"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"application-metrics",children:"Application Metrics"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Metric"}),(0,i.jsx)(r.th,{children:"Unit"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"request_latency"})}),(0,i.jsx)(r.td,{children:"ms"}),(0,i.jsx)(r.td,{children:"API response time"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"request_throughput"})}),(0,i.jsx)(r.td,{children:"req/s"}),(0,i.jsx)(r.td,{children:"Requests per second"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"error_rate"})}),(0,i.jsx)(r.td,{children:"%"}),(0,i.jsx)(r.td,{children:"Failed requests percentage"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"active_connections"})}),(0,i.jsx)(r.td,{children:"count"}),(0,i.jsx)(r.td,{children:"Concurrent connections"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"agent-metrics",children:"Agent Metrics"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Metric"}),(0,i.jsx)(r.th,{children:"Unit"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"agent_execution_time"})}),(0,i.jsx)(r.td,{children:"ms"}),(0,i.jsx)(r.td,{children:"Agent processing time"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"entities_processed"})}),(0,i.jsx)(r.td,{children:"count"}),(0,i.jsx)(r.td,{children:"Entities per execution"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"queue_depth"})}),(0,i.jsx)(r.td,{children:"count"}),(0,i.jsx)(r.td,{children:"Pending operations"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"-architecture",children:"\ud83d\udd27 Architecture"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-text",children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502          Performance Monitor Agent          \u2502\r\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n\u2502                                             \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\r\n\u2502  \u2502 System  \u2502  \u2502   App   \u2502  \u2502   Agent     \u2502 \u2502\r\n\u2502  \u2502 Metrics \u2502  \u2502 Metrics \u2502  \u2502   Metrics   \u2502 \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\r\n\u2502       \u2502            \u2502              \u2502         \u2502\r\n\u2502       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502\r\n\u2502                    \u25bc                        \u2502\r\n\u2502           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                 \u2502\r\n\u2502           \u2502   Aggregator  \u2502                 \u2502\r\n\u2502           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                 \u2502\r\n\u2502                   \u2502                         \u2502\r\n\u2502       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\r\n\u2502       \u25bc           \u25bc           \u25bc            \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\r\n\u2502  \u2502Time-    \u2502 \u2502Prometheus\u2502 \u2502 Alert   \u2502       \u2502\r\n\u2502  \u2502Series DB\u2502 \u2502 Export  \u2502 \u2502 Engine  \u2502       \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(r.h2,{id:"-usage",children:"\ud83d\ude80 Usage"}),"\n",(0,i.jsx)(r.h3,{id:"basic-monitoring",children:"Basic Monitoring"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from src.agents.monitoring.performance_monitor_agent import PerformanceMonitorAgent\r\n\r\nmonitor = PerformanceMonitorAgent()\r\n\r\n# Start monitoring\r\nmonitor.start()\r\n\r\n# Get current metrics\r\nmetrics = monitor.get_metrics()\r\nprint(f\"CPU Usage: {metrics['cpu_usage']}%\")\r\nprint(f\"Memory Usage: {metrics['memory_usage']}MB\")\r\nprint(f\"Request Latency: {metrics['avg_latency']}ms\")\n"})}),"\n",(0,i.jsx)(r.h3,{id:"track-specific-operations",children:"Track Specific Operations"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'# Track API endpoint performance\r\nwith monitor.track("api.cameras.list"):\r\n    cameras = await get_cameras()\r\n\r\n# Track database query\r\nwith monitor.track("db.neo4j.query"):\r\n    results = neo4j.query(cypher)\r\n\r\n# Get timing statistics\r\nstats = monitor.get_stats("api.cameras.list")\r\nprint(f"Avg: {stats[\'avg_ms\']}ms, P95: {stats[\'p95_ms\']}ms")\n'})}),"\n",(0,i.jsx)(r.h3,{id:"custom-metrics",children:"Custom Metrics"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'# Register custom metric\r\nmonitor.register_metric(\r\n    name="active_websockets",\r\n    type="gauge",\r\n    description="Number of active WebSocket connections"\r\n)\r\n\r\n# Update metric\r\nmonitor.set_metric("active_websockets", 42)\r\n\r\n# Increment counter\r\nmonitor.increment_metric("requests_total")\n'})}),"\n",(0,i.jsx)(r.h2,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"# config/performance_monitor_config.yaml\r\nperformance_monitor:\r\n  enabled: true\r\n  collection_interval_seconds: 10\r\n  \r\n  # Metrics to collect\r\n  system_metrics:\r\n    - cpu_usage\r\n    - memory_usage\r\n    - disk_io\r\n    - network_io\r\n  \r\n  # Application metrics\r\n  app_metrics:\r\n    track_endpoints: true\r\n    track_database_queries: true\r\n    track_agent_execution: true\r\n  \r\n  # Alerting thresholds\r\n  thresholds:\r\n    cpu_warning: 70\r\n    cpu_critical: 90\r\n    memory_warning: 80\r\n    memory_critical: 95\r\n    latency_warning_ms: 500\r\n    latency_critical_ms: 2000\r\n  \r\n  # Export configuration\r\n  export:\r\n    prometheus:\r\n      enabled: true\r\n      port: 9091\r\n    timeseries_db:\r\n      enabled: true\r\n      url: http://localhost:8086\r\n      database: uip_metrics\n"})}),"\n",(0,i.jsx)(r.h2,{id:"-dashboard-integration",children:"\ud83d\udcc8 Dashboard Integration"}),"\n",(0,i.jsx)(r.h3,{id:"grafana-queries",children:"Grafana Queries"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-promql",children:"# Average request latency\r\nrate(request_latency_sum[5m]) / rate(request_latency_count[5m])\r\n\r\n# CPU usage by service\r\navg(cpu_usage) by (service)\r\n\r\n# Request throughput\r\nsum(rate(requests_total[1m])) by (endpoint)\r\n\r\n# Error rate\r\nsum(rate(requests_failed_total[5m])) / sum(rate(requests_total[5m])) * 100\n"})}),"\n",(0,i.jsx)(r.h3,{id:"sample-dashboard",children:"Sample Dashboard"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{\r\n  "title": "UIP Performance Dashboard",\r\n  "panels": [\r\n    {\r\n      "title": "Request Latency (P95)",\r\n      "type": "graph",\r\n      "targets": [\r\n        {\r\n          "expr": "histogram_quantile(0.95, rate(request_latency_bucket[5m]))"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      "title": "Throughput",\r\n      "type": "stat",\r\n      "targets": [\r\n        {\r\n          "expr": "sum(rate(requests_total[1m]))"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,i.jsx)(r.h2,{id:"\ufe0f-performance-alerts",children:"\ud83d\udee1\ufe0f Performance Alerts"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'# Configure performance alerts\r\nmonitor.add_alert(\r\n    name="high_latency",\r\n    condition=lambda m: m[\'avg_latency\'] > 1000,\r\n    severity="warning",\r\n    action=lambda: notify_ops("High API latency detected")\r\n)\r\n\r\nmonitor.add_alert(\r\n    name="memory_critical",\r\n    condition=lambda m: m[\'memory_usage\'] > 95,\r\n    severity="critical",\r\n    action=lambda: trigger_gc()\r\n)\n'})}),"\n",(0,i.jsx)(r.h2,{id:"-related-documentation",children:"\ud83d\udcd6 Related Documentation"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"health-check",children:"Health Check Agent"})," - Service health monitoring"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"data-quality-validator",children:"Data Quality Validator"})," - Data quality metrics"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"../../devops/complete-devops-guide",children:"Grafana Dashboard"})," - Visualization"]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.p,{children:["See the ",(0,i.jsx)(r.a,{href:"../complete-agents-reference",children:"complete agents reference"})," for all available agents."]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);