"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[376],{668:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"api/websocket","title":"websocket","description":"\x3c!--","source":"@site/docs/api/websocket.md","sourceDirName":"api","slug":"/api/websocket","permalink":"/tes/vi/docs/api/websocket","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/api/websocket.md","tags":[],"version":"current","frontMatter":{},"sidebar":"apiSidebar","previous":{"title":"rest-api","permalink":"/tes/vi/docs/api/rest-api"}}');var i=s(4848),r=s(8453);const a={},c="WebSocket API Reference",o={},l=[{value:"Overview",id:"overview",level:2},{value:"Connection",id:"connection",level:2},{value:"Endpoint",id:"endpoint",level:3},{value:"Authentication",id:"authentication",level:3},{value:"Message Format",id:"message-format",level:2},{value:"Subscriptions",id:"subscriptions",level:2},{value:"Subscribe to Channels",id:"subscribe-to-channels",level:3},{value:"Unsubscribe",id:"unsubscribe",level:3},{value:"Channels",id:"channels",level:2},{value:"Traffic Flow",id:"traffic-flow",level:3},{value:"Accidents",id:"accidents",level:3},{value:"Congestion",id:"congestion",level:3},{value:"Weather",id:"weather",level:3},{value:"Air Quality",id:"air-quality",level:3},{value:"Camera Status",id:"camera-status",level:3},{value:"Alerts",id:"alerts",level:3},{value:"Client Implementation",id:"client-implementation",level:2},{value:"JavaScript/TypeScript",id:"javascripttypescript",level:3},{value:"React Hook",id:"react-hook",level:3},{value:"Python",id:"python",level:3},{value:"Connection Management",id:"connection-management",level:2},{value:"Heartbeat",id:"heartbeat",level:3},{value:"Reconnection Strategy",id:"reconnection-strategy",level:3},{value:"Error Messages",id:"error-messages",level:2},{value:"Error Format",id:"error-format",level:3},{value:"Common Error Codes",id:"common-error-codes",level:3},{value:"Error Handling Example",id:"error-handling-example",level:3},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Related Documentation",id:"related-documentation",level:2},{value:"License",id:"license",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"websocket-api-reference",children:"WebSocket API Reference"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["Real-time WebSocket API for streaming traffic updates, accidents, weather changes, and system alerts with ",(0,i.jsx)(n.strong,{children:"low latency (<500ms)"})," and high throughput."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key Features:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\ud83d\udd04 Real-time streaming updates"}),"\n",(0,i.jsx)(n.li,{children:"\ud83d\udd10 JWT-based authentication"}),"\n",(0,i.jsx)(n.li,{children:"\ud83d\udce1 Multi-channel subscriptions"}),"\n",(0,i.jsx)(n.li,{children:"\ud83d\udc93 Automatic heartbeat & reconnection"}),"\n",(0,i.jsx)(n.li,{children:"\u26a1 Latency: <500ms"}),"\n",(0,i.jsx)(n.li,{children:"\ud83d\udcca Up to 10 concurrent channels"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"connection",children:"Connection"}),"\n",(0,i.jsx)(n.h3,{id:"endpoint",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"wss://api.traffic.example.com/ws\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"WebSocket Protocol"}),": RFC 6455",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"TLS"}),": Required (WSS only)",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Supported Clients"}),": Browser WebSocket API, Socket.IO, websockets (Python)"]}),"\n",(0,i.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const ws = new WebSocket('wss://api.traffic.example.com/ws');\n\n// Send auth after connection\nws.onopen = () => {\n  ws.send(JSON.stringify({\n    type: 'auth',\n    token: 'your_jwt_token'\n  }));\n};\n\n// Handle auth response\nws.onmessage = (event) => {\n  const msg = JSON.parse(event.data);\n  if (msg.type === 'auth.success') {\n    console.log('\u2705 Authenticated successfully');\n    // Now you can subscribe to channels\n  } else if (msg.type === 'auth.failed') {\n    console.error('\u274c Authentication failed:', msg.error);\n  }\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"message-format",children:"Message Format"}),"\n",(0,i.jsx)(n.p,{children:"All messages follow this structure:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "message_type",\n  "timestamp": "2024-01-15T10:30:00Z",\n  "data": {}\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"subscriptions",children:"Subscriptions"}),"\n",(0,i.jsx)(n.h3,{id:"subscribe-to-channels",children:"Subscribe to Channels"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Subscribe to traffic updates\nws.send(JSON.stringify({\n  type: 'subscribe',\n  channel: 'traffic.flow',\n  filters: {\n    cameras: ['CAM_001', 'CAM_002'],\n    zones: ['ZONE_001']\n  }\n}));\n\n// Subscribe to accidents\nws.send(JSON.stringify({\n  type: 'subscribe',\n  channel: 'accidents',\n  filters: {\n    severity: ['moderate', 'severe', 'critical']\n  }\n}));\n\n// Subscribe to weather\nws.send(JSON.stringify({\n  type: 'subscribe',\n  channel: 'weather',\n  filters: {\n    alerts_only: true\n  }\n}));\n"})}),"\n",(0,i.jsx)(n.h3,{id:"unsubscribe",children:"Unsubscribe"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"ws.send(JSON.stringify({\n  type: 'unsubscribe',\n  channel: 'traffic.flow'\n}));\n"})}),"\n",(0,i.jsx)(n.h2,{id:"channels",children:"Channels"}),"\n",(0,i.jsx)(n.h3,{id:"traffic-flow",children:"Traffic Flow"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Channel"}),": ",(0,i.jsx)(n.code,{children:"traffic.flow"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Message"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "traffic.flow",\n  "timestamp": "2024-01-15T10:30:00Z",\n  "data": {\n    "camera_id": "CAM_001",\n    "location": {"lat": 10.7769, "lon": 106.7009},\n    "intensity": 45,\n    "average_speed": 35.5,\n    "vehicle_types": {\n      "car": 28,\n      "motorcycle": 12,\n      "truck": 3,\n      "bus": 2\n    },\n    "occupancy": 0.65,\n    "congestion_level": "moderate"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"accidents",children:"Accidents"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Channel"}),": ",(0,i.jsx)(n.code,{children:"accidents"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Message Types"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// New accident detected\n{\n  "type": "accidents.new",\n  "timestamp": "2024-01-15T10:30:00Z",\n  "data": {\n    "id": "ACC_20240115_001",\n    "location": {"lat": 10.7769, "lon": 106.7009},\n    "severity": "moderate",\n    "confidence": 0.92,\n    "camera_id": "CAM_001",\n    "vehicles_involved": 2\n  }\n}\n\n// Accident updated\n{\n  "type": "accidents.update",\n  "timestamp": "2024-01-15T10:35:00Z",\n  "data": {\n    "id": "ACC_20240115_001",\n    "status": "investigating",\n    "emergency_services": "en_route"\n  }\n}\n\n// Accident resolved\n{\n  "type": "accidents.resolved",\n  "timestamp": "2024-01-15T11:30:00Z",\n  "data": {\n    "id": "ACC_20240115_001",\n    "resolution": "cleared",\n    "duration": 60\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"congestion",children:"Congestion"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Channel"}),": ",(0,i.jsx)(n.code,{children:"congestion"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Message"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "congestion.update",\n  "timestamp": "2024-01-15T10:30:00Z",\n  "data": {\n    "zone_id": "ZONE_001",\n    "level": "high",\n    "severity": 0.78,\n    "affected_roads": [\n      "Nguyen Hue St",\n      "Le Loi St"\n    ],\n    "estimated_delay": 15,\n    "alternative_routes": [\n      {\n        "route": "via Dong Khoi St",\n        "delay": 5\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"weather",children:"Weather"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Channel"}),": ",(0,i.jsx)(n.code,{children:"weather"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Message Types"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// Weather update\n{\n  "type": "weather.update",\n  "timestamp": "2024-01-15T10:30:00Z",\n  "data": {\n    "location": {"lat": 10.7769, "lon": 106.7009},\n    "temperature": 32.5,\n    "conditions": "Partly Cloudy",\n    "precipitation": 0\n  }\n}\n\n// Weather alert\n{\n  "type": "weather.alert",\n  "timestamp": "2024-01-15T10:30:00Z",\n  "data": {\n    "alert_type": "heavy_rain",\n    "severity": "warning",\n    "description": "Heavy rainfall expected in next 2 hours",\n    "affected_zones": ["ZONE_001", "ZONE_002"],\n    "start_time": "2024-01-15T11:00:00Z",\n    "end_time": "2024-01-15T13:00:00Z"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"air-quality",children:"Air Quality"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Channel"}),": ",(0,i.jsx)(n.code,{children:"air-quality"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Message"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "air-quality.update",\n  "timestamp": "2024-01-15T10:30:00Z",\n  "data": {\n    "location": {"lat": 10.7769, "lon": 106.7009},\n    "aqi": 85,\n    "category": "Moderate",\n    "dominant_pollutant": "PM2.5",\n    "pollutants": {\n      "pm25": 35.2,\n      "pm10": 58.3,\n      "no2": 42.1\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"camera-status",children:"Camera Status"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Channel"}),": ",(0,i.jsx)(n.code,{children:"cameras.status"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Message"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "cameras.status",\n  "timestamp": "2024-01-15T10:30:00Z",\n  "data": {\n    "camera_id": "CAM_001",\n    "status": "active",\n    "last_frame": "2024-01-15T10:29:58Z",\n    "health": {\n      "connectivity": "good",\n      "image_quality": "excellent",\n      "fps": 30\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"alerts",children:"Alerts"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Channel"}),": ",(0,i.jsx)(n.code,{children:"alerts"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Message"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "alert",\n  "timestamp": "2024-01-15T10:30:00Z",\n  "data": {\n    "id": "ALERT_001",\n    "priority": "high",\n    "category": "accident",\n    "title": "Serious Accident on Nguyen Hue St",\n    "message": "Multi-vehicle accident reported. Emergency services dispatched.",\n    "location": {"lat": 10.7769, "lon": 106.7009},\n    "action_required": false\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"client-implementation",children:"Client Implementation"}),"\n",(0,i.jsx)(n.h3,{id:"javascripttypescript",children:"JavaScript/TypeScript"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"class TrafficWebSocket {\n  private ws: WebSocket | null = null;\n  private reconnectAttempts = 0;\n  private maxReconnectAttempts = 5;\n  \n  connect(token: string) {\n    this.ws = new WebSocket('wss://api.traffic.example.com/ws');\n    \n    this.ws.onopen = () => {\n      console.log('Connected');\n      this.authenticate(token);\n      this.reconnectAttempts = 0;\n    };\n    \n    this.ws.onmessage = (event) => {\n      const message = JSON.parse(event.data);\n      this.handleMessage(message);\n    };\n    \n    this.ws.onerror = (error) => {\n      console.error('WebSocket error:', error);\n    };\n    \n    this.ws.onclose = () => {\n      console.log('Disconnected');\n      this.reconnect(token);\n    };\n  }\n  \n  authenticate(token: string) {\n    this.send({ type: 'auth', token });\n  }\n  \n  subscribe(channel: string, filters?: any) {\n    this.send({ type: 'subscribe', channel, filters });\n  }\n  \n  send(message: any) {\n    if (this.ws?.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify(message));\n    }\n  }\n  \n  handleMessage(message: any) {\n    switch (message.type) {\n      case 'traffic.flow':\n        this.onTrafficUpdate(message.data);\n        break;\n      case 'accidents.new':\n        this.onNewAccident(message.data);\n        break;\n      // Handle other message types\n    }\n  }\n  \n  reconnect(token: string) {\n    if (this.reconnectAttempts < this.maxReconnectAttempts) {\n      this.reconnectAttempts++;\n      setTimeout(() => {\n        console.log(`Reconnecting (${this.reconnectAttempts})...`);\n        this.connect(token);\n      }, 1000 * this.reconnectAttempts);\n    }\n  }\n  \n  disconnect() {\n    this.ws?.close();\n  }\n  \n  onTrafficUpdate(data: any) {\n    // Handle traffic update\n  }\n  \n  onNewAccident(data: any) {\n    // Handle new accident\n  }\n}\n\n// Usage\nconst trafficWS = new TrafficWebSocket();\ntrafficWS.connect('your_jwt_token');\ntrafficWS.subscribe('traffic.flow', { cameras: ['CAM_001'] });\ntrafficWS.subscribe('accidents');\n"})}),"\n",(0,i.jsx)(n.h3,{id:"react-hook",children:"React Hook"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { useEffect, useRef, useState } from 'react';\n\ninterface WebSocketMessage {\n  type: string;\n  timestamp: string;\n  data: any;\n}\n\nexport function useWebSocket(token: string) {\n  const ws = useRef<WebSocket | null>(null);\n  const [messages, setMessages] = useState<WebSocketMessage[]>([]);\n  const [connected, setConnected] = useState(false);\n  \n  useEffect(() => {\n    ws.current = new WebSocket('wss://api.traffic.example.com/ws');\n    \n    ws.current.onopen = () => {\n      setConnected(true);\n      ws.current?.send(JSON.stringify({ type: 'auth', token }));\n    };\n    \n    ws.current.onmessage = (event) => {\n      const message = JSON.parse(event.data);\n      setMessages(prev => [...prev, message]);\n    };\n    \n    ws.current.onclose = () => {\n      setConnected(false);\n    };\n    \n    return () => {\n      ws.current?.close();\n    };\n  }, [token]);\n  \n  const subscribe = (channel: string, filters?: any) => {\n    ws.current?.send(JSON.stringify({ type: 'subscribe', channel, filters }));\n  };\n  \n  return { messages, connected, subscribe };\n}\n\n// Usage in component\nfunction TrafficMonitor() {\n  const { messages, connected, subscribe } = useWebSocket('token');\n  \n  useEffect(() => {\n    if (connected) {\n      subscribe('traffic.flow');\n      subscribe('accidents');\n    }\n  }, [connected]);\n  \n  return (\n    <div>\n      {messages.map((msg, i) => (\n        <div key={i}>{msg.type}: {JSON.stringify(msg.data)}</div>\n      ))}\n    </div>\n  );\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"python",children:"Python"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import asyncio\nimport websockets\nimport json\n\nasync def traffic_websocket(token: str):\n    uri = "wss://api.traffic.example.com/ws"\n    \n    async with websockets.connect(uri) as websocket:\n        # Authenticate\n        await websocket.send(json.dumps({\n            "type": "auth",\n            "token": token\n        }))\n        \n        # Subscribe\n        await websocket.send(json.dumps({\n            "type": "subscribe",\n            "channel": "traffic.flow"\n        }))\n        \n        # Listen for messages\n        async for message in websocket:\n            data = json.loads(message)\n            print(f"Received: {data[\'type\']}")\n            handle_message(data)\n\ndef handle_message(data: dict):\n    if data[\'type\'] == \'traffic.flow\':\n        print(f"Traffic update: {data[\'data\']}")\n    elif data[\'type\'] == \'accidents.new\':\n        print(f"New accident: {data[\'data\']}")\n\n# Run\nasyncio.run(traffic_websocket(\'your_token\'))\n'})}),"\n",(0,i.jsx)(n.h2,{id:"connection-management",children:"Connection Management"}),"\n",(0,i.jsx)(n.h3,{id:"heartbeat",children:"Heartbeat"}),"\n",(0,i.jsx)(n.p,{children:"Client should send ping every 30 seconds:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"setInterval(() => {\n  ws.send(JSON.stringify({ type: 'ping' }));\n}, 30000);\n\n// Server responds with pong\nws.onmessage = (event) => {\n  const msg = JSON.parse(event.data);\n  if (msg.type === 'pong') {\n    console.log('Connection alive');\n  }\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"reconnection-strategy",children:"Reconnection Strategy"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const reconnect = (attempt = 1) => {\n  const delay = Math.min(1000 * attempt, 30000); // Max 30s\n  setTimeout(() => {\n    console.log(`Reconnecting (attempt ${attempt})...`);\n    connect();\n  }, delay);\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"error-messages",children:"Error Messages"}),"\n",(0,i.jsx)(n.h3,{id:"error-format",children:"Error Format"}),"\n",(0,i.jsx)(n.p,{children:"All errors follow this structure:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "error",\n  "timestamp": "2024-01-15T10:30:00Z",\n  "error": {\n    "code": "ERROR_CODE",\n    "message": "Human-readable error description",\n    "details": {}\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"common-error-codes",children:"Common Error Codes"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Code"}),(0,i.jsx)(n.th,{children:"Message"}),(0,i.jsx)(n.th,{children:"Action Required"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"AUTH_FAILED"})}),(0,i.jsx)(n.td,{children:"Authentication failed"}),(0,i.jsx)(n.td,{children:"Check JWT token validity"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"AUTH_EXPIRED"})}),(0,i.jsx)(n.td,{children:"Token has expired"}),(0,i.jsx)(n.td,{children:"Refresh token and reconnect"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SUBSCRIPTION_FAILED"})}),(0,i.jsx)(n.td,{children:"Invalid channel"}),(0,i.jsx)(n.td,{children:"Verify channel name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RATE_LIMIT_EXCEEDED"})}),(0,i.jsx)(n.td,{children:"Too many messages"}),(0,i.jsx)(n.td,{children:"Slow down request rate"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"INVALID_MESSAGE"})}),(0,i.jsx)(n.td,{children:"Message format invalid"}),(0,i.jsx)(n.td,{children:"Check JSON structure"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"CHANNEL_NOT_FOUND"})}),(0,i.jsx)(n.td,{children:"Channel does not exist"}),(0,i.jsx)(n.td,{children:"Use valid channel name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"MAX_SUBSCRIPTIONS"})}),(0,i.jsx)(n.td,{children:"Maximum 10 subscriptions"}),(0,i.jsx)(n.td,{children:"Unsubscribe from unused channels"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"error-handling-example",children:"Error Handling Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"ws.onerror = (error) => {\n  console.error('WebSocket error:', error);\n  // Attempt reconnection\n  reconnect();\n};\n\nws.onmessage = (event) => {\n  const msg = JSON.parse(event.data);\n  \n  if (msg.type === 'error') {\n    switch (msg.error.code) {\n      case 'AUTH_FAILED':\n        // Refresh token and reconnect\n        refreshToken().then(newToken => {\n          connect(newToken);\n        });\n        break;\n      \n      case 'RATE_LIMIT_EXCEEDED':\n        // Implement backoff strategy\n        setTimeout(() => resumeConnection(), 5000);\n        break;\n      \n      case 'SUBSCRIPTION_FAILED':\n        // Log and notify user\n        console.error(`Invalid channel: ${msg.error.details.channel}`);\n        break;\n      \n      default:\n        console.error('Unknown error:', msg.error);\n    }\n  }\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Message Rate"}),": Maximum 1000 messages per minute per connection"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Subscriptions"}),": Maximum 10 concurrent subscriptions per connection"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Burst"}),": 50 messages per 5 seconds"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Penalty"}),": Exceeding limits results in connection termination"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Rate Limit Headers"})," (sent on connection):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "rate_limit_info",\n  "data": {\n    "max_messages_per_minute": 1000,\n    "max_subscriptions": 10,\n    "burst_limit": 50,\n    "burst_window": 5\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/tes/vi/docs/api/rest-api",children:"REST API"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./ngsi-ld.md",children:"NGSI-LD API"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,i.jsx)(n.p,{children:"MIT License - Copyright (c) 2025 UIP Contributors (Nguy\u1ec5n Nh\u1eadt Quang, Nguy\u1ec5n Vi\u1ec7t Ho\xe0ng, Nguy\u1ec5n \u0110\xecnh Anh Tu\u1ea5n)"})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var t=s(6540);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);