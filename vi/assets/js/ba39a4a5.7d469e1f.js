"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[1346],{4219:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"agents/data-collection/camera-image-fetch","title":"camera-image-fetch","description":"\x3c!--","source":"@site/docs/agents/data-collection/camera-image-fetch.md","sourceDirName":"agents/data-collection","slug":"/agents/data-collection/camera-image-fetch","permalink":"/tes/vi/docs/agents/data-collection/camera-image-fetch","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/data-collection/camera-image-fetch.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"citizen-report","permalink":"/tes/vi/docs/agents/analytics/citizen-report"},"next":{"title":"weather-integration","permalink":"/tes/vi/docs/agents/data-collection/weather-integration"}}');var i=n(4848),c=n(8453);const t={},s="Camera Image Fetch Agent",l={},o=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Usage",id:"usage",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Advanced Usage with Caching",id:"advanced-usage-with-caching",level:3},{value:"Integration with Other Agents",id:"integration-with-other-agents",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Class: <code>ImageRefreshAgent</code>",id:"class-imagerefreshagent",level:3},{value:"Methods",id:"methods",level:4},{value:"<code>__init__(config_path: str, cache_manager: Optional[CacheManager] = None)</code>",id:"__init__config_path-str-cache_manager-optionalcachemanager--none",level:5},{value:"<code>fetch_all_cameras() -&gt; List[CameraImage]</code>",id:"fetch_all_cameras---listcameraimage",level:5},{value:"<code>fetch_camera_image(camera_id: str, force_refresh: bool = False) -&gt; CameraImage</code>",id:"fetch_camera_imagecamera_id-str-force_refresh-bool--false---cameraimage",level:5},{value:"<code>get_cached_image(camera_id: str) -&gt; Optional[CameraImage]</code>",id:"get_cached_imagecamera_id-str---optionalcameraimage",level:5},{value:"Data Models",id:"data-models",level:3},{value:"<code>CameraImage</code>",id:"cameraimage",level:4},{value:"<code>CameraStatus</code>",id:"camerastatus",level:4},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Cache Strategy",id:"cache-strategy",level:3},{value:"Parallel Processing",id:"parallel-processing",level:3},{value:"Monitoring &amp; Metrics",id:"monitoring--metrics",level:2},{value:"Health Check",id:"health-check",level:3},{value:"Metrics Export",id:"metrics-export",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Common Errors",id:"common-errors",level:3},{value:"<code>CameraAPIError</code>",id:"cameraapierror",level:4},{value:"<code>CacheError</code>",id:"cacheerror",level:4},{value:"Retry Logic",id:"retry-logic",level:3},{value:"Testing",id:"testing",level:2},{value:"Unit Tests",id:"unit-tests",level:3},{value:"Integration Tests",id:"integration-tests",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Cache Management",id:"1-cache-management",level:3},{value:"2. Error Handling",id:"2-error-handling",level:3},{value:"3. Resource Cleanup",id:"3-resource-cleanup",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: High Cache Miss Rate",id:"issue-high-cache-miss-rate",level:3},{value:"Issue: Slow Image Fetching",id:"issue-slow-image-fetching",level:3},{value:"Issue: Memory Leaks",id:"issue-memory-leaks",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"Contributing",id:"contributing",level:2},{value:"License",id:"license",level:2}];function h(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"camera-image-fetch-agent",children:"Camera Image Fetch Agent"})}),"\n",(0,i.jsx)(a.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(a.p,{children:"The Camera Image Fetch Agent is responsible for collecting real-time traffic camera images from HCMC's transportation network. It implements intelligent caching with TTL (Time To Live) management to optimize bandwidth usage and ensure data freshness."}),"\n",(0,i.jsx)(a.h2,{id:"features",children:"Features"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Real-time Image Collection"}),": Fetches images from 100+ traffic cameras across HCMC"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Intelligent Caching"}),": Redis-based caching with configurable TTL (default: 60 seconds)"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Rate Limiting"}),": Prevents API overload with configurable request intervals"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Error Handling"}),": Automatic retry with exponential backoff"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Image Validation"}),": Checks image integrity and format before storage"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Metadata Enrichment"}),": Adds timestamp, location, and camera status information"]}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"architecture",children:"Architecture"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-mermaid",children:"graph LR\n    A[Camera API] --\x3e B[Image Fetch Agent]\n    B --\x3e C[Redis Cache]\n    B --\x3e D[Image Validator]\n    D --\x3e E[MongoDB Storage]\n    C --\x3e F[Downstream Agents]\n    E --\x3e F\n"})}),"\n",(0,i.jsx)(a.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"File"}),": ",(0,i.jsx)(a.code,{children:"config/data_sources.yaml"})]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-yaml",children:'camera_sources:\n  hcmc_traffic_cameras:\n    base_url: "https://api.hcmc-transport.gov.vn/cameras"\n    api_key: "${CAMERA_API_KEY}"\n    refresh_interval: 60  # seconds\n    cache_ttl: 300        # 5 minutes\n    timeout: 10           # seconds\n    retry_attempts: 3\n    retry_delay: 2        # seconds\n    \n  camera_filters:\n    districts: [1, 3, 5, 7, 10, "Binh Thanh", "Phu Nhuan"]\n    active_only: true\n    min_resolution: "720p"\n'})}),"\n",(0,i.jsx)(a.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(a.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'from src.agents.data_collection.image_refresh_agent import ImageRefreshAgent\n\n# Initialize agent\nagent = ImageRefreshAgent(config_path="config/data_sources.yaml")\n\n# Fetch all camera images\nimages = agent.fetch_all_cameras()\n\n# Fetch specific camera\nimage = agent.fetch_camera_image(camera_id="CAM_001")\n\n# Get cached image\ncached_image = agent.get_cached_image(camera_id="CAM_001")\n'})}),"\n",(0,i.jsx)(a.h3,{id:"advanced-usage-with-caching",children:"Advanced Usage with Caching"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'from src.agents.data_collection.image_refresh_agent import ImageRefreshAgent\nfrom src.agents.cache.cache_manager_agent import CacheManagerAgent\n\n# Initialize with custom cache\ncache_manager = CacheManagerAgent()\nagent = ImageRefreshAgent(cache_manager=cache_manager)\n\n# Fetch with cache strategy\nimage = agent.fetch_with_strategy(\n    camera_id="CAM_001",\n    strategy="cache_first",  # cache_first, network_first, cache_only\n    max_age=120  # seconds\n)\n\n# Batch fetch with parallel processing\nimages = agent.batch_fetch(\n    camera_ids=["CAM_001", "CAM_002", "CAM_003"],\n    max_workers=5,\n    timeout=30\n)\n'})}),"\n",(0,i.jsx)(a.h3,{id:"integration-with-other-agents",children:"Integration with Other Agents"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'from src.orchestrator import Orchestrator\n\n# Use in orchestration workflow\norchestrator = Orchestrator()\n\n# Register agent\norchestrator.register_agent("image_refresh", ImageRefreshAgent())\n\n# Execute workflow\nresult = orchestrator.execute_workflow([\n    "image_refresh",\n    "cv_analysis",\n    "accident_detection"\n])\n'})}),"\n",(0,i.jsx)(a.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,i.jsxs)(a.h3,{id:"class-imagerefreshagent",children:["Class: ",(0,i.jsx)(a.code,{children:"ImageRefreshAgent"})]}),"\n",(0,i.jsx)(a.h4,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(a.h5,{id:"__init__config_path-str-cache_manager-optionalcachemanager--none",children:(0,i.jsx)(a.code,{children:"__init__(config_path: str, cache_manager: Optional[CacheManager] = None)"})}),"\n",(0,i.jsx)(a.p,{children:"Initialize the agent with configuration."}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"config_path"})," (str): Path to configuration file"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"cache_manager"})," (CacheManager, optional): Custom cache manager instance"]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Example:"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'agent = ImageRefreshAgent(\n    config_path="config/data_sources.yaml",\n    cache_manager=custom_cache\n)\n'})}),"\n",(0,i.jsx)(a.h5,{id:"fetch_all_cameras---listcameraimage",children:(0,i.jsx)(a.code,{children:"fetch_all_cameras() -> List[CameraImage]"})}),"\n",(0,i.jsx)(a.p,{children:"Fetch images from all active cameras."}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Returns:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"List[CameraImage]: List of camera image objects"}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Raises:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"CameraAPIError"}),": If API request fails"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"ValidationError"}),": If image validation fails"]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Example:"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'images = agent.fetch_all_cameras()\nfor img in images:\n    print(f"Camera: {img.camera_id}, Size: {img.size_bytes}")\n'})}),"\n",(0,i.jsx)(a.h5,{id:"fetch_camera_imagecamera_id-str-force_refresh-bool--false---cameraimage",children:(0,i.jsx)(a.code,{children:"fetch_camera_image(camera_id: str, force_refresh: bool = False) -> CameraImage"})}),"\n",(0,i.jsx)(a.p,{children:"Fetch image from specific camera."}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"camera_id"})," (str): Unique camera identifier"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"force_refresh"})," (bool): Bypass cache and fetch fresh image"]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Returns:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"CameraImage: Camera image object with metadata"}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Example:"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'image = agent.fetch_camera_image("CAM_001", force_refresh=True)\n'})}),"\n",(0,i.jsx)(a.h5,{id:"get_cached_imagecamera_id-str---optionalcameraimage",children:(0,i.jsx)(a.code,{children:"get_cached_image(camera_id: str) -> Optional[CameraImage]"})}),"\n",(0,i.jsx)(a.p,{children:"Retrieve image from cache."}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"camera_id"})," (str): Unique camera identifier"]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Returns:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Optional[CameraImage]: Cached image or None if not found"}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Example:"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'cached = agent.get_cached_image("CAM_001")\nif cached:\n    print(f"Cache hit! Age: {cached.age_seconds}s")\n'})}),"\n",(0,i.jsx)(a.h3,{id:"data-models",children:"Data Models"}),"\n",(0,i.jsx)(a.h4,{id:"cameraimage",children:(0,i.jsx)(a.code,{children:"CameraImage"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:"from dataclasses import dataclass\nfrom datetime import datetime\n\n@dataclass\nclass CameraImage:\n    camera_id: str\n    image_data: bytes\n    timestamp: datetime\n    location: dict\n    resolution: tuple\n    format: str\n    size_bytes: int\n    metadata: dict\n"})}),"\n",(0,i.jsx)(a.h4,{id:"camerastatus",children:(0,i.jsx)(a.code,{children:"CameraStatus"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:"@dataclass\nclass CameraStatus:\n    camera_id: str\n    is_active: bool\n    last_update: datetime\n    error_count: int\n    uptime_percentage: float\n"})}),"\n",(0,i.jsx)(a.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,i.jsx)(a.h3,{id:"cache-strategy",children:"Cache Strategy"}),"\n",(0,i.jsx)(a.p,{children:"The agent implements a multi-tier caching strategy:"}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"L1 Cache (Memory)"}),": In-memory LRU cache for frequently accessed images"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"L2 Cache (Redis)"}),": Distributed cache for cross-agent sharing"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"L3 Cache (MongoDB)"}),": Persistent storage for historical data"]}),"\n"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:"# Configure cache tiers\nagent.configure_cache(\n    l1_size=100,      # Number of images in memory\n    l2_ttl=300,       # Redis TTL in seconds\n    l3_retention=7    # MongoDB retention in days\n)\n"})}),"\n",(0,i.jsx)(a.h3,{id:"parallel-processing",children:"Parallel Processing"}),"\n",(0,i.jsx)(a.p,{children:"Optimize batch operations with parallel processing:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'# Configure parallel fetching\nagent.configure_parallel(\n    max_workers=10,\n    chunk_size=20,\n    timeout_per_camera=5\n)\n\n# Execute parallel batch\nimages = agent.batch_fetch_parallel(\n    camera_ids=all_camera_ids,\n    progress_callback=lambda done, total: print(f"{done}/{total}")\n)\n'})}),"\n",(0,i.jsx)(a.h2,{id:"monitoring--metrics",children:"Monitoring & Metrics"}),"\n",(0,i.jsx)(a.h3,{id:"health-check",children:"Health Check"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'# Check agent health\nhealth = agent.health_check()\nprint(f"Status: {health.status}")\nprint(f"Active Cameras: {health.active_cameras}")\nprint(f"Cache Hit Rate: {health.cache_hit_rate}%")\nprint(f"Average Response Time: {health.avg_response_time}ms")\n'})}),"\n",(0,i.jsx)(a.h3,{id:"metrics-export",children:"Metrics Export"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'# Export metrics for monitoring\nmetrics = agent.export_metrics()\n# {\n#   "total_fetches": 1000,\n#   "successful_fetches": 980,\n#   "failed_fetches": 20,\n#   "cache_hits": 750,\n#   "cache_misses": 250,\n#   "avg_fetch_time_ms": 120\n# }\n'})}),"\n",(0,i.jsx)(a.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(a.h3,{id:"common-errors",children:"Common Errors"}),"\n",(0,i.jsx)(a.h4,{id:"cameraapierror",children:(0,i.jsx)(a.code,{children:"CameraAPIError"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'from src.core.exceptions import CameraAPIError\n\ntry:\n    image = agent.fetch_camera_image("CAM_001")\nexcept CameraAPIError as e:\n    print(f"API Error: {e.message}")\n    print(f"Status Code: {e.status_code}")\n    print(f"Camera ID: {e.camera_id}")\n'})}),"\n",(0,i.jsx)(a.h4,{id:"cacheerror",children:(0,i.jsx)(a.code,{children:"CacheError"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'from src.core.exceptions import CacheError\n\ntry:\n    cached = agent.get_cached_image("CAM_001")\nexcept CacheError as e:\n    print(f"Cache Error: {e.message}")\n    # Fallback to network fetch\n    image = agent.fetch_camera_image("CAM_001", force_refresh=True)\n'})}),"\n",(0,i.jsx)(a.h3,{id:"retry-logic",children:"Retry Logic"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:"# Configure retry strategy\nagent.configure_retry(\n    max_attempts=5,\n    backoff_factor=2,\n    max_delay=30,\n    retry_on=[500, 502, 503, 504]  # HTTP status codes\n)\n"})}),"\n",(0,i.jsx)(a.h2,{id:"testing",children:"Testing"}),"\n",(0,i.jsx)(a.h3,{id:"unit-tests",children:"Unit Tests"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:'import pytest\nfrom src.agents.data_collection.image_refresh_agent import ImageRefreshAgent\n\ndef test_fetch_camera_image(mock_camera_api):\n    agent = ImageRefreshAgent()\n    image = agent.fetch_camera_image("CAM_TEST_001")\n    \n    assert image.camera_id == "CAM_TEST_001"\n    assert len(image.image_data) > 0\n    assert image.format in ["JPEG", "PNG"]\n\ndef test_cache_behavior(mock_cache):\n    agent = ImageRefreshAgent(cache_manager=mock_cache)\n    \n    # First fetch - cache miss\n    image1 = agent.fetch_camera_image("CAM_001")\n    assert mock_cache.get_call_count() == 1\n    \n    # Second fetch - cache hit\n    image2 = agent.get_cached_image("CAM_001")\n    assert image2 is not None\n    assert image1.camera_id == image2.camera_id\n'})}),"\n",(0,i.jsx)(a.h3,{id:"integration-tests",children:"Integration Tests"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:"@pytest.mark.integration\ndef test_end_to_end_workflow():\n    agent = ImageRefreshAgent()\n    \n    # Fetch all cameras\n    images = agent.fetch_all_cameras()\n    assert len(images) > 0\n    \n    # Verify cache population\n    for image in images:\n        cached = agent.get_cached_image(image.camera_id)\n        assert cached is not None\n"})}),"\n",(0,i.jsx)(a.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(a.h3,{id:"1-cache-management",children:"1. Cache Management"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:"# Always check cache first\nimage = agent.get_cached_image(camera_id)\nif not image or image.is_stale():\n    image = agent.fetch_camera_image(camera_id)\n"})}),"\n",(0,i.jsx)(a.h3,{id:"2-error-handling",children:"2. Error Handling"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:"# Implement graceful degradation\ntry:\n    image = agent.fetch_camera_image(camera_id)\nexcept CameraAPIError:\n    # Use cached image even if stale\n    image = agent.get_cached_image(camera_id)\n    if not image:\n        # Use placeholder image\n        image = agent.get_placeholder_image()\n"})}),"\n",(0,i.jsx)(a.h3,{id:"3-resource-cleanup",children:"3. Resource Cleanup"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-python",children:"# Always close connections\ntry:\n    agent = ImageRefreshAgent()\n    images = agent.fetch_all_cameras()\nfinally:\n    agent.close()  # Close connections and cleanup resources\n"})}),"\n",(0,i.jsx)(a.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(a.h3,{id:"issue-high-cache-miss-rate",children:"Issue: High Cache Miss Rate"}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Symptoms"}),": Cache hit rate below 50%"]}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsx)(a.li,{children:"Increase cache TTL"}),"\n",(0,i.jsx)(a.li,{children:"Reduce fetch frequency"}),"\n",(0,i.jsx)(a.li,{children:"Check Redis memory limits"}),"\n",(0,i.jsx)(a.li,{children:"Verify cache key generation"}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"issue-slow-image-fetching",children:"Issue: Slow Image Fetching"}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Symptoms"}),": Average fetch time > 1 second"]}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsx)(a.li,{children:"Enable parallel processing"}),"\n",(0,i.jsx)(a.li,{children:"Reduce image quality/resolution"}),"\n",(0,i.jsx)(a.li,{children:"Check network latency"}),"\n",(0,i.jsx)(a.li,{children:"Optimize API endpoint"}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"issue-memory-leaks",children:"Issue: Memory Leaks"}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Symptoms"}),": Increasing memory usage over time"]}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsx)(a.li,{children:"Ensure proper resource cleanup"}),"\n",(0,i.jsx)(a.li,{children:"Reduce L1 cache size"}),"\n",(0,i.jsx)(a.li,{children:"Check for circular references"}),"\n",(0,i.jsx)(a.li,{children:"Monitor Python GC metrics"}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"/tes/vi/docs/agents/data-collection/external-data-collector",children:"External Data Collector Agent"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"/tes/vi/docs/agents/analytics/cv-analysis",children:"CV Analysis Agent"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"/tes/vi/docs/agents/cache/cache-manager",children:"Cache Manager Agent"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"/tes/vi/docs/agents/monitoring/data-quality-validator",children:"Data Quality Validator"})}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"contributing",children:"Contributing"}),"\n",(0,i.jsxs)(a.p,{children:["See ",(0,i.jsx)(a.a,{href:"/tes/vi/docs/guides/contributing",children:"Contributing Guide"})," for information on how to contribute to this agent."]}),"\n",(0,i.jsx)(a.h2,{id:"license",children:"License"}),"\n",(0,i.jsx)(a.p,{children:"MIT License - Copyright (c) 2025 UIP Contributors (Nguy\u1ec5n Nh\u1eadt Quang, Nguy\u1ec5n Vi\u1ec7t Ho\xe0ng, Nguy\u1ec5n \u0110\xecnh Anh Tu\u1ea5n)"}),"\n",(0,i.jsxs)(a.p,{children:["See ",(0,i.jsx)(a.a,{href:"../LICENSE",children:"LICENSE"})," for details."]})]})}function d(e={}){const{wrapper:a}={...(0,c.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>t,x:()=>s});var r=n(6540);const i={},c=r.createContext(i);function t(e){const a=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(c.Provider,{value:a},e.children)}}}]);