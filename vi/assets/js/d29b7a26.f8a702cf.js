"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[9720],{8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>l});var a=n(6540);const t={},s=a.createContext(t);function i(e){const r=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(s.Provider,{value:r},e.children)}},8689:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"agents/data-collection/image-refresh","title":"image-refresh","description":"\x3c!--","source":"@site/docs/agents/data-collection/image-refresh.md","sourceDirName":"agents/data-collection","slug":"/agents/data-collection/image-refresh","permalink":"/tes/vi/docs/agents/data-collection/image-refresh","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/data-collection/image-refresh.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"external-data-collector","permalink":"/tes/vi/docs/agents/data-collection/external-data-collector"},"next":{"title":"ngsi-ld-transformer","permalink":"/tes/vi/docs/agents/transformation/ngsi-ld-transformer"}}');var t=n(4848),s=n(8453);const i={sidebar_position:4},l="Image Refresh Agent",c={},d=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\ud83c\udfaf Purpose",id:"-purpose",level:2},{value:"\ud83d\ude80 Usage",id:"-usage",level:2},{value:"Start Image Refresh",id:"start-image-refresh",level:3},{value:"Refresh Specific Cameras",id:"refresh-specific-cameras",level:3},{value:"Get Image Status",id:"get-image-status",level:3},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:2},{value:"\ud83d\udcca Image Events",id:"-image-events",level:2},{value:"\ud83d\udd04 Integration with CV",id:"-integration-with-cv",level:2},{value:"\ud83d\udcd6 Related Documentation",id:"-related-documentation",level:2}];function o(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"image-refresh-agent",children:"Image Refresh Agent"})}),"\n",(0,t.jsx)(r.p,{children:"The Image Refresh Agent manages periodic refresh of traffic camera images for real-time monitoring."}),"\n",(0,t.jsx)(r.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Property"}),(0,t.jsx)(r.th,{children:"Value"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Module"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"src.agents.data_collection.image_refresh_agent"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Class"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ImageRefreshAgent"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Author"})}),(0,t.jsx)(r.td,{children:"UIP Team"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Version"})}),(0,t.jsx)(r.td,{children:"1.0.0"})]})]})]}),"\n",(0,t.jsx)(r.h2,{id:"-purpose",children:"\ud83c\udfaf Purpose"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Refresh camera images"})," at configurable intervals"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Monitor image availability"})," and quality"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Trigger CV analysis"})," on new images"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Manage image storage"})," and lifecycle"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"-usage",children:"\ud83d\ude80 Usage"}),"\n",(0,t.jsx)(r.h3,{id:"start-image-refresh",children:"Start Image Refresh"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'from src.agents.data_collection.image_refresh_agent import ImageRefreshAgent\r\n\r\nagent = ImageRefreshAgent()\r\n\r\n# Start refresh for all cameras\r\nawait agent.start_refresh(\r\n    interval_seconds=30,\r\n    cameras="all"\r\n)\n'})}),"\n",(0,t.jsx)(r.h3,{id:"refresh-specific-cameras",children:"Refresh Specific Cameras"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'# Refresh specific cameras\r\nawait agent.refresh_cameras([\r\n    "CAM_001", "CAM_002", "CAM_003"\r\n])\r\n\r\n# Refresh by zone\r\nawait agent.refresh_zone("district_1")\n'})}),"\n",(0,t.jsx)(r.h3,{id:"get-image-status",children:"Get Image Status"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'# Get refresh status\r\nstatus = await agent.get_status()\r\n# {\r\n#     "total_cameras": 150,\r\n#     "active": 145,\r\n#     "failed": 3,\r\n#     "offline": 2,\r\n#     "last_refresh": "2025-01-15T10:30:00Z"\r\n# }\n'})}),"\n",(0,t.jsx)(r.h2,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-yaml",children:'# config/cv_config.yaml\r\nimage_refresh:\r\n  enabled: true\r\n  \r\n  # Refresh settings\r\n  refresh:\r\n    default_interval_seconds: 30\r\n    priority_interval_seconds: 10  # For high-priority cameras\r\n    max_concurrent: 50\r\n  \r\n  # Image settings\r\n  image:\r\n    format: "jpeg"\r\n    quality: 85\r\n    max_size_kb: 500\r\n  \r\n  # Storage\r\n  storage:\r\n    local_path: "data/images"\r\n    retention_hours: 24\r\n  \r\n  # Failure handling\r\n  failure:\r\n    max_retries: 3\r\n    retry_delay_seconds: 5\r\n    offline_threshold: 5  # Mark offline after N failures\n'})}),"\n",(0,t.jsx)(r.h2,{id:"-image-events",children:"\ud83d\udcca Image Events"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Event"}),(0,t.jsx)(r.th,{children:"Description"}),(0,t.jsx)(r.th,{children:"Trigger"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"image.refreshed"})}),(0,t.jsx)(r.td,{children:"New image captured"}),(0,t.jsx)(r.td,{children:"Successful refresh"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"image.failed"})}),(0,t.jsx)(r.td,{children:"Refresh failed"}),(0,t.jsx)(r.td,{children:"Network/camera error"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"camera.offline"})}),(0,t.jsx)(r.td,{children:"Camera marked offline"}),(0,t.jsx)(r.td,{children:"Multiple failures"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"camera.online"})}),(0,t.jsx)(r.td,{children:"Camera back online"}),(0,t.jsx)(r.td,{children:"Successful after offline"})]})]})]}),"\n",(0,t.jsx)(r.h2,{id:"-integration-with-cv",children:"\ud83d\udd04 Integration with CV"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:"# Register CV analysis callback\r\nagent.on_refresh(lambda camera_id, image: \r\n    cv_agent.analyze(camera_id, image)\r\n)\n"})}),"\n",(0,t.jsx)(r.h2,{id:"-related-documentation",children:"\ud83d\udcd6 Related Documentation"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"camera-image-fetch",children:"Camera Image Fetch"})," - Initial image fetch"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"../analytics/cv-analysis",children:"CV Analysis Agent"})," - Computer vision analysis"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"../analytics/pattern-recognition",children:"Pattern Recognition"})," - Traffic patterns"]}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsxs)(r.p,{children:["See the ",(0,t.jsx)(r.a,{href:"../complete-agents-reference",children:"complete agents reference"})," for all available agents."]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);