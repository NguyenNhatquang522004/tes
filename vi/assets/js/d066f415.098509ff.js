"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[9147],{6550:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"agents/state-management/state-manager","title":"state-manager","description":"\x3c!--","source":"@site/docs/agents/state-management/state-manager.md","sourceDirName":"agents/state-management","slug":"/agents/state-management/state-manager","permalink":"/tes/vi/docs/agents/state-management/state-manager","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/state-management/state-manager.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"temporal-data-manager","permalink":"/tes/vi/docs/agents/context-management/temporal-data-manager"},"next":{"title":"accident-state-manager","permalink":"/tes/vi/docs/agents/state-management/accident-state-manager"}}');var a=n(4848),s=n(8453);const i={sidebar_position:1},d="State Manager Agent",c={},l=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\ud83c\udfaf Purpose",id:"-purpose",level:2},{value:"\ud83d\udcca State Model",id:"-state-model",level:2},{value:"Entity States",id:"entity-states",level:3},{value:"State Transitions",id:"state-transitions",level:3},{value:"\ud83d\udd27 Architecture",id:"-architecture",level:2},{value:"\ud83d\ude80 Usage",id:"-usage",level:2},{value:"Get State",id:"get-state",level:3},{value:"Update State",id:"update-state",level:3},{value:"State History",id:"state-history",level:3},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:2},{value:"\ud83d\udcc8 State Events",id:"-state-events",level:2},{value:"Event Types",id:"event-types",level:3},{value:"Event Publishing",id:"event-publishing",level:3},{value:"\ud83d\udcd6 Related Documentation",id:"-related-documentation",level:2}];function o(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"state-manager-agent",children:"State Manager Agent"})}),"\n",(0,a.jsx)(t.p,{children:"The State Manager Agent provides centralized state management for traffic entities across the platform."}),"\n",(0,a.jsx)(t.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Property"}),(0,a.jsx)(t.th,{children:"Value"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Module"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"src.agents.state_management.state_manager_agent"})})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Class"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"StateManagerAgent"})})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Author"})}),(0,a.jsx)(t.td,{children:"UIP Team"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Version"})}),(0,a.jsx)(t.td,{children:"1.0.0"})]})]})]}),"\n",(0,a.jsx)(t.h2,{id:"-purpose",children:"\ud83c\udfaf Purpose"}),"\n",(0,a.jsx)(t.p,{children:"The State Manager Agent handles:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Centralized state storage"})," for all traffic entities"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"State transitions"})," with validation"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Event sourcing"})," for state history"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"State synchronization"})," across services"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"-state-model",children:"\ud83d\udcca State Model"}),"\n",(0,a.jsx)(t.h3,{id:"entity-states",children:"Entity States"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Entity Type"}),(0,a.jsx)(t.th,{children:"Possible States"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Camera"}),(0,a.jsx)(t.td,{children:"active, inactive, maintenance, offline"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Observation"}),(0,a.jsx)(t.td,{children:"pending, validated, published, archived"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Accident"}),(0,a.jsx)(t.td,{children:"detected, confirmed, responding, resolved"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Congestion"}),(0,a.jsx)(t.td,{children:"forming, active, dissipating, cleared"})]})]})]}),"\n",(0,a.jsx)(t.h3,{id:"state-transitions",children:"State Transitions"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-text",children:"Camera State Machine:\r\n                    \r\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n    \u25bc                          \u2502\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   activate    \u250c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510\r\n\u2502inactive\u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502  active  \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518               \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518\r\n     \u2502                        \u2502\r\n     \u2502 maintenance     offline\u2502\r\n     \u25bc                        \u25bc\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502maintenance \u2502         \u2502 offline  \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsx)(t.h2,{id:"-architecture",children:"\ud83d\udd27 Architecture"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-text",children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502            State Manager Agent              \u2502\r\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n\u2502                                             \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\r\n\u2502  \u2502  State  \u2502  \u2502 Event   \u2502  \u2502    State    \u2502 \u2502\r\n\u2502  \u2502  Store  \u2502  \u2502 Source  \u2502  \u2502  Validator  \u2502 \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\r\n\u2502       \u2502            \u2502              \u2502         \u2502\r\n\u2502       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502\r\n\u2502                    \u25bc                        \u2502\r\n\u2502           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                 \u2502\r\n\u2502           \u2502 State Machine \u2502                 \u2502\r\n\u2502           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                 \u2502\r\n\u2502                   \u2502                         \u2502\r\n\u2502       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\r\n\u2502       \u25bc           \u25bc           \u25bc            \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\r\n\u2502  \u2502  Redis  \u2502 \u2502 MongoDB \u2502 \u2502  Event  \u2502       \u2502\r\n\u2502  \u2502  Cache  \u2502 \u2502  Store  \u2502 \u2502  Bus    \u2502       \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsx)(t.h2,{id:"-usage",children:"\ud83d\ude80 Usage"}),"\n",(0,a.jsx)(t.h3,{id:"get-state",children:"Get State"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from src.agents.state_management.state_manager_agent import StateManagerAgent\r\n\r\nstate_manager = StateManagerAgent()\r\n\r\n# Get current state\r\nstate = state_manager.get_state("camera:CAM_001")\r\nprint(f"Current state: {state[\'status\']}")\n'})}),"\n",(0,a.jsx)(t.h3,{id:"update-state",children:"Update State"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'# Update state with transition\r\nstate_manager.transition(\r\n    entity_id="camera:CAM_001",\r\n    from_state="inactive",\r\n    to_state="active",\r\n    metadata={"activated_by": "system"}\r\n)\n'})}),"\n",(0,a.jsx)(t.h3,{id:"state-history",children:"State History"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"# Get state history\r\nhistory = state_manager.get_history(\r\n    entity_id=\"camera:CAM_001\",\r\n    limit=10\r\n)\r\n\r\nfor event in history:\r\n    print(f\"{event['timestamp']}: {event['from_state']} -> {event['to_state']}\")\n"})}),"\n",(0,a.jsx)(t.h2,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yaml",children:"# config/state_manager_config.yaml\r\nstate_manager:\r\n  enabled: true\r\n  \r\n  # Storage backends\r\n  storage:\r\n    primary: redis\r\n    persistent: mongodb\r\n  \r\n  # State definitions\r\n  entities:\r\n    camera:\r\n      states:\r\n        - active\r\n        - inactive\r\n        - maintenance\r\n        - offline\r\n      transitions:\r\n        inactive:\r\n          - active\r\n          - maintenance\r\n        active:\r\n          - inactive\r\n          - offline\r\n        maintenance:\r\n          - active\r\n          - inactive\r\n        offline:\r\n          - active\r\n    \r\n    accident:\r\n      states:\r\n        - detected\r\n        - confirmed\r\n        - responding\r\n        - resolved\r\n      transitions:\r\n        detected:\r\n          - confirmed\r\n          - resolved\r\n        confirmed:\r\n          - responding\r\n          - resolved\r\n        responding:\r\n          - resolved\r\n  \r\n  # Event sourcing\r\n  event_sourcing:\r\n    enabled: true\r\n    retention_days: 30\n"})}),"\n",(0,a.jsx)(t.h2,{id:"-state-events",children:"\ud83d\udcc8 State Events"}),"\n",(0,a.jsx)(t.h3,{id:"event-types",children:"Event Types"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Event"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"state.created"})}),(0,a.jsx)(t.td,{children:"New entity state created"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"state.updated"})}),(0,a.jsx)(t.td,{children:"State transition occurred"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"state.deleted"})}),(0,a.jsx)(t.td,{children:"Entity state removed"})]})]})]}),"\n",(0,a.jsx)(t.h3,{id:"event-publishing",children:"Event Publishing"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"# Subscribe to state changes\r\nstate_manager.subscribe(\"camera:*\", on_camera_state_change)\r\n\r\n# Handler function\r\ndef on_camera_state_change(event):\r\n    print(f\"Camera {event['entity_id']} changed to {event['new_state']}\")\n"})}),"\n",(0,a.jsx)(t.h2,{id:"-related-documentation",children:"\ud83d\udcd6 Related Documentation"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"accident-state-manager",children:"Accident State Manager"})," - Accident state handling"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"congestion-state-manager",children:"Congestion State Manager"})," - Congestion state handling"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"temporal-state-tracker",children:"Temporal State Tracker"})," - Time-based state tracking"]}),"\n"]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsxs)(t.p,{children:["See the ",(0,a.jsx)(t.a,{href:"../complete-agents-reference",children:"complete agents reference"})," for all available agents."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>d});var r=n(6540);const a={},s=r.createContext(a);function i(e){const t=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);