"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[669],{7386:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"guides/deployment","title":"deployment","description":"\x3c!--","source":"@site/docs/guides/deployment.md","sourceDirName":"guides","slug":"/guides/deployment","permalink":"/tes/vi/docs/guides/deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/guides/deployment.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"development","permalink":"/tes/vi/docs/guides/development"},"next":{"title":"troubleshooting","permalink":"/tes/vi/docs/guides/troubleshooting"}}');var r=a(4848),t=a(8453);const i={},c="Deployment Guide",l={},o=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Environment Configuration",id:"environment-configuration",level:2},{value:"1. Environment Variables",id:"1-environment-variables",level:3},{value:"\u2601\ufe0f Cloud Deployment Guides",id:"\ufe0f-cloud-deployment-guides",level:2},{value:"AWS Deployment",id:"aws-deployment",level:3},{value:"1. Infrastructure Setup (Terraform)",id:"1-infrastructure-setup-terraform",level:4},{value:"2. Deploy with ECS",id:"2-deploy-with-ecs",level:4},{value:"Azure Deployment",id:"azure-deployment",level:3},{value:"1. Create Resources",id:"1-create-resources",level:4},{value:"2. Deploy Application",id:"2-deploy-application",level:4},{value:"Google Cloud Deployment",id:"google-cloud-deployment",level:3},{value:"1. Setup GKE Cluster",id:"1-setup-gke-cluster",level:4},{value:"2. Deploy with Cloud Run (Serverless Option)",id:"2-deploy-with-cloud-run-serverless-option",level:4},{value:"\ud83d\udd12 Security Hardening",id:"-security-hardening",level:2},{value:"SSL/TLS Configuration",id:"ssltls-configuration",level:3},{value:"Secrets Management",id:"secrets-management",level:3},{value:"\ud83d\udcca Monitoring Setup",id:"-monitoring-setup",level:2},{value:"Prometheus Configuration",id:"prometheus-configuration",level:3},{value:"Grafana Dashboards",id:"grafana-dashboards",level:3},{value:"Docker Deployment",id:"docker-deployment",level:2},{value:"1. Build Images",id:"1-build-images",level:3},{value:"2. Docker Compose",id:"2-docker-compose",level:3},{value:"3. Deploy",id:"3-deploy",level:3},{value:"Kubernetes Deployment",id:"kubernetes-deployment",level:2},{value:"1. Create Namespace",id:"1-create-namespace",level:3},{value:"2. ConfigMap",id:"2-configmap",level:3},{value:"3. Secrets",id:"3-secrets",level:3},{value:"4. Backend Deployment",id:"4-backend-deployment",level:3},{value:"5. Frontend Deployment",id:"5-frontend-deployment",level:3},{value:"6. Ingress",id:"6-ingress",level:3},{value:"7. Deploy to Kubernetes",id:"7-deploy-to-kubernetes",level:3},{value:"Cloud Deployments",id:"cloud-deployments",level:2},{value:"Azure",id:"azure",level:3},{value:"AWS EKS",id:"aws-eks",level:3},{value:"Google Cloud GKE",id:"google-cloud-gke",level:3},{value:"Database Setup",id:"database-setup",level:2},{value:"MongoDB",id:"mongodb",level:3},{value:"Fuseki",id:"fuseki",level:3},{value:"Monitoring Setup",id:"monitoring-setup",level:2},{value:"Prometheus",id:"prometheus",level:3},{value:"Grafana",id:"grafana",level:3},{value:"SSL/TLS Configuration for Kubernetes",id:"ssltls-configuration-for-kubernetes",level:2},{value:"Backup Strategy",id:"backup-strategy",level:2},{value:"Scaling",id:"scaling",level:2},{value:"Horizontal Pod Autoscaling",id:"horizontal-pod-autoscaling",level:3},{value:"Health Checks",id:"health-checks",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Check Logs",id:"check-logs",level:3},{value:"Debug Connection Issues",id:"debug-connection-issues",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"License",id:"license",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"deployment-guide",children:"Deployment Guide"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Complete guide for deploying the HCMC Traffic Management System to production environments including Docker, Kubernetes, and cloud platforms."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Docker 24.0+"}),"\n",(0,r.jsx)(n.li,{children:"Kubernetes 1.28+ (for K8s deployment)"}),"\n",(0,r.jsx)(n.li,{children:"MongoDB 6.0+"}),"\n",(0,r.jsx)(n.li,{children:"Redis 7.0+"}),"\n",(0,r.jsx)(n.li,{children:"Stellio Context Broker 2.0+"}),"\n",(0,r.jsx)(n.li,{children:"Apache Jena Fuseki 4.0+"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"environment-configuration",children:"Environment Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"1-environment-variables",children:"1. Environment Variables"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Application\nAPP_ENV=production\nAPP_PORT=8000\nDEBUG=false\n\n# Database\nMONGO_URI=mongodb://mongo:27017/hcmc_traffic\nREDIS_URL=redis://redis:6379\n\n# Context Broker\nSTELLIO_URL=http://stellio:8080\nSTELLIO_CONTEXT=https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\n\n# Triplestore\nFUSEKI_URL=http://fuseki:3030\nFUSEKI_DATASET=hcmc-traffic\n\n# API Keys\nWEATHER_API_KEY=your_openweather_key\nAIR_QUALITY_API_KEY=your_aqicn_key\n\n# Security\nJWT_SECRET=your_secret_key_here\nCORS_ORIGINS=https://traffic.example.com\n\n# Monitoring\nGRAFANA_URL=http://grafana:3000\nPROMETHEUS_URL=http://prometheus:9090\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-cloud-deployment-guides",children:"\u2601\ufe0f Cloud Deployment Guides"}),"\n",(0,r.jsx)(n.h3,{id:"aws-deployment",children:"AWS Deployment"}),"\n",(0,r.jsx)(n.h4,{id:"1-infrastructure-setup-terraform",children:"1. Infrastructure Setup (Terraform)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-hcl",children:'# main.tf\nprovider "aws" {\n  region = "ap-southeast-1"  # Singapore\n}\n\n# ECS Cluster\nresource "aws_ecs_cluster" "traffic_cluster" {\n  name = "hcmc-traffic-cluster"\n}\n\n# RDS PostgreSQL\nresource "aws_db_instance" "postgres" {\n  engine         = "postgres"\n  engine_version = "15.4"\n  instance_class = "db.t3.large"\n  allocated_storage = 100\n  \n  db_name  = "traffic_db"\n  username = var.db_username\n  password = var.db_password\n  \n  multi_az = true\n  backup_retention_period = 7\n}\n\n# ElastiCache Redis\nresource "aws_elasticache_cluster" "redis" {\n  cluster_id      = "traffic-redis"\n  engine          = "redis"\n  engine_version  = "7.0"\n  node_type       = "cache.t3.medium"\n  num_cache_nodes = 2\n}\n\n# Application Load Balancer\nresource "aws_lb" "traffic_alb" {\n  name               = "traffic-alb"\n  internal           = false\n  load_balancer_type = "application"\n  security_groups    = [aws_security_group.alb_sg.id]\n  subnets            = aws_subnet.public[*].id\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"2-deploy-with-ecs",children:"2. Deploy with ECS"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build and push Docker image\naws ecr get-login-password --region ap-southeast-1 | \\\n  docker login --username AWS --password-stdin <account-id>.dkr.ecr.ap-southeast-1.amazonaws.com\n\ndocker build -t traffic-backend .\ndocker tag traffic-backend:latest <account-id>.dkr.ecr.ap-southeast-1.amazonaws.com/traffic-backend:latest\ndocker push <account-id>.dkr.ecr.ap-southeast-1.amazonaws.com/traffic-backend:latest\n\n# Deploy ECS service\naws ecs update-service \\\n  --cluster hcmc-traffic-cluster \\\n  --service traffic-backend-service \\\n  --force-new-deployment\n"})}),"\n",(0,r.jsx)(n.h3,{id:"azure-deployment",children:"Azure Deployment"}),"\n",(0,r.jsx)(n.h4,{id:"1-create-resources",children:"1. Create Resources"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create resource group\naz group create --name traffic-rg --location southeastasia\n\n# Create AKS cluster\naz aks create \\\n  --resource-group traffic-rg \\\n  --name traffic-aks \\\n  --node-count 3 \\\n  --node-vm-size Standard_D8s_v5 \\\n  --enable-managed-identity \\\n  --generate-ssh-keys\n\n# Get credentials\naz aks get-credentials --resource-group traffic-rg --name traffic-aks\n\n# Create Azure Container Registry\naz acr create \\\n  --resource-group traffic-rg \\\n  --name trafficacr \\\n  --sku Standard\n\n# Attach ACR to AKS\naz aks update \\\n  --resource-group traffic-rg \\\n  --name traffic-aks \\\n  --attach-acr trafficacr\n"})}),"\n",(0,r.jsx)(n.h4,{id:"2-deploy-application",children:"2. Deploy Application"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build and push image\naz acr build \\\n  --registry trafficacr \\\n  --image traffic-backend:v1.0.0 \\\n  --file Dockerfile .\n\n# Deploy with Helm\nhelm install traffic-system ./helm/traffic-system \\\n  --namespace traffic-system \\\n  --create-namespace \\\n  --set image.repository=trafficacr.azurecr.io/traffic-backend \\\n  --set image.tag=v1.0.0\n"})}),"\n",(0,r.jsx)(n.h3,{id:"google-cloud-deployment",children:"Google Cloud Deployment"}),"\n",(0,r.jsx)(n.h4,{id:"1-setup-gke-cluster",children:"1. Setup GKE Cluster"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create GKE cluster\ngcloud container clusters create traffic-cluster \\\n  --zone asia-southeast1-a \\\n  --num-nodes 3 \\\n  --machine-type n2-standard-8 \\\n  --enable-autoscaling \\\n  --min-nodes 2 \\\n  --max-nodes 10\n\n# Get credentials\ngcloud container clusters get-credentials traffic-cluster --zone asia-southeast1-a\n\n# Create Cloud SQL instance\ngcloud sql instances create traffic-postgres \\\n  --database-version=POSTGRES_15 \\\n  --tier=db-custom-4-16384 \\\n  --region=asia-southeast1\n"})}),"\n",(0,r.jsx)(n.h4,{id:"2-deploy-with-cloud-run-serverless-option",children:"2. Deploy with Cloud Run (Serverless Option)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build image\ngcloud builds submit --tag gcr.io/<project-id>/traffic-backend\n\n# Deploy to Cloud Run\ngcloud run deploy traffic-backend \\\n  --image gcr.io/<project-id>/traffic-backend \\\n  --platform managed \\\n  --region asia-southeast1 \\\n  --allow-unauthenticated \\\n  --memory 2Gi \\\n  --cpu 2 \\\n  --max-instances 10\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-security-hardening",children:"\ud83d\udd12 Security Hardening"}),"\n",(0,r.jsx)(n.h3,{id:"ssltls-configuration",children:"SSL/TLS Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nginx",children:'# nginx.conf\nserver {\n    listen 443 ssl http2;\n    server_name api.traffic.example.com;\n    \n    ssl_certificate /etc/ssl/certs/traffic.crt;\n    ssl_certificate_key /etc/ssl/private/traffic.key;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n    ssl_prefer_server_ciphers on;\n    \n    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;\n    add_header X-Content-Type-Options "nosniff" always;\n    add_header X-Frame-Options "DENY" always;\n    \n    location / {\n        proxy_pass http://backend:8000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"secrets-management",children:"Secrets Management"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Using HashiCorp Vault\nvault kv put secret/traffic/db \\\n  username=traffic_user \\\n  password=secure_password\n\n# Using Kubernetes Secrets\nkubectl create secret generic db-credentials \\\n  --from-literal=username=traffic_user \\\n  --from-literal=password=secure_password \\\n  --namespace traffic-system\n\n# Using AWS Secrets Manager\naws secretsmanager create-secret \\\n  --name traffic/db/credentials \\\n  --secret-string \'{"username":"traffic_user","password":"secure_password"}\'\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-monitoring-setup",children:"\ud83d\udcca Monitoring Setup"}),"\n",(0,r.jsx)(n.h3,{id:"prometheus-configuration",children:"Prometheus Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# prometheus.yml\nglobal:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n\nscrape_configs:\n  - job_name: 'traffic-backend'\n    static_configs:\n      - targets: ['backend:8000']\n    metrics_path: '/metrics'\n    \n  - job_name: 'kubernetes-pods'\n    kubernetes_sd_configs:\n      - role: pod\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]\n        action: keep\n        regex: true\n"})}),"\n",(0,r.jsx)(n.h3,{id:"grafana-dashboards",children:"Grafana Dashboards"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "dashboard": {\n    "title": "Traffic System Overview",\n    "panels": [\n      {\n        "title": "Active Cameras",\n        "targets": [{\n          "expr": "sum(camera_status{status=\'active\'})"\n        }]\n      },\n      {\n        "title": "Accidents Detected (24h)",\n        "targets": [{\n          "expr": "sum(increase(accidents_detected_total[24h]))"\n        }]\n      },\n      {\n        "title": "API Response Time (P95)",\n        "targets": [{\n          "expr": "histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))"\n        }]\n      }\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"docker-deployment",children:"Docker Deployment"}),"\n",(0,r.jsx)(n.h3,{id:"1-build-images",children:"1. Build Images"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build backend\ndocker build -t hcmc-traffic-backend:latest .\n\n# Build frontend\ndocker build -t hcmc-traffic-frontend:latest ./apps/traffic-web-app/frontend\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-docker-compose",children:"2. Docker Compose"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# docker-compose.prod.yml\nversion: \'3.9\'\n\nservices:\n  backend:\n    image: hcmc-traffic-backend:latest\n    ports:\n      - "8000:8000"\n    environment:\n      - APP_ENV=production\n    depends_on:\n      - mongo\n      - redis\n      - stellio\n    restart: always\n    \n  frontend:\n    image: hcmc-traffic-frontend:latest\n    ports:\n      - "3000:3000"\n    depends_on:\n      - backend\n    restart: always\n    \n  mongo:\n    image: mongo:6.0\n    volumes:\n      - mongo_data:/data/db\n    restart: always\n    \n  redis:\n    image: redis:7-alpine\n    volumes:\n      - redis_data:/data\n    restart: always\n    \n  stellio:\n    image: stellio/stellio-context-broker:latest\n    ports:\n      - "8080:8080"\n    environment:\n      - SPRING_PROFILES_ACTIVE=prod\n    restart: always\n    \n  fuseki:\n    image: stain/jena-fuseki:latest\n    ports:\n      - "3030:3030"\n    volumes:\n      - fuseki_data:/fuseki\n    restart: always\n\nvolumes:\n  mongo_data:\n  redis_data:\n  fuseki_data:\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-deploy",children:"3. Deploy"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker-compose -f docker-compose.prod.yml up -d\n"})}),"\n",(0,r.jsx)(n.h2,{id:"kubernetes-deployment",children:"Kubernetes Deployment"}),"\n",(0,r.jsx)(n.h3,{id:"1-create-namespace",children:"1. Create Namespace"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# namespace.yaml\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: hcmc-traffic\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-configmap",children:"2. ConfigMap"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# configmap.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: app-config\n  namespace: hcmc-traffic\ndata:\n  MONGO_URI: "mongodb://mongo:27017/hcmc_traffic"\n  STELLIO_URL: "http://stellio:8080"\n  FUSEKI_URL: "http://fuseki:3030"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-secrets",children:"3. Secrets"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# secrets.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: app-secrets\n  namespace: hcmc-traffic\ntype: Opaque\nstringData:\n  WEATHER_API_KEY: "your_key"\n  JWT_SECRET: "your_secret"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"4-backend-deployment",children:"4. Backend Deployment"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# backend-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: backend\n  namespace: hcmc-traffic\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: backend\n  template:\n    metadata:\n      labels:\n        app: backend\n    spec:\n      containers:\n      - name: backend\n        image: hcmc-traffic-backend:latest\n        ports:\n        - containerPort: 8000\n        envFrom:\n        - configMapRef:\n            name: app-config\n        - secretRef:\n            name: app-secrets\n        resources:\n          requests:\n            memory: "512Mi"\n            cpu: "500m"\n          limits:\n            memory: "2Gi"\n            cpu: "2000m"\n        livenessProbe:\n          httpGet:\n            path: /health\n            port: 8000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 8000\n          initialDelaySeconds: 10\n          periodSeconds: 5\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: backend\n  namespace: hcmc-traffic\nspec:\n  selector:\n    app: backend\n  ports:\n  - port: 8000\n    targetPort: 8000\n  type: ClusterIP\n'})}),"\n",(0,r.jsx)(n.h3,{id:"5-frontend-deployment",children:"5. Frontend Deployment"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# frontend-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: frontend\n  namespace: hcmc-traffic\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: frontend\n  template:\n    metadata:\n      labels:\n        app: frontend\n    spec:\n      containers:\n      - name: frontend\n        image: hcmc-traffic-frontend:latest\n        ports:\n        - containerPort: 3000\n        resources:\n          requests:\n            memory: "256Mi"\n            cpu: "250m"\n          limits:\n            memory: "512Mi"\n            cpu: "500m"\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: frontend\n  namespace: hcmc-traffic\nspec:\n  selector:\n    app: frontend\n  ports:\n  - port: 80\n    targetPort: 3000\n  type: LoadBalancer\n'})}),"\n",(0,r.jsx)(n.h3,{id:"6-ingress",children:"6. Ingress"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# ingress.yaml\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: app-ingress\n  namespace: hcmc-traffic\n  annotations:\n    cert-manager.io/cluster-issuer: letsencrypt-prod\nspec:\n  tls:\n  - hosts:\n    - traffic.example.com\n    secretName: tls-secret\n  rules:\n  - host: traffic.example.com\n    http:\n      paths:\n      - path: /api\n        pathType: Prefix\n        backend:\n          service:\n            name: backend\n            port:\n              number: 8000\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: frontend\n            port:\n              number: 80\n"})}),"\n",(0,r.jsx)(n.h3,{id:"7-deploy-to-kubernetes",children:"7. Deploy to Kubernetes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Apply all resources\nkubectl apply -f namespace.yaml\nkubectl apply -f configmap.yaml\nkubectl apply -f secrets.yaml\nkubectl apply -f backend-deployment.yaml\nkubectl apply -f frontend-deployment.yaml\nkubectl apply -f ingress.yaml\n\n# Verify deployment\nkubectl get pods -n hcmc-traffic\nkubectl get services -n hcmc-traffic\n"})}),"\n",(0,r.jsx)(n.h2,{id:"cloud-deployments",children:"Cloud Deployments"}),"\n",(0,r.jsx)(n.h3,{id:"azure",children:"Azure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create resource group\naz group create --name hcmc-traffic-rg --location southeastasia\n\n# Create AKS cluster\naz aks create \\\n  --resource-group hcmc-traffic-rg \\\n  --name hcmc-traffic-cluster \\\n  --node-count 3 \\\n  --enable-addons monitoring \\\n  --generate-ssh-keys\n\n# Get credentials\naz aks get-credentials --resource-group hcmc-traffic-rg --name hcmc-traffic-cluster\n\n# Deploy\nkubectl apply -f k8s/\n"})}),"\n",(0,r.jsx)(n.h3,{id:"aws-eks",children:"AWS EKS"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create cluster\neksctl create cluster \\\n  --name hcmc-traffic-cluster \\\n  --region ap-southeast-1 \\\n  --nodegroup-name standard-workers \\\n  --node-type t3.medium \\\n  --nodes 3\n\n# Deploy\nkubectl apply -f k8s/\n"})}),"\n",(0,r.jsx)(n.h3,{id:"google-cloud-gke",children:"Google Cloud GKE"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create cluster\ngcloud container clusters create hcmc-traffic-cluster \\\n  --zone asia-southeast1-a \\\n  --num-nodes 3 \\\n  --machine-type n1-standard-2\n\n# Get credentials\ngcloud container clusters get-credentials hcmc-traffic-cluster\n\n# Deploy\nkubectl apply -f k8s/\n"})}),"\n",(0,r.jsx)(n.h2,{id:"database-setup",children:"Database Setup"}),"\n",(0,r.jsx)(n.h3,{id:"mongodb",children:"MongoDB"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Initialize replica set\nmongosh --eval "rs.initiate()"\n\n# Create indexes\nmongosh hcmc_traffic --eval "\n  db.cameras.createIndex({location: \'2dsphere\'});\n  db.accidents.createIndex({timestamp: -1});\n  db.traffic_flow.createIndex({camera_id: 1, timestamp: -1});\n"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"fuseki",children:"Fuseki"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Create dataset\ncurl -X POST http://fuseki:3030/$/datasets \\\n  -d "dbName=hcmc-traffic" \\\n  -d "dbType=tdb2"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"monitoring-setup",children:"Monitoring Setup"}),"\n",(0,r.jsx)(n.h3,{id:"prometheus",children:"Prometheus"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# prometheus-config.yaml\nglobal:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: 'backend'\n    static_configs:\n      - targets: ['backend:8000']\n"})}),"\n",(0,r.jsx)(n.h3,{id:"grafana",children:"Grafana"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Import dashboard\ncurl -X POST http://grafana:3000/api/dashboards/db \\\\\n  -H \\"Content-Type: application/json\\" \\\\\n  -d @config/grafana_dashboard.json\n'})}),"\n",(0,r.jsx)(n.h2,{id:"ssltls-configuration-for-kubernetes",children:"SSL/TLS Configuration for Kubernetes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Install cert-manager\nkubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.13.0/cert-manager.yaml\n\n# Create ClusterIssuer\nkubectl apply -f - <<EOF\napiVersion: cert-manager.io/v1\nkind: ClusterIssuer\nmetadata:\n  name: letsencrypt-prod\nspec:\n  acme:\n    server: https://acme-v02.api.letsencrypt.org/directory\n    email: admin@example.com\n    privateKeySecretRef:\n      name: letsencrypt-prod\n    solvers:\n    - http01:\n        ingress:\n          class: nginx\nEOF\n"})}),"\n",(0,r.jsx)(n.h2,{id:"backup-strategy",children:"Backup Strategy"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# MongoDB backup\nmongodump --uri="mongodb://mongo:27017/hcmc_traffic" --out=/backup\n\n# Fuseki backup\ncurl -X POST http://fuseki:3030/$/backup/hcmc-traffic\n'})}),"\n",(0,r.jsx)(n.h2,{id:"scaling",children:"Scaling"}),"\n",(0,r.jsx)(n.h3,{id:"horizontal-pod-autoscaling",children:"Horizontal Pod Autoscaling"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: backend-hpa\n  namespace: hcmc-traffic\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: backend\n  minReplicas: 3\n  maxReplicas: 10\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70\n"})}),"\n",(0,r.jsx)(n.h2,{id:"health-checks",children:"Health Checks"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Backend health endpoint\n@app.route(\'/health\')\ndef health_check():\n    return {\n        "status": "healthy",\n        "timestamp": datetime.utcnow().isoformat(),\n        "services": {\n            "mongo": check_mongo_connection(),\n            "redis": check_redis_connection(),\n            "stellio": check_stellio_connection()\n        }\n    }\n'})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"check-logs",children:"Check Logs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Pod logs\nkubectl logs -f deployment/backend -n hcmc-traffic\n\n# Docker logs\ndocker-compose logs -f backend\n"})}),"\n",(0,r.jsx)(n.h3,{id:"debug-connection-issues",children:"Debug Connection Issues"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Test MongoDB\nmongosh mongodb://mongo:27017/hcmc_traffic\n\n# Test Redis\nredis-cli -h redis ping\n\n# Test Stellio\ncurl http://stellio:8080/ngsi-ld/v1/entities\n"})}),"\n",(0,r.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/tes/vi/docs/architecture/overview",children:"Architecture Overview"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"./monitoring.md",children:"Monitoring Guide"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"./security.md",children:"Security Best Practices"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,r.jsx)(n.p,{children:"MIT License - Copyright (c) 2025 UIP Contributors (Nguy\u1ec5n Nh\u1eadt Quang, Nguy\u1ec5n Vi\u1ec7t Ho\xe0ng, Nguy\u1ec5n \u0110\xecnh Anh Tu\u1ea5n)"})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>c});var s=a(6540);const r={},t=s.createContext(r);function i(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);