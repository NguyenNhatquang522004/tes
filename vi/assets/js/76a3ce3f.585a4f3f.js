"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[5483],{931:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"backend/agents/EcoTwinAgent","title":"EcoTwin Agent","description":"Environmental health advisor with AQI dispersion modeling and personalized recommendations","source":"@site/docs/backend/agents/EcoTwinAgent.md","sourceDirName":"backend/agents","slug":"/backend/agents/EcoTwinAgent","permalink":"/tes/vi/docs/backend/agents/EcoTwinAgent","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/backend/agents/EcoTwinAgent.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"EcoTwin Agent","description":"Environmental health advisor with AQI dispersion modeling and personalized recommendations"}}');var t=i(4848),s=i(8453);const a={sidebar_position:1,title:"EcoTwin Agent",description:"Environmental health advisor with AQI dispersion modeling and personalized recommendations"},l="EcoTwin Agent",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Core Capabilities",id:"core-capabilities",level:2},{value:"1. Air Quality Dispersion Simulation",id:"1-air-quality-dispersion-simulation",level:3},{value:"2. Personalized Health Advice (Gemini Pro AI)",id:"2-personalized-health-advice-gemini-pro-ai",level:3},{value:"3. Environmental Forecast Publishing",id:"3-environmental-forecast-publishing",level:3},{value:"4. Citizen Report Integration",id:"4-citizen-report-integration",level:3},{value:"API",id:"api",level:2},{value:"generateHealthAdvice",id:"generatehealthadvice",level:3},{value:"getDispersionForecast",id:"getdispersionforecast",level:3},{value:"AQI Categories",id:"aqi-categories",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Usage Example",id:"usage-example",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:["\n",(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"ecotwin-agent",children:"EcoTwin Agent"})}),"\n",(0,t.jsx)(n.p,{children:"AI-powered environmental health advisor providing personalized recommendations based on real-time air quality, weather forecasts, and predictive dispersion modeling."}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The EcoTwin Agent acts as a digital twin for urban environmental health monitoring, combining:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Gaussian plume dispersion modeling for pollutant spread prediction"}),"\n",(0,t.jsx)(n.li,{children:"Google Gemini AI for personalized health advice"}),"\n",(0,t.jsx)(n.li,{children:"NGSI-LD entity generation for real-time visualization"}),"\n",(0,t.jsx)(n.li,{children:"Citizen report integration for crowdsourced validation"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mermaid",children:"graph TD\r\n    A[EcoTwin Agent] --\x3e B[Air Quality Data]\r\n    A --\x3e C[Weather Data]\r\n    A --\x3e D[User Profile]\r\n    A --\x3e E[Gemini AI]\r\n    \r\n    B --\x3e F[Dispersion Model]\r\n    C --\x3e F\r\n    \r\n    F --\x3e G[AQI Forecast]\r\n    \r\n    D --\x3e E\r\n    G --\x3e E\r\n    \r\n    E --\x3e H[Health Recommendations]\r\n    E --\x3e I[Activity Suggestions]\r\n    E --\x3e J[Protective Measures]\r\n    \r\n    H --\x3e K[NGSI-LD Entity]\r\n    I --\x3e K\r\n    J --\x3e K\r\n    \r\n    K --\x3e L[Stellio Context Broker]\n"})}),"\n",(0,t.jsx)(n.h2,{id:"core-capabilities",children:"Core Capabilities"}),"\n",(0,t.jsx)(n.h3,{id:"1-air-quality-dispersion-simulation",children:"1. Air Quality Dispersion Simulation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Gaussian plume model for pollutant dispersion"}),"\n",(0,t.jsx)(n.li,{children:"Wind direction and speed integration"}),"\n",(0,t.jsx)(n.li,{children:"Temperature inversion layer detection"}),"\n",(0,t.jsx)(n.li,{children:"Multi-pollutant tracking (PM2.5, PM10, NO2, O3, CO, SO2)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-personalized-health-advice-gemini-pro-ai",children:"2. Personalized Health Advice (Gemini Pro AI)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Vulnerable population profiling (elderly, children, asthmatics)"}),"\n",(0,t.jsx)(n.li,{children:"Activity recommendations (outdoor exercise, window opening)"}),"\n",(0,t.jsx)(n.li,{children:"Protective measure suggestions (masks, air purifiers)"}),"\n",(0,t.jsx)(n.li,{children:"Natural language explanations in Vietnamese and English"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-environmental-forecast-publishing",children:"3. Environmental Forecast Publishing"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Future AQI predictions (1-6 hours ahead)"}),"\n",(0,t.jsx)(n.li,{children:"NGSI-LD entity generation for visualization"}),"\n",(0,t.jsx)(n.li,{children:"Historical trend analysis"}),"\n",(0,t.jsx)(n.li,{children:"Confidence scoring"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"4-citizen-report-integration",children:"4. Citizen Report Integration"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"User-submitted health symptoms correlation"}),"\n",(0,t.jsx)(n.li,{children:"Crowdsourced air quality validation"}),"\n",(0,t.jsx)(n.li,{children:"Community health alerts"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,t.jsx)(n.h3,{id:"generatehealthadvice",children:"generateHealthAdvice"}),"\n",(0,t.jsx)(n.p,{children:"Generate personalized health recommendations based on location and user profile."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface HealthAdviceRequest {\r\n    location: { lat: number; lon: number };\r\n    userProfile: {\r\n        age: number;\r\n        conditions: string[];  // e.g., ['asthma', 'heart_disease']\r\n        activities: string[];  // e.g., ['outdoor_exercise', 'commute']\r\n    };\r\n    timeHorizon: number;  // hours (1-6)\r\n}\r\n\r\ninterface HealthAdviceResponse {\r\n    recommendations: string[];\r\n    aqiForecast: {\r\n        current: number;\r\n        predicted: number[];\r\n        confidence: number;\r\n    };\r\n    riskLevel: 'low' | 'moderate' | 'high' | 'very_high';\r\n    protectiveMeasures: string[];\r\n    aiExplanation: string;\r\n}\r\n\r\nconst advice = await ecoTwin.generateHealthAdvice(request);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getdispersionforecast",children:"getDispersionForecast"}),"\n",(0,t.jsx)(n.p,{children:"Calculate pollutant dispersion based on current conditions."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface DispersionRequest {\r\n    sourceLocation: { lat: number; lon: number };\r\n    pollutant: 'pm25' | 'pm10' | 'no2' | 'o3' | 'co' | 'so2';\r\n    windSpeed: number;\r\n    windDirection: number;  // degrees\r\n    atmosphericStability: 'A' | 'B' | 'C' | 'D' | 'E' | 'F';\r\n}\r\n\r\nconst forecast = await ecoTwin.getDispersionForecast(request);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"aqi-categories",children:"AQI Categories"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"AQI Range"}),(0,t.jsx)(n.th,{children:"Category"}),(0,t.jsx)(n.th,{children:"Health Implications"}),(0,t.jsx)(n.th,{children:"Color"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"0-50"}),(0,t.jsx)(n.td,{children:"Good"}),(0,t.jsx)(n.td,{children:"Satisfactory air quality"}),(0,t.jsx)(n.td,{children:"Green"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"51-100"}),(0,t.jsx)(n.td,{children:"Moderate"}),(0,t.jsx)(n.td,{children:"Acceptable for most"}),(0,t.jsx)(n.td,{children:"Yellow"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"101-150"}),(0,t.jsx)(n.td,{children:"Unhealthy for Sensitive"}),(0,t.jsx)(n.td,{children:"Risk for sensitive groups"}),(0,t.jsx)(n.td,{children:"Orange"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"151-200"}),(0,t.jsx)(n.td,{children:"Unhealthy"}),(0,t.jsx)(n.td,{children:"Health effects for everyone"}),(0,t.jsx)(n.td,{children:"Red"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"201-300"}),(0,t.jsx)(n.td,{children:"Very Unhealthy"}),(0,t.jsx)(n.td,{children:"Health warnings"}),(0,t.jsx)(n.td,{children:"Purple"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"301-500"}),(0,t.jsx)(n.td,{children:"Hazardous"}),(0,t.jsx)(n.td,{children:"Emergency conditions"}),(0,t.jsx)(n.td,{children:"Maroon"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Located at ",(0,t.jsx)(n.code,{children:"config/agents/eco-twin.yaml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"agent:\r\n  name: EcoTwin\r\n  version: 3.0.0\r\n  description: Environmental Health Digital Twin\r\n\r\ndispersion:\r\n  model: gaussian_plume\r\n  gridSize: 100  # meters\r\n  predictionHorizon: 6  # hours\r\n\r\nai:\r\n  model: gemini-1.5-flash\r\n  temperature: 0.7\r\n  maxTokens: 2000\r\n  languages: [vi, en]\r\n\r\ncaching:\r\n  enabled: true\r\n  ttl: 300  # 5 minutes\n"})}),"\n",(0,t.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@google/generative-ai@^0.21.0"}),": Gemini Pro AI SDK"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"axios@^1.6"}),": HTTP client for Stellio API"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"js-yaml@^4.1"}),": Configuration file parsing"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { EcoTwinAgent } from './agents/EcoTwinAgent';\r\n\r\nconst ecoTwin = new EcoTwinAgent();\r\n\r\n// Generate health advice for elderly person with asthma\r\nconst advice = await ecoTwin.generateHealthAdvice({\r\n    location: { lat: 10.8231, lon: 106.6297 },\r\n    userProfile: {\r\n        age: 65,\r\n        conditions: ['asthma'],\r\n        activities: ['morning_walk']\r\n    },\r\n    timeHorizon: 6\r\n});\r\n\r\nconsole.log(advice.recommendations);\r\n// [\"Avoid outdoor exercise before 10 AM due to elevated PM2.5\",\r\n//  \"Wear N95 mask if going outside\",\r\n//  \"Run air purifier on high setting\"]\r\n\r\nconsole.log(advice.aqiForecast.predicted);\r\n// [125, 118, 105, 95, 88, 82]  // Next 6 hours\n"})}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/tes/vi/docs/backend/agents/GraphInvestigatorAgent",children:"GraphInvestigator Agent"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/tes/vi/docs/backend/agents/TrafficMaestroAgent",children:"TrafficMaestro Agent"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"../routes/airQualityRoutes.md",children:"Air Quality Routes"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/tes/vi/docs/backend/services/stellio-service",children:"Stellio Service"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var r=i(6540);const t={},s=r.createContext(t);function a(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);