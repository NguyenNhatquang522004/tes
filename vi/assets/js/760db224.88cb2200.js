"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[9290],{862:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>o,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"agents/cache/cache-manager","title":"cache-manager","description":"\x3c!--","source":"@site/docs/agents/cache/cache-manager.md","sourceDirName":"agents/cache","slug":"/agents/cache/cache-manager","permalink":"/tes/vi/docs/agents/cache/cache-manager","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/cache/cache-manager.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"temporal-state-tracker","permalink":"/tes/vi/docs/agents/state-management/temporal-state-tracker"},"next":{"title":"cache-invalidator","permalink":"/tes/vi/docs/agents/cache/cache-invalidator"}}');var i=a(4848),t=a(8453);const c={sidebar_position:1},s="Cache Manager Agent",l={},d=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\ud83c\udfaf Purpose",id:"-purpose",level:2},{value:"\ud83d\udd27 Cache Strategies",id:"-cache-strategies",level:2},{value:"Write-Through",id:"write-through",level:3},{value:"Write-Behind (Async)",id:"write-behind-async",level:3},{value:"Cache-Aside (Lazy Loading)",id:"cache-aside-lazy-loading",level:3},{value:"\ud83d\udcca Architecture",id:"-architecture",level:2},{value:"\ud83d\ude80 Usage",id:"-usage",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Cache Key Patterns",id:"cache-key-patterns",level:3},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:2},{value:"Environment Variables",id:"environment-variables",level:3},{value:"YAML Configuration",id:"yaml-configuration",level:3},{value:"\ud83d\udcc8 Performance Metrics",id:"-performance-metrics",level:2},{value:"\ud83d\udd04 Cache Invalidation",id:"-cache-invalidation",level:2},{value:"Manual Invalidation",id:"manual-invalidation",level:3},{value:"Automatic Invalidation",id:"automatic-invalidation",level:3},{value:"\ud83d\udee1\ufe0f Fallback Behavior",id:"\ufe0f-fallback-behavior",level:2},{value:"\ud83d\udcd6 Related Documentation",id:"-related-documentation",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"cache-manager-agent",children:"Cache Manager Agent"})}),"\n",(0,i.jsx)(n.p,{children:"The Cache Manager Agent provides distributed caching with Redis backend for improved performance across the UIP platform."}),"\n",(0,i.jsx)(n.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Property"}),(0,i.jsx)(n.th,{children:"Value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Module"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"src.agents.cache.cache_manager_agent"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Class"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"CacheManagerAgent"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Author"})}),(0,i.jsx)(n.td,{children:"Nguyen Viet Hoang"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Version"})}),(0,i.jsx)(n.td,{children:"1.0.0"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"-purpose",children:"\ud83c\udfaf Purpose"}),"\n",(0,i.jsx)(n.p,{children:"The Cache Manager Agent manages distributed caching to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reduce database load"})," by caching frequently accessed data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Improve response times"})," for API requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable horizontal scaling"})," with shared cache state"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Implement cache invalidation"})," strategies"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-cache-strategies",children:"\ud83d\udd27 Cache Strategies"}),"\n",(0,i.jsx)(n.h3,{id:"write-through",children:"Write-Through"}),"\n",(0,i.jsx)(n.p,{children:"Updates cache immediately when data is written to the database."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Data written to DB and cache simultaneously\r\ncache_manager.set("camera:CAM_001", camera_data, ttl=3600)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"write-behind-async",children:"Write-Behind (Async)"}),"\n",(0,i.jsx)(n.p,{children:"Asynchronous cache updates for better write performance."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Queue cache update for async processing\r\ncache_manager.set_async("observations:latest", observations)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cache-aside-lazy-loading",children:"Cache-Aside (Lazy Loading)"}),"\n",(0,i.jsx)(n.p,{children:"Load data into cache only on cache miss."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Check cache first, load from DB on miss\r\ndata = cache_manager.get_or_load("pattern:P001", loader_func)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"-architecture",children:"\ud83d\udcca Architecture"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502   API Request   \u2502\u2500\u2500\u2500\u25b6\u2502  Cache Manager  \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                                \u2502\r\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                    \u25bc           \u25bc           \u25bc\r\n             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n             \u2502  Redis   \u2502 \u2502  Local   \u2502 \u2502 Database \u2502\r\n             \u2502  Cache   \u2502 \u2502  Cache   \u2502 \u2502 Fallback \u2502\r\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-usage",children:"\ud83d\ude80 Usage"}),"\n",(0,i.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from src.agents.cache.cache_manager_agent import CacheManagerAgent\r\n\r\n# Initialize with configuration\r\nconfig = {\r\n    "enabled": True,\r\n    "redis_host": "localhost",\r\n    "redis_port": 6379,\r\n    "default_ttl": 3600\r\n}\r\ncache_manager = CacheManagerAgent(config)\r\n\r\n# Set value\r\ncache_manager.set("key", {"data": "value"}, ttl=300)\r\n\r\n# Get value\r\nvalue = cache_manager.get("key")\r\n\r\n# Delete value\r\ncache_manager.delete("key")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cache-key-patterns",children:"Cache Key Patterns"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Entity caching\r\ncache_manager.set("camera:CAM_001", camera_entity)\r\ncache_manager.set("observation:OBS_001", observation)\r\n\r\n# Query result caching\r\ncache_manager.set("query:accidents:severe", results, ttl=60)\r\n\r\n# Aggregation caching\r\ncache_manager.set("stats:hourly:2025-01-15T10", hourly_stats)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"REDIS_HOST=localhost\r\nREDIS_PORT=6379\r\nREDIS_PASSWORD=your_password\r\nREDIS_DB=1\n"})}),"\n",(0,i.jsx)(n.h3,{id:"yaml-configuration",children:"YAML Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# config/cache_config.yaml\r\ncache:\r\n  enabled: true\r\n  redis_host: localhost\r\n  redis_port: 6379\r\n  redis_db: 1\r\n  default_ttl: 3600\r\n  \r\n  # TTL by category\r\n  ttl_settings:\r\n    cameras: 300\r\n    observations: 60\r\n    patterns: 600\r\n    statistics: 3600\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-performance-metrics",children:"\ud83d\udcc8 Performance Metrics"}),"\n",(0,i.jsx)(n.p,{children:"The Cache Manager tracks:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Hit Rate"}),": Percentage of successful cache hits"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Miss Rate"}),": Percentage of cache misses"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Latency"}),": Average cache operation latency"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Memory Usage"}),": Redis memory consumption"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-cache-invalidation",children:"\ud83d\udd04 Cache Invalidation"}),"\n",(0,i.jsx)(n.h3,{id:"manual-invalidation",children:"Manual Invalidation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Invalidate single key\r\ncache_manager.delete("camera:CAM_001")\r\n\r\n# Invalidate by pattern\r\ncache_manager.delete_pattern("camera:*")\r\n\r\n# Clear all cache\r\ncache_manager.flush()\n'})}),"\n",(0,i.jsx)(n.h3,{id:"automatic-invalidation",children:"Automatic Invalidation"}),"\n",(0,i.jsx)(n.p,{children:"TTL-based expiration ensures stale data is automatically removed."}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-fallback-behavior",children:"\ud83d\udee1\ufe0f Fallback Behavior"}),"\n",(0,i.jsx)(n.p,{children:"When Redis is unavailable, the agent falls back to:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"In-memory cache"})," for local operations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Direct database queries"})," for critical data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Graceful degradation"})," without errors"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-related-documentation",children:"\ud83d\udcd6 Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"cache-invalidator",children:"Cache Invalidator Agent"})," - Cache invalidation strategies"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../monitoring/performance-monitor",children:"Performance Monitor"})," - Cache performance tracking"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../../installation/environment-config",children:"Redis Configuration"})," - Redis setup"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.a,{href:"../complete-agents-reference",children:"complete agents reference"})," for all available agents."]})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>c,x:()=>s});var r=a(6540);const i={},t=r.createContext(i);function c(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);