"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[7940],{8201:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"agents/data-collection/weather-integration","title":"weather-integration","description":"\x3c!--","source":"@site/docs/agents/data-collection/weather-integration.md","sourceDirName":"agents/data-collection","slug":"/agents/data-collection/weather-integration","permalink":"/tes/vi/docs/agents/data-collection/weather-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/data-collection/weather-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"camera-image-fetch","permalink":"/tes/vi/docs/agents/data-collection/camera-image-fetch"},"next":{"title":"air-quality","permalink":"/tes/vi/docs/agents/data-collection/air-quality"}}');var a=n(4848),i=n(8453);const s={},l="Weather Integration Agent",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Usage",id:"usage",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Weather Forecasting",id:"weather-forecasting",level:3},{value:"Severe Weather Monitoring",id:"severe-weather-monitoring",level:3},{value:"Weather-Traffic Correlation",id:"weather-traffic-correlation",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Class: <code>WeatherIntegrationAgent</code>",id:"class-weatherintegrationagent",level:3},{value:"Methods",id:"methods",level:4},{value:"<code>get_current_weather(lat: float, lon: float) -&gt; WeatherData</code>",id:"get_current_weatherlat-float-lon-float---weatherdata",level:5},{value:"<code>get_hourly_forecast(lat: float, lon: float, hours: int = 24) -&gt; List[HourlyWeather]</code>",id:"get_hourly_forecastlat-float-lon-float-hours-int--24---listhourlyweather",level:5},{value:"<code>get_severe_weather_alerts(location: str) -&gt; List[WeatherAlert]</code>",id:"get_severe_weather_alertslocation-str---listweatheralert",level:5},{value:"<code>analyze_weather_traffic_impact(date_range: Tuple[str, str], location: str) -&gt; CorrelationAnalysis</code>",id:"analyze_weather_traffic_impactdate_range-tuplestr-str-location-str---correlationanalysis",level:5},{value:"Data Models",id:"data-models",level:3},{value:"<code>WeatherData</code>",id:"weatherdata",level:4},{value:"<code>WeatherAlert</code>",id:"weatheralert",level:4},{value:"<code>CorrelationAnalysis</code>",id:"correlationanalysis",level:4},{value:"Weather-Traffic Rules",id:"weather-traffic-rules",level:2},{value:"Impact Matrix",id:"impact-matrix",level:3},{value:"Traffic Recommendations",id:"traffic-recommendations",level:3},{value:"Integration Examples",id:"integration-examples",level:2},{value:"Integration with Accident Detection",id:"integration-with-accident-detection",level:3},{value:"Integration with Pattern Recognition",id:"integration-with-pattern-recognition",level:3},{value:"Monitoring &amp; Alerts",id:"monitoring--alerts",level:2},{value:"Health Check",id:"health-check",level:3},{value:"Alert System",id:"alert-system",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Caching Strategy",id:"caching-strategy",level:3},{value:"Batch Processing",id:"batch-processing",level:3},{value:"Testing",id:"testing",level:2},{value:"Unit Tests",id:"unit-tests",level:3},{value:"Integration Tests",id:"integration-tests",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. API Key Management",id:"1-api-key-management",level:3},{value:"2. Rate Limiting",id:"2-rate-limiting",level:3},{value:"3. Error Handling",id:"3-error-handling",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: API Rate Limit Exceeded",id:"issue-api-rate-limit-exceeded",level:3},{value:"Issue: Inaccurate Weather Data",id:"issue-inaccurate-weather-data",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"License",id:"license",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"weather-integration-agent",children:"Weather Integration Agent"})}),"\n",(0,a.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(t.p,{children:"The Weather Integration Agent integrates real-time weather data from multiple sources to enhance traffic predictions and provide context for traffic conditions. It correlates weather patterns with traffic incidents and congestion."}),"\n",(0,a.jsx)(t.h2,{id:"features",children:"Features"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Multi-Source Integration"}),": OpenWeatherMap, AccuWeather, local weather stations"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Real-time Updates"}),": Weather data refresh every 5 minutes"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Historical Data"}),": Weather pattern analysis for predictive modeling"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Severe Weather Alerts"}),": Automatic notification system for extreme conditions"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Weather-Traffic Correlation"}),": Link weather conditions to traffic patterns"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Air Quality Integration"}),": Combined weather and air quality metrics"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"architecture",children:"Architecture"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-mermaid",children:"graph TB\n    A[OpenWeatherMap API] --\x3e D[Weather Agent]\n    B[AccuWeather API] --\x3e D\n    C[Local Stations] --\x3e D\n    D --\x3e E[Data Normalizer]\n    E --\x3e F[Weather Cache]\n    E --\x3e G[MongoDB Storage]\n    F --\x3e H[Traffic Correlation]\n    G --\x3e H\n    H --\x3e I[Pattern Recognition]\n"})}),"\n",(0,a.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"File"}),": ",(0,a.jsx)(t.code,{children:"config/data_sources.yaml"})]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yaml",children:'weather_sources:\n  openweathermap:\n    api_key: "${OPENWEATHER_API_KEY}"\n    base_url: "https://api.openweathermap.org/data/2.5"\n    endpoints:\n      current: "/weather"\n      forecast: "/forecast"\n      onecall: "/onecall"\n    units: "metric"\n    language: "vi"\n    \n  update_intervals:\n    current_weather: 300      # 5 minutes\n    hourly_forecast: 3600     # 1 hour\n    daily_forecast: 21600     # 6 hours\n    severe_alerts: 60         # 1 minute\n    \n  locations:\n    - name: "District 1"\n      lat: 10.7769\n      lon: 106.7009\n    - name: "Tan Son Nhat Airport"\n      lat: 10.8184\n      lon: 106.6520\n      \n  thresholds:\n    heavy_rain_mm: 50\n    strong_wind_kmh: 40\n    high_temperature_c: 35\n    low_visibility_m: 1000\n'})}),"\n",(0,a.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(t.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from src.agents.data_collection.weather_integration_agent import WeatherIntegrationAgent\n\n# Initialize agent\nagent = WeatherIntegrationAgent()\n\n# Get current weather for HCMC\nweather = agent.get_current_weather(\n    lat=10.8231,\n    lon=106.6297\n)\n\nprint(f"Temperature: {weather.temperature}\xb0C")\nprint(f"Humidity: {weather.humidity}%")\nprint(f"Conditions: {weather.description}")\n'})}),"\n",(0,a.jsx)(t.h3,{id:"weather-forecasting",children:"Weather Forecasting"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'# Get hourly forecast\nhourly_forecast = agent.get_hourly_forecast(\n    lat=10.8231,\n    lon=106.6297,\n    hours=24\n)\n\nfor hour in hourly_forecast:\n    print(f"{hour.timestamp}: {hour.temperature}\xb0C, {hour.rain_probability}%")\n\n# Get daily forecast\ndaily_forecast = agent.get_daily_forecast(\n    lat=10.8231,\n    lon=106.6297,\n    days=7\n)\n'})}),"\n",(0,a.jsx)(t.h3,{id:"severe-weather-monitoring",children:"Severe Weather Monitoring"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'# Check for severe weather alerts\nalerts = agent.get_severe_weather_alerts(location="HCMC")\n\nfor alert in alerts:\n    print(f"Alert: {alert.type}")\n    print(f"Severity: {alert.severity}")\n    print(f"Start: {alert.start_time}")\n    print(f"End: {alert.end_time}")\n    print(f"Description: {alert.description}")\n'})}),"\n",(0,a.jsx)(t.h3,{id:"weather-traffic-correlation",children:"Weather-Traffic Correlation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'# Analyze weather impact on traffic\ncorrelation = agent.analyze_weather_traffic_impact(\n    date_range=("2024-01-01", "2024-01-31"),\n    location="District 1"\n)\n\nprint(f"Rain Impact: {correlation.rain_congestion_correlation}")\nprint(f"Temperature Impact: {correlation.temperature_speed_correlation}")\nprint(f"Peak Impact Hours: {correlation.peak_impact_hours}")\n'})}),"\n",(0,a.jsx)(t.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,a.jsxs)(t.h3,{id:"class-weatherintegrationagent",children:["Class: ",(0,a.jsx)(t.code,{children:"WeatherIntegrationAgent"})]}),"\n",(0,a.jsx)(t.h4,{id:"methods",children:"Methods"}),"\n",(0,a.jsx)(t.h5,{id:"get_current_weatherlat-float-lon-float---weatherdata",children:(0,a.jsx)(t.code,{children:"get_current_weather(lat: float, lon: float) -> WeatherData"})}),"\n",(0,a.jsx)(t.p,{children:"Get current weather conditions for specific coordinates."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"lat"})," (float): Latitude"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"lon"})," (float): Longitude"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"WeatherData: Current weather information"}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Example:"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"weather = agent.get_current_weather(lat=10.8231, lon=106.6297)\n"})}),"\n",(0,a.jsx)(t.h5,{id:"get_hourly_forecastlat-float-lon-float-hours-int--24---listhourlyweather",children:(0,a.jsx)(t.code,{children:"get_hourly_forecast(lat: float, lon: float, hours: int = 24) -> List[HourlyWeather]"})}),"\n",(0,a.jsx)(t.p,{children:"Get hourly weather forecast."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"lat"})," (float): Latitude"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"lon"})," (float): Longitude"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"hours"})," (int): Number of hours to forecast (default: 24)"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"List[HourlyWeather]: List of hourly weather predictions"}),"\n"]}),"\n",(0,a.jsx)(t.h5,{id:"get_severe_weather_alertslocation-str---listweatheralert",children:(0,a.jsx)(t.code,{children:"get_severe_weather_alerts(location: str) -> List[WeatherAlert]"})}),"\n",(0,a.jsx)(t.p,{children:"Get active severe weather alerts."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"location"})," (str): Location name or code"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"List[WeatherAlert]: List of active weather alerts"}),"\n"]}),"\n",(0,a.jsx)(t.h5,{id:"analyze_weather_traffic_impactdate_range-tuplestr-str-location-str---correlationanalysis",children:(0,a.jsx)(t.code,{children:"analyze_weather_traffic_impact(date_range: Tuple[str, str], location: str) -> CorrelationAnalysis"})}),"\n",(0,a.jsx)(t.p,{children:"Analyze correlation between weather and traffic patterns."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"date_range"}),' (Tuple[str, str]): Date range in format "YYYY-MM-DD"']}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"location"})," (str): Location identifier"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"CorrelationAnalysis: Statistical correlation data"}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"data-models",children:"Data Models"}),"\n",(0,a.jsx)(t.h4,{id:"weatherdata",children:(0,a.jsx)(t.code,{children:"WeatherData"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"@dataclass\nclass WeatherData:\n    timestamp: datetime\n    location: dict\n    temperature: float      # Celsius\n    feels_like: float      # Celsius\n    humidity: int          # Percentage\n    pressure: int          # hPa\n    wind_speed: float      # km/h\n    wind_direction: int    # Degrees\n    clouds: int            # Percentage\n    visibility: int        # Meters\n    rain_1h: float        # mm\n    rain_3h: float        # mm\n    description: str\n    icon: str\n"})}),"\n",(0,a.jsx)(t.h4,{id:"weatheralert",children:(0,a.jsx)(t.code,{children:"WeatherAlert"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"@dataclass\nclass WeatherAlert:\n    alert_id: str\n    type: str              # storm, rain, heat, wind\n    severity: str          # minor, moderate, severe, extreme\n    start_time: datetime\n    end_time: datetime\n    location: str\n    description: str\n    instructions: str\n    affected_areas: List[str]\n"})}),"\n",(0,a.jsx)(t.h4,{id:"correlationanalysis",children:(0,a.jsx)(t.code,{children:"CorrelationAnalysis"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"@dataclass\nclass CorrelationAnalysis:\n    rain_congestion_correlation: float\n    temperature_speed_correlation: float\n    visibility_accident_correlation: float\n    peak_impact_hours: List[int]\n    weather_patterns: dict\n    recommendations: List[str]\n"})}),"\n",(0,a.jsx)(t.h2,{id:"weather-traffic-rules",children:"Weather-Traffic Rules"}),"\n",(0,a.jsx)(t.h3,{id:"impact-matrix",children:"Impact Matrix"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Weather Condition"}),(0,a.jsx)(t.th,{children:"Traffic Impact"}),(0,a.jsx)(t.th,{children:"Speed Reduction"}),(0,a.jsx)(t.th,{children:"Accident Risk"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Heavy Rain (>50mm)"}),(0,a.jsx)(t.td,{children:"High"}),(0,a.jsx)(t.td,{children:"30-40%"}),(0,a.jsx)(t.td,{children:"+150%"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Moderate Rain (20-50mm)"}),(0,a.jsx)(t.td,{children:"Medium"}),(0,a.jsx)(t.td,{children:"15-25%"}),(0,a.jsx)(t.td,{children:"+75%"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Light Rain (<20mm)"}),(0,a.jsx)(t.td,{children:"Low"}),(0,a.jsx)(t.td,{children:"5-10%"}),(0,a.jsx)(t.td,{children:"+25%"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Strong Wind (>40km/h)"}),(0,a.jsx)(t.td,{children:"Medium"}),(0,a.jsx)(t.td,{children:"10-20%"}),(0,a.jsx)(t.td,{children:"+50%"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"High Temp (>35\xb0C)"}),(0,a.jsx)(t.td,{children:"Low"}),(0,a.jsx)(t.td,{children:"5-10%"}),(0,a.jsx)(t.td,{children:"+15%"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Low Visibility (<1000m)"}),(0,a.jsx)(t.td,{children:"High"}),(0,a.jsx)(t.td,{children:"25-35%"}),(0,a.jsx)(t.td,{children:"+100%"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Thunderstorm"}),(0,a.jsx)(t.td,{children:"Very High"}),(0,a.jsx)(t.td,{children:"40-50%"}),(0,a.jsx)(t.td,{children:"+200%"})]})]})]}),"\n",(0,a.jsx)(t.h3,{id:"traffic-recommendations",children:"Traffic Recommendations"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'# Get traffic recommendations based on weather\nrecommendations = agent.get_traffic_recommendations(\n    current_weather=weather_data\n)\n\n# Example output:\n# [\n#   "Heavy rain detected: Expect 30% speed reduction",\n#   "Visibility below 1km: High accident risk on highways",\n#   "Recommend alternate routes avoiding flood-prone areas",\n#   "Suggest delayed departure by 2 hours for safer travel"\n# ]\n'})}),"\n",(0,a.jsx)(t.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,a.jsx)(t.h3,{id:"integration-with-accident-detection",children:"Integration with Accident Detection"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from src.agents.analytics.accident_detection_agent import AccidentDetectionAgent\n\n# Enhance accident detection with weather context\nweather_agent = WeatherIntegrationAgent()\naccident_agent = AccidentDetectionAgent()\n\n# Get current weather\nweather = weather_agent.get_current_weather(lat=10.8231, lon=106.6297)\n\n# Adjust accident detection sensitivity based on weather\nif weather.rain_1h > 50:  # Heavy rain\n    accident_agent.set_sensitivity(level="high")\nelif weather.visibility < 1000:  # Low visibility\n    accident_agent.set_sensitivity(level="high")\nelse:\n    accident_agent.set_sensitivity(level="normal")\n'})}),"\n",(0,a.jsx)(t.h3,{id:"integration-with-pattern-recognition",children:"Integration with Pattern Recognition"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from src.agents.analytics.pattern_recognition_agent import PatternRecognitionAgent\n\npattern_agent = PatternRecognitionAgent()\nweather_agent = WeatherIntegrationAgent()\n\n# Analyze patterns with weather context\npatterns = pattern_agent.detect_patterns(\n    time_range="7d",\n    include_weather=True,\n    weather_source=weather_agent\n)\n\nfor pattern in patterns:\n    print(f"Pattern: {pattern.type}")\n    print(f"Weather Conditions: {pattern.weather_context}")\n    print(f"Confidence: {pattern.confidence}")\n'})}),"\n",(0,a.jsx)(t.h2,{id:"monitoring--alerts",children:"Monitoring & Alerts"}),"\n",(0,a.jsx)(t.h3,{id:"health-check",children:"Health Check"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'health = agent.health_check()\nprint(f"Status: {health.status}")\nprint(f"API Response Time: {health.api_response_time}ms")\nprint(f"Data Freshness: {health.data_age_seconds}s")\nprint(f"Cache Hit Rate: {health.cache_hit_rate}%")\n'})}),"\n",(0,a.jsx)(t.h3,{id:"alert-system",children:"Alert System"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'# Configure alert thresholds\nagent.configure_alerts(\n    temperature_threshold=38,\n    rain_threshold=60,\n    wind_threshold=50,\n    alert_callback=send_notification\n)\n\n# Alert callback function\ndef send_notification(alert: WeatherAlert):\n    print(f"ALERT: {alert.type} - {alert.severity}")\n    # Send to notification system\n'})}),"\n",(0,a.jsx)(t.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,a.jsx)(t.h3,{id:"caching-strategy",children:"Caching Strategy"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"# Configure multi-level caching\nagent.configure_cache(\n    current_weather_ttl=300,    # 5 minutes\n    forecast_ttl=3600,          # 1 hour\n    historical_ttl=86400,       # 24 hours\n    max_cache_size_mb=100\n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"batch-processing",children:"Batch Processing"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'# Fetch weather for multiple locations efficiently\nlocations = [\n    {"lat": 10.7769, "lon": 106.7009},\n    {"lat": 10.8231, "lon": 106.6297},\n    {"lat": 10.8184, "lon": 106.6520}\n]\n\nweather_data = agent.batch_fetch_weather(\n    locations=locations,\n    parallel=True,\n    max_workers=5\n)\n'})}),"\n",(0,a.jsx)(t.h2,{id:"testing",children:"Testing"}),"\n",(0,a.jsx)(t.h3,{id:"unit-tests",children:"Unit Tests"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"import pytest\nfrom unittest.mock import Mock, patch\n\ndef test_get_current_weather(mock_openweather_api):\n    agent = WeatherIntegrationAgent()\n    weather = agent.get_current_weather(lat=10.8231, lon=106.6297)\n    \n    assert weather.temperature > 0\n    assert 0 <= weather.humidity <= 100\n    assert weather.location is not None\n\ndef test_severe_weather_detection():\n    agent = WeatherIntegrationAgent()\n    \n    # Simulate heavy rain\n    weather_data = Mock(rain_1h=60)\n    is_severe = agent.is_severe_weather(weather_data)\n    \n    assert is_severe is True\n"})}),"\n",(0,a.jsx)(t.h3,{id:"integration-tests",children:"Integration Tests"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'@pytest.mark.integration\ndef test_weather_traffic_correlation():\n    weather_agent = WeatherIntegrationAgent()\n    \n    # Analyze past month\n    correlation = weather_agent.analyze_weather_traffic_impact(\n        date_range=("2024-01-01", "2024-01-31"),\n        location="District 1"\n    )\n    \n    assert -1 <= correlation.rain_congestion_correlation <= 1\n    assert len(correlation.peak_impact_hours) > 0\n'})}),"\n",(0,a.jsx)(t.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsx)(t.h3,{id:"1-api-key-management",children:"1. API Key Management"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'# Use environment variables\nimport os\n\napi_key = os.getenv("OPENWEATHER_API_KEY")\nagent = WeatherIntegrationAgent(api_key=api_key)\n'})}),"\n",(0,a.jsx)(t.h3,{id:"2-rate-limiting",children:"2. Rate Limiting"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"# Respect API rate limits\nagent.configure_rate_limit(\n    requests_per_minute=60,\n    burst_size=10\n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"3-error-handling",children:"3. Error Handling"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"from src.core.exceptions import WeatherAPIError\n\ntry:\n    weather = agent.get_current_weather(lat=10.8231, lon=106.6297)\nexcept WeatherAPIError as e:\n    # Use cached data\n    weather = agent.get_cached_weather(lat=10.8231, lon=106.6297)\n"})}),"\n",(0,a.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(t.h3,{id:"issue-api-rate-limit-exceeded",children:"Issue: API Rate Limit Exceeded"}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Solution"}),": Increase cache TTL and reduce update frequency"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"agent.configure_cache(current_weather_ttl=600)  # 10 minutes\n"})}),"\n",(0,a.jsx)(t.h3,{id:"issue-inaccurate-weather-data",children:"Issue: Inaccurate Weather Data"}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Solution"}),": Use multiple sources and data validation"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"agent.enable_multi_source_validation(min_sources=2)\n"})}),"\n",(0,a.jsx)(t.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"/tes/vi/docs/agents/data-collection/air-quality",children:"Air Quality Agent"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"/tes/vi/docs/agents/analytics/pattern-recognition",children:"Pattern Recognition Agent"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"/tes/vi/docs/agents/analytics/accident-detection",children:"Accident Detection Agent"})}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"license",children:"License"}),"\n",(0,a.jsx)(t.p,{children:"MIT License - Copyright (c) 2025 UIP Contributors (Nguy\u1ec5n Nh\u1eadt Quang, Nguy\u1ec5n Vi\u1ec7t Ho\xe0ng, Nguy\u1ec5n \u0110\xecnh Anh Tu\u1ea5n)"}),"\n",(0,a.jsxs)(t.p,{children:["See ",(0,a.jsx)(t.a,{href:"../LICENSE",children:"LICENSE"})," for details."]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>l});var r=n(6540);const a={},i=r.createContext(a);function s(e){const t=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);