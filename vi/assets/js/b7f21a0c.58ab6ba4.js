"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[5215],{8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>c});var s=r(6540);const o={},i=s.createContext(o);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(i.Provider,{value:n},e.children)}},9634:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"installation/docker-setup","title":"docker-setup","description":"\x3c!--","source":"@site/docs/installation/docker-setup.md","sourceDirName":"installation","slug":"/installation/docker-setup","permalink":"/tes/vi/docs/installation/docker-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/installation/docker-setup.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"prerequisites","permalink":"/tes/vi/docs/installation/prerequisites"},"next":{"title":"local-setup","permalink":"/tes/vi/docs/installation/local-setup"}}');var o=r(4848),i=r(8453);const l={sidebar_position:2},c="Docker Setup",t={},a=[{value:"\ud83d\udce6 Overview",id:"-overview",level:2},{value:"\ud83d\ude80 Quick Start",id:"-quick-start",level:2},{value:"1. Clone the Repository",id:"1-clone-the-repository",level:3},{value:"2. Start All Services",id:"2-start-all-services",level:3},{value:"3. Verify Services",id:"3-verify-services",level:3},{value:"\ud83d\udd27 Configuration",id:"-configuration",level:2},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Docker Compose Override",id:"docker-compose-override",level:3},{value:"\ud83d\udcca Service Details",id:"-service-details",level:2},{value:"Backend API (Port 8001)",id:"backend-api-port-8001",level:3},{value:"Frontend (Port 5173)",id:"frontend-port-5173",level:3},{value:"Neo4j Browser (Port 7474)",id:"neo4j-browser-port-7474",level:3},{value:"MongoDB (Port 27017)",id:"mongodb-port-27017",level:3},{value:"Redis (Port 6379)",id:"redis-port-6379",level:3},{value:"\ud83d\udd04 Common Operations",id:"-common-operations",level:2},{value:"View Logs",id:"view-logs",level:3},{value:"Restart Services",id:"restart-services",level:3},{value:"Stop and Remove",id:"stop-and-remove",level:3},{value:"Rebuild Images",id:"rebuild-images",level:3},{value:"\ud83d\udc1b Troubleshooting",id:"-troubleshooting",level:2},{value:"Service Not Starting",id:"service-not-starting",level:3},{value:"Port Already in Use",id:"port-already-in-use",level:3},{value:"Database Connection Issues",id:"database-connection-issues",level:3},{value:"Low Disk Space",id:"low-disk-space",level:3},{value:"\ud83d\udcc8 Production Deployment",id:"-production-deployment",level:2},{value:"\ud83d\udcd6 Next Steps",id:"-next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"docker-setup",children:"Docker Setup"})}),"\n",(0,o.jsx)(n.p,{children:"Complete guide for deploying UIP - Urban Intelligence Platform using Docker and Docker Compose."}),"\n",(0,o.jsx)(n.h2,{id:"-overview",children:"\ud83d\udce6 Overview"}),"\n",(0,o.jsx)(n.p,{children:"Docker Compose provides a streamlined way to deploy the entire UIP stack with a single command. This includes:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Backend API Server (FastAPI)"}),"\n",(0,o.jsx)(n.li,{children:"Frontend Web Application (React + Vite)"}),"\n",(0,o.jsx)(n.li,{children:"Neo4j Graph Database"}),"\n",(0,o.jsx)(n.li,{children:"MongoDB Document Database"}),"\n",(0,o.jsx)(n.li,{children:"Redis Cache"}),"\n",(0,o.jsx)(n.li,{children:"NGSI-LD Context Broker (Stellio)"}),"\n",(0,o.jsx)(n.li,{children:"Apache Jena Fuseki (RDF Triplestore)"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"-quick-start",children:"\ud83d\ude80 Quick Start"}),"\n",(0,o.jsx)(n.h3,{id:"1-clone-the-repository",children:"1. Clone the Repository"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform.git\r\ncd UIP-Urban_Intelligence_Platform\n"})}),"\n",(0,o.jsx)(n.h3,{id:"2-start-all-services",children:"2. Start All Services"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,o.jsx)(n.h3,{id:"3-verify-services",children:"3. Verify Services"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker-compose ps\n"})}),"\n",(0,o.jsx)(n.p,{children:"Expected output:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"NAME                STATUS       PORTS\r\nuip-backend         Up           0.0.0.0:8001->8001/tcp\r\nuip-frontend        Up           0.0.0.0:5173->5173/tcp\r\nuip-neo4j           Up           0.0.0.0:7474->7474/tcp, 0.0.0.0:7687->7687/tcp\r\nuip-mongo           Up           0.0.0.0:27017->27017/tcp\r\nuip-redis           Up           0.0.0.0:6379->6379/tcp\n"})}),"\n",(0,o.jsx)(n.h2,{id:"-configuration",children:"\ud83d\udd27 Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,o.jsxs)(n.p,{children:["Create a ",(0,o.jsx)(n.code,{children:".env"})," file in the project root:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Application\r\nAPP_ENV=production\r\nDEBUG=false\r\n\r\n# API Configuration\r\nAPI_HOST=0.0.0.0\r\nAPI_PORT=8001\r\n\r\n# Database URLs\r\nMONGO_URI=mongodb://mongo:27017/hcmc_traffic\r\nNEO4J_URI=bolt://neo4j:7687\r\nNEO4J_USER=neo4j\r\nNEO4J_PASSWORD=your_secure_password\r\n\r\n# Redis\r\nREDIS_URL=redis://redis:6379\r\n\r\n# Context Broker\r\nSTELLIO_URL=http://stellio:8080\r\nFUSEKI_URL=http://fuseki:3030\n"})}),"\n",(0,o.jsx)(n.h3,{id:"docker-compose-override",children:"Docker Compose Override"}),"\n",(0,o.jsxs)(n.p,{children:["For development, create ",(0,o.jsx)(n.code,{children:"docker-compose.override.yml"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\r\n\r\nservices:\r\n  backend:\r\n    volumes:\r\n      - ./src:/app/src:ro\r\n    environment:\r\n      - DEBUG=true\r\n    command: ["uvicorn", "src.api.main:app", "--reload", "--host", "0.0.0.0", "--port", "8001"]\r\n  \r\n  frontend:\r\n    volumes:\r\n      - ./apps/traffic-web-app/frontend/src:/app/src:ro\r\n    command: ["npm", "run", "dev", "--", "--host"]\n'})}),"\n",(0,o.jsx)(n.h2,{id:"-service-details",children:"\ud83d\udcca Service Details"}),"\n",(0,o.jsx)(n.h3,{id:"backend-api-port-8001",children:"Backend API (Port 8001)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Access API documentation\r\nhttp://localhost:8001/docs\r\n\r\n# Health check\r\ncurl http://localhost:8001/health\n"})}),"\n",(0,o.jsx)(n.h3,{id:"frontend-port-5173",children:"Frontend (Port 5173)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Access web application\r\nhttp://localhost:5173\n"})}),"\n",(0,o.jsx)(n.h3,{id:"neo4j-browser-port-7474",children:"Neo4j Browser (Port 7474)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Access Neo4j browser\r\nhttp://localhost:7474\r\n\r\n# Default credentials\r\nUsername: neo4j\r\nPassword: (set in .env)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"mongodb-port-27017",children:"MongoDB (Port 27017)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Connect with mongosh\r\nmongosh mongodb://localhost:27017/hcmc_traffic\n"})}),"\n",(0,o.jsx)(n.h3,{id:"redis-port-6379",children:"Redis (Port 6379)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Connect with redis-cli\r\nredis-cli -h localhost -p 6379\n"})}),"\n",(0,o.jsx)(n.h2,{id:"-common-operations",children:"\ud83d\udd04 Common Operations"}),"\n",(0,o.jsx)(n.h3,{id:"view-logs",children:"View Logs"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# All services\r\ndocker-compose logs -f\r\n\r\n# Specific service\r\ndocker-compose logs -f backend\r\n\r\n# Last 100 lines\r\ndocker-compose logs --tail=100 backend\n"})}),"\n",(0,o.jsx)(n.h3,{id:"restart-services",children:"Restart Services"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Restart all\r\ndocker-compose restart\r\n\r\n# Restart specific service\r\ndocker-compose restart backend\n"})}),"\n",(0,o.jsx)(n.h3,{id:"stop-and-remove",children:"Stop and Remove"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Stop all services\r\ndocker-compose down\r\n\r\n# Stop and remove volumes (WARNING: deletes data)\r\ndocker-compose down -v\n"})}),"\n",(0,o.jsx)(n.h3,{id:"rebuild-images",children:"Rebuild Images"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Rebuild all images\r\ndocker-compose build\r\n\r\n# Rebuild without cache\r\ndocker-compose build --no-cache\r\n\r\n# Rebuild and restart\r\ndocker-compose up -d --build\n"})}),"\n",(0,o.jsx)(n.h2,{id:"-troubleshooting",children:"\ud83d\udc1b Troubleshooting"}),"\n",(0,o.jsx)(n.h3,{id:"service-not-starting",children:"Service Not Starting"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Check service status\r\ndocker-compose ps\r\n\r\n# View error logs\r\ndocker-compose logs <service-name>\r\n\r\n# Check resource usage\r\ndocker stats\n"})}),"\n",(0,o.jsx)(n.h3,{id:"port-already-in-use",children:"Port Already in Use"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Find process using port\r\nnetstat -ano | findstr :8001\r\n\r\n# Kill process (Windows)\r\ntaskkill /PID <PID> /F\r\n\r\n# Kill process (Linux/macOS)\r\nlsof -i :8001\r\nkill -9 <PID>\n"})}),"\n",(0,o.jsx)(n.h3,{id:"database-connection-issues",children:"Database Connection Issues"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Check network\r\ndocker network ls\r\ndocker network inspect uip-network\r\n\r\n# Verify container connectivity\r\ndocker-compose exec backend ping mongo\n"})}),"\n",(0,o.jsx)(n.h3,{id:"low-disk-space",children:"Low Disk Space"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Clean unused images and volumes\r\ndocker system prune -a\r\ndocker volume prune\n"})}),"\n",(0,o.jsx)(n.h2,{id:"-production-deployment",children:"\ud83d\udcc8 Production Deployment"}),"\n",(0,o.jsx)(n.p,{children:"For production, consider:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Use environment-specific compose files"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Set secure passwords"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Enable HTTPS with reverse proxy (nginx/traefik)"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Configure resource limits"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Set up monitoring (Prometheus + Grafana)"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Implement backup strategies"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"-next-steps",children:"\ud83d\udcd6 Next Steps"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"local-setup",children:"Local Development Setup"})," - For development without Docker"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"environment-config",children:"Environment Configuration"})," - Detailed configuration options"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"../guides/troubleshooting",children:"Troubleshooting Guide"})," - Common issues and solutions"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsxs)(n.p,{children:["Need help? Check our ",(0,o.jsx)(n.a,{href:"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/issues",children:"GitHub Issues"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);