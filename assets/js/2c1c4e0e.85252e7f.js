"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[4438],{7072:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"agents/context-management/stellio-state-query","title":"stellio-state-query","description":"\x3c!--","source":"@site/docs/agents/context-management/stellio-state-query.md","sourceDirName":"agents/context-management","slug":"/agents/context-management/stellio-state-query","permalink":"/tes/docs/agents/context-management/stellio-state-query","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/context-management/stellio-state-query.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"state-updater","permalink":"/tes/docs/agents/context-management/state-updater"},"next":{"title":"temporal-data-manager","permalink":"/tes/docs/agents/context-management/temporal-data-manager"}}');var i=t(4848),s=t(8453);const l={sidebar_position:3},a="Stellio State Query Agent",d={},c=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\ud83c\udfaf Purpose",id:"-purpose",level:2},{value:"\ud83d\ude80 Usage",id:"-usage",level:2},{value:"Basic Query",id:"basic-query",level:3},{value:"Geo-Query",id:"geo-query",level:3},{value:"Temporal Query",id:"temporal-query",level:3},{value:"Complex Query",id:"complex-query",level:3},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:2},{value:"\ud83d\udcca Query Parameters",id:"-query-parameters",level:2},{value:"\ud83d\udcd6 Related Documentation",id:"-related-documentation",level:2}];function o(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"stellio-state-query-agent",children:"Stellio State Query Agent"})}),"\n",(0,i.jsx)(r.p,{children:"The Stellio State Query Agent provides advanced query capabilities for the Stellio NGSI-LD context broker."}),"\n",(0,i.jsx)(r.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Property"}),(0,i.jsx)(r.th,{children:"Value"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Module"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"src.agents.context_management.stellio_state_query_agent"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Class"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"StellioStateQueryAgent"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Author"})}),(0,i.jsx)(r.td,{children:"UIP Team"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Version"})}),(0,i.jsx)(r.td,{children:"1.0.0"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"-purpose",children:"\ud83c\udfaf Purpose"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Execute NGSI-LD queries"})," against Stellio"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Support geo-queries"})," for spatial filtering"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Handle temporal queries"})," for historical data"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Optimize query performance"})," with caching"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"-usage",children:"\ud83d\ude80 Usage"}),"\n",(0,i.jsx)(r.h3,{id:"basic-query",children:"Basic Query"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'from src.agents.context_management.stellio_state_query_agent import StellioStateQueryAgent\r\n\r\nquery = StellioStateQueryAgent()\r\n\r\n# Query by type\r\ncameras = await query.get_by_type("TrafficCamera")\r\n\r\n# Query by ID\r\ncamera = await query.get_by_id("urn:ngsi-ld:TrafficCamera:CAM_001")\n'})}),"\n",(0,i.jsx)(r.h3,{id:"geo-query",children:"Geo-Query"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'# Query within radius\r\nnearby = await query.geo_query(\r\n    entity_type="TrafficCamera",\r\n    geo_property="location",\r\n    geometry="Point",\r\n    coordinates=[106.6297, 10.8231],\r\n    georel="near;maxDistance==1000"  # 1km radius\r\n)\r\n\r\n# Query within polygon\r\nin_area = await query.geo_query(\r\n    entity_type="TrafficCamera",\r\n    geo_property="location",\r\n    geometry="Polygon",\r\n    coordinates=[[[106.6, 10.8], [106.7, 10.8], [106.7, 10.9], [106.6, 10.9], [106.6, 10.8]]],\r\n    georel="within"\r\n)\n'})}),"\n",(0,i.jsx)(r.h3,{id:"temporal-query",children:"Temporal Query"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'# Query historical values\r\nhistory = await query.temporal_query(\r\n    entity_id="urn:ngsi-ld:TrafficCamera:CAM_001",\r\n    attrs=["vehicleCount", "avgSpeed"],\r\n    timerel="between",\r\n    timeAt="2025-01-15T00:00:00Z",\r\n    endTimeAt="2025-01-15T23:59:59Z"\r\n)\n'})}),"\n",(0,i.jsx)(r.h3,{id:"complex-query",children:"Complex Query"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'# Query with multiple conditions\r\nresult = await query.query(\r\n    entity_type="TrafficCamera",\r\n    q="status==active;vehicleCount>50",\r\n    georel="near;maxDistance==2000",\r\n    geometry="Point",\r\n    coordinates=[106.6297, 10.8231],\r\n    attrs=["status", "vehicleCount", "location"]\r\n)\n'})}),"\n",(0,i.jsx)(r.h2,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:'# config/stellio.yaml\r\nstellio_query:\r\n  enabled: true\r\n  \r\n  # Connection settings\r\n  url: "http://localhost:8080"\r\n  timeout_seconds: 30\r\n  \r\n  # Query defaults\r\n  defaults:\r\n    limit: 100\r\n    offset: 0\r\n    include_sysAttrs: false\r\n  \r\n  # Caching\r\n  cache:\r\n    enabled: true\r\n    ttl_seconds: 60\r\n    max_size: 1000\n'})}),"\n",(0,i.jsx)(r.h2,{id:"-query-parameters",children:"\ud83d\udcca Query Parameters"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Parameter"}),(0,i.jsx)(r.th,{children:"Description"}),(0,i.jsx)(r.th,{children:"Example"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"type"})}),(0,i.jsx)(r.td,{children:"Entity type filter"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"TrafficCamera"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"attrs"})}),(0,i.jsx)(r.td,{children:"Attributes to return"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"status,vehicleCount"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"q"})}),(0,i.jsx)(r.td,{children:"Query expression"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"status==active"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"georel"})}),(0,i.jsx)(r.td,{children:"Geo relationship"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"near;maxDistance==1000"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"geometry"})}),(0,i.jsx)(r.td,{children:"Geometry type"}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"Point"}),", ",(0,i.jsx)(r.code,{children:"Polygon"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"coordinates"})}),(0,i.jsx)(r.td,{children:"Geo coordinates"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"[106.6, 10.8]"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"timerel"})}),(0,i.jsx)(r.td,{children:"Temporal relation"}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"before"}),", ",(0,i.jsx)(r.code,{children:"after"}),", ",(0,i.jsx)(r.code,{children:"between"})]})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"-related-documentation",children:"\ud83d\udcd6 Related Documentation"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"state-updater",children:"State Updater"})," - Update operations"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"entity-publisher",children:"Entity Publisher"})," - Entity creation"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"../state-management/temporal-state-tracker",children:"Temporal State Tracker"})," - Time-series"]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.p,{children:["See the ",(0,i.jsx)(r.a,{href:"../complete-agents-reference",children:"complete agents reference"})," for all available agents."]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>l,x:()=>a});var n=t(6540);const i={},s=n.createContext(i);function l(e){const r=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);