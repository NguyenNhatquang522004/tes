"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[1177],{6014:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"agents/state-management/accident-state-manager","title":"accident-state-manager","description":"\x3c!--","source":"@site/docs/agents/state-management/accident-state-manager.md","sourceDirName":"agents/state-management","slug":"/agents/state-management/accident-state-manager","permalink":"/tes/docs/agents/state-management/accident-state-manager","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/state-management/accident-state-manager.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"state-manager","permalink":"/tes/docs/agents/state-management/state-manager"},"next":{"title":"congestion-state-manager","permalink":"/tes/docs/agents/state-management/congestion-state-manager"}}');var i=t(4848),a=t(8453);const s={sidebar_position:2},d="Accident State Manager Agent",c={},l=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\ud83c\udfaf Purpose",id:"-purpose",level:2},{value:"\ud83d\udcca Accident States",id:"-accident-states",level:2},{value:"State Machine",id:"state-machine",level:3},{value:"\ud83d\ude80 Usage",id:"-usage",level:2},{value:"Create Accident",id:"create-accident",level:3},{value:"Transition State",id:"transition-state",level:3},{value:"Query Accidents",id:"query-accidents",level:3},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:2},{value:"\ud83d\udcc8 Events",id:"-events",level:2},{value:"\ud83d\udcd6 Related Documentation",id:"-related-documentation",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"accident-state-manager-agent",children:"Accident State Manager Agent"})}),"\n",(0,i.jsx)(n.p,{children:"The Accident State Manager Agent handles the lifecycle and state transitions of traffic accidents from detection to resolution."}),"\n",(0,i.jsx)(n.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Property"}),(0,i.jsx)(n.th,{children:"Value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Module"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"src.agents.state_management.accident_state_manager_agent"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Class"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"AccidentStateManagerAgent"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Author"})}),(0,i.jsx)(n.td,{children:"UIP Team"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Version"})}),(0,i.jsx)(n.td,{children:"1.0.0"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"-purpose",children:"\ud83c\udfaf Purpose"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Track accident lifecycle"})," from detection to resolution"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Manage state transitions"})," with validation rules"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Coordinate response workflows"})," based on state changes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Maintain accident history"})," for analytics"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-accident-states",children:"\ud83d\udcca Accident States"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"State"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Next States"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"detected"})}),(0,i.jsx)(n.td,{children:"Initial detection by CV analysis"}),(0,i.jsx)(n.td,{children:"confirmed, false_positive"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"confirmed"})}),(0,i.jsx)(n.td,{children:"Verified by additional data"}),(0,i.jsx)(n.td,{children:"responding, resolved"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"responding"})}),(0,i.jsx)(n.td,{children:"Emergency services dispatched"}),(0,i.jsx)(n.td,{children:"resolved"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"resolved"})}),(0,i.jsx)(n.td,{children:"Accident cleared"}),(0,i.jsx)(n.td,{children:"-"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false_positive"})}),(0,i.jsx)(n.td,{children:"Detection was incorrect"}),(0,i.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"state-machine",children:"State Machine"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 detected \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518\r\n     \u2502\r\n     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n     \u25bc                     \u25bc\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502confirmed \u2502        \u2502false_positive\u2502\r\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n     \u2502\r\n     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n     \u25bc               \u25bc\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502responding \u2502\u2500\u2500\u25b6\u2502 resolved \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-usage",children:"\ud83d\ude80 Usage"}),"\n",(0,i.jsx)(n.h3,{id:"create-accident",children:"Create Accident"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from src.agents.state_management.accident_state_manager_agent import AccidentStateManagerAgent\r\n\r\nmanager = AccidentStateManagerAgent()\r\n\r\n# Create new accident\r\naccident = manager.create_accident({\r\n    "id": "ACC_001",\r\n    "location": {"lat": 10.762, "lon": 106.660},\r\n    "severity": "moderate",\r\n    "detected_by": "CAM_025",\r\n    "timestamp": "2025-01-15T10:30:00Z"\r\n})\n'})}),"\n",(0,i.jsx)(n.h3,{id:"transition-state",children:"Transition State"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Confirm accident\r\nmanager.transition(\r\n    accident_id="ACC_001",\r\n    to_state="confirmed",\r\n    metadata={\r\n        "confirmed_by": "operator_1",\r\n        "confirmation_source": "visual_verification"\r\n    }\r\n)\r\n\r\n# Mark as responding\r\nmanager.transition(\r\n    accident_id="ACC_001",\r\n    to_state="responding",\r\n    metadata={\r\n        "response_unit": "UNIT_12",\r\n        "eta_minutes": 5\r\n    }\r\n)\r\n\r\n# Resolve accident\r\nmanager.transition(\r\n    accident_id="ACC_001",\r\n    to_state="resolved",\r\n    metadata={\r\n        "resolution_time": "2025-01-15T11:00:00Z",\r\n        "lane_cleared": True\r\n    }\r\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"query-accidents",children:"Query Accidents"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Get active accidents\r\nactive = manager.get_by_state(["detected", "confirmed", "responding"])\r\n\r\n# Get accident history\r\nhistory = manager.get_state_history("ACC_001")\r\n\r\n# Get accidents by location\r\nnearby = manager.get_by_location(\r\n    lat=10.762,\r\n    lon=106.660,\r\n    radius_km=1.0\r\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# config/accident_config.yaml\r\naccident_state_manager:\r\n  enabled: true\r\n  \r\n  # State definitions\r\n  states:\r\n    detected:\r\n      auto_expire_minutes: 30\r\n      allowed_transitions:\r\n        - confirmed\r\n        - false_positive\r\n    \r\n    confirmed:\r\n      allowed_transitions:\r\n        - responding\r\n        - resolved\r\n    \r\n    responding:\r\n      allowed_transitions:\r\n        - resolved\r\n    \r\n    resolved:\r\n      final: true\r\n    \r\n    false_positive:\r\n      final: true\r\n  \r\n  # Notifications\r\n  notifications:\r\n    on_detected:\r\n      - alert_dispatcher\r\n      - dashboard\r\n    on_confirmed:\r\n      - emergency_services\r\n      - traffic_management\r\n    on_resolved:\r\n      - analytics\r\n      - reporting\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-events",children:"\ud83d\udcc8 Events"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Event"}),(0,i.jsx)(n.th,{children:"Trigger"}),(0,i.jsx)(n.th,{children:"Payload"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"accident.detected"})}),(0,i.jsx)(n.td,{children:"New detection"}),(0,i.jsx)(n.td,{children:"accident details"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"accident.confirmed"})}),(0,i.jsx)(n.td,{children:"Confirmation"}),(0,i.jsx)(n.td,{children:"verification info"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"accident.response_started"})}),(0,i.jsx)(n.td,{children:"Response begins"}),(0,i.jsx)(n.td,{children:"unit details"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"accident.resolved"})}),(0,i.jsx)(n.td,{children:"Accident cleared"}),(0,i.jsx)(n.td,{children:"resolution details"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"-related-documentation",children:"\ud83d\udcd6 Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../analytics/accident-detection",children:"Accident Detection Agent"})," - Detection logic"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../notification/alert-dispatcher",children:"Alert Dispatcher"})," - Alerting"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"congestion-state-manager",children:"Congestion State Manager"})," - Related congestion"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.a,{href:"../complete-agents-reference",children:"complete agents reference"})," for all available agents."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>d});var r=t(6540);const i={},a=r.createContext(i);function s(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);