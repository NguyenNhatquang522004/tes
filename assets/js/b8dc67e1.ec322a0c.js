"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[3857],{7030:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"agents/rdf-linked-data/triplestore-loader","title":"triplestore-loader","description":"\x3c!--","source":"@site/docs/agents/rdf-linked-data/triplestore-loader.md","sourceDirName":"agents/rdf-linked-data","slug":"/agents/rdf-linked-data/triplestore-loader","permalink":"/tes/docs/agents/rdf-linked-data/triplestore-loader","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/rdf-linked-data/triplestore-loader.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"sosa-ssn-mapper","permalink":"/tes/docs/agents/transformation/sosa-ssn-mapper"},"next":{"title":"content-negotiation","permalink":"/tes/docs/agents/rdf-linked-data/content-negotiation"}}');var a=r(4848),s=r(8453);const i={},l="Triplestore Loader Agent",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Usage",id:"usage",level:2},{value:"Load RDF Data",id:"load-rdf-data",level:3},{value:"Execute SPARQL Query",id:"execute-sparql-query",level:3},{value:"SPARQL Update",id:"sparql-update",level:3},{value:"Batch Loading",id:"batch-loading",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Class: <code>TriplestoreLoaderAgent</code>",id:"class-triplestoreloaderagent",level:3},{value:"Methods",id:"methods",level:4},{value:"<code>load_triples(file_path: str, graph_name: str, format: str = &quot;turtle&quot;) -&gt; LoadResult</code>",id:"load_triplesfile_path-str-graph_name-str-format-str--turtle---loadresult",level:5},{value:"<code>execute_query(query: str, timeout: int = 60) -&gt; List[dict]</code>",id:"execute_queryquery-str-timeout-int--60---listdict",level:5},{value:"<code>execute_update(update: str) -&gt; bool</code>",id:"execute_updateupdate-str---bool",level:5},{value:"<code>clear_graph(graph_name: str)</code>",id:"clear_graphgraph_name-str",level:5},{value:"<code>export_graph(graph_name: str, output_path: str, format: str = &quot;turtle&quot;)</code>",id:"export_graphgraph_name-str-output_path-str-format-str--turtle",level:5},{value:"SPARQL Query Examples",id:"sparql-query-examples",level:2},{value:"Traffic Flow Analysis",id:"traffic-flow-analysis",level:3},{value:"Sensor Capabilities",id:"sensor-capabilities",level:3},{value:"Weather-Traffic Correlation",id:"weather-traffic-correlation",level:3},{value:"Integration Examples",id:"integration-examples",level:2},{value:"With SOSA/SSN Mapper",id:"with-sosassn-mapper",level:3},{value:"With NGSI-LD to RDF",id:"with-ngsi-ld-to-rdf",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Bulk Loading",id:"bulk-loading",level:3},{value:"Query Caching",id:"query-caching",level:3},{value:"Connection Pooling",id:"connection-pooling",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"Related Documentation",id:"related-documentation",level:2},{value:"License",id:"license",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"triplestore-loader-agent",children:"Triplestore Loader Agent"})}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(n.p,{children:"The Triplestore Loader Agent manages loading, updating, and querying RDF triples in Apache Jena Fuseki triplestore, providing SPARQL endpoint access for semantic queries across traffic, weather, and sensor data."}),"\n",(0,a.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Bulk Loading"}),": Efficient batch loading of RDF triples (Turtle, JSON-LD, RDF/XML)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Named Graphs"}),": Organize data into separate named graphs"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"SPARQL Queries"}),": Execute SELECT, CONSTRUCT, ASK, DESCRIBE queries"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"SPARQL Updates"}),": INSERT, DELETE, MODIFY operations"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Incremental Updates"}),": Delta updates without full reload"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Transaction Management"}),": ACID-compliant operations"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Graph Versioning"}),": Track graph changes over time"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mermaid",children:"graph TB\n    A[RDF Data Sources] --\x3e B[Triplestore Loader]\n    B --\x3e C{Operation Type}\n    C --\x3e|Load| D[Bulk Loader]\n    C --\x3e|Query| E[SPARQL Engine]\n    C --\x3e|Update| F[Update Handler]\n    D --\x3e G[Apache Jena Fuseki]\n    E --\x3e G\n    F --\x3e G\n    G --\x3e H[Named Graphs]\n    H --\x3e I[Traffic Graph]\n    H --\x3e J[Weather Graph]\n    H --\x3e K[Sensor Graph]\n"})}),"\n",(0,a.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"File"}),": ",(0,a.jsx)(n.code,{children:"config/fuseki.yaml"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'fuseki:\n  endpoint: "http://localhost:3030"\n  dataset: "hcmc-traffic"\n  \n  graphs:\n    traffic:\n      name: "http://hcmc-traffic.example.org/graph/traffic"\n      description: "Traffic flow observations"\n      \n    sensors:\n      name: "http://hcmc-traffic.example.org/graph/sensors"\n      description: "Sensor descriptions (SOSA/SSN)"\n      \n    weather:\n      name: "http://hcmc-traffic.example.org/graph/weather"\n      description: "Weather observations"\n      \n    air_quality:\n      name: "http://hcmc-traffic.example.org/graph/air-quality"\n      description: "Air quality measurements"\n      \n  loading:\n    batch_size: 10000\n    timeout: 300\n    format: "turtle"\n    \n  query:\n    timeout: 60\n    result_limit: 10000\n'})}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(n.h3,{id:"load-rdf-data",children:"Load RDF Data"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from src.agents.rdf_linked_data.triplestore_loader_agent import TriplestoreLoaderAgent\n\n# Initialize agent\nagent = TriplestoreLoaderAgent()\n\n# Load Turtle file\nagent.load_triples(\n    file_path="data/observations.ttl",\n    graph_name="http://hcmc-traffic.example.org/graph/traffic",\n    format="turtle"\n)\n\n# Load JSON-LD\nagent.load_triples(\n    file_path="data/sensors.jsonld",\n    graph_name="http://hcmc-traffic.example.org/graph/sensors",\n    format="json-ld"\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"execute-sparql-query",children:"Execute SPARQL Query"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# SELECT query\nquery = """\nPREFIX sosa: <http://www.w3.org/ns/sosa/>\nPREFIX ex: <http://hcmc-traffic.example.org/>\n\nSELECT ?sensor ?time ?value\nWHERE {\n    GRAPH <http://hcmc-traffic.example.org/graph/traffic> {\n        ?obs a sosa:Observation ;\n             sosa:madeBySensor ?sensor ;\n             sosa:resultTime ?time ;\n             sosa:hasSimpleResult ?value ;\n             sosa:observedProperty ex:VehicleCount .\n    }\n}\nORDER BY DESC(?time)\nLIMIT 100\n"""\n\nresults = agent.execute_query(query)\n\nfor row in results:\n    print(f"Sensor: {row[\'sensor\']}, Time: {row[\'time\']}, Value: {row[\'value\']}")\n'})}),"\n",(0,a.jsx)(n.h3,{id:"sparql-update",children:"SPARQL Update"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# INSERT new triples\nupdate = """\nPREFIX sosa: <http://www.w3.org/ns/sosa/>\nPREFIX ex: <http://hcmc-traffic.example.org/>\n\nINSERT DATA {\n    GRAPH <http://hcmc-traffic.example.org/graph/traffic> {\n        ex:Observation_001 a sosa:Observation ;\n            sosa:madeBySensor ex:Sensor_CAM_001 ;\n            sosa:resultTime "2024-01-15T10:30:00Z"^^xsd:dateTime ;\n            sosa:hasSimpleResult 45 .\n    }\n}\n"""\n\nagent.execute_update(update)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"batch-loading",children:"Batch Loading"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Load multiple files\nfiles = [\n    {"path": "data/traffic_2024_01.ttl", "graph": "traffic"},\n    {"path": "data/weather_2024_01.ttl", "graph": "weather"},\n    {"path": "data/sensors.ttl", "graph": "sensors"}\n]\n\nagent.batch_load(files, parallel=True)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,a.jsxs)(n.h3,{id:"class-triplestoreloaderagent",children:["Class: ",(0,a.jsx)(n.code,{children:"TriplestoreLoaderAgent"})]}),"\n",(0,a.jsx)(n.h4,{id:"methods",children:"Methods"}),"\n",(0,a.jsx)(n.h5,{id:"load_triplesfile_path-str-graph_name-str-format-str--turtle---loadresult",children:(0,a.jsx)(n.code,{children:'load_triples(file_path: str, graph_name: str, format: str = "turtle") -> LoadResult'})}),"\n",(0,a.jsx)(n.p,{children:"Load RDF file into named graph."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"file_path"})," (str): Path to RDF file"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"graph_name"})," (str): Target named graph URI"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"format"})," (str): RDF format (turtle, json-ld, rdf-xml)"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"LoadResult: Loading statistics"}),"\n"]}),"\n",(0,a.jsx)(n.h5,{id:"execute_queryquery-str-timeout-int--60---listdict",children:(0,a.jsx)(n.code,{children:"execute_query(query: str, timeout: int = 60) -> List[dict]"})}),"\n",(0,a.jsx)(n.p,{children:"Execute SPARQL SELECT query."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"query"})," (str): SPARQL query"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"timeout"})," (int): Query timeout (seconds)"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"List[dict]: Query results"}),"\n"]}),"\n",(0,a.jsx)(n.h5,{id:"execute_updateupdate-str---bool",children:(0,a.jsx)(n.code,{children:"execute_update(update: str) -> bool"})}),"\n",(0,a.jsx)(n.p,{children:"Execute SPARQL UPDATE operation."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"update"})," (str): SPARQL UPDATE statement"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"bool: Success status"}),"\n"]}),"\n",(0,a.jsx)(n.h5,{id:"clear_graphgraph_name-str",children:(0,a.jsx)(n.code,{children:"clear_graph(graph_name: str)"})}),"\n",(0,a.jsx)(n.p,{children:"Clear all triples from named graph."}),"\n",(0,a.jsx)(n.h5,{id:"export_graphgraph_name-str-output_path-str-format-str--turtle",children:(0,a.jsx)(n.code,{children:'export_graph(graph_name: str, output_path: str, format: str = "turtle")'})}),"\n",(0,a.jsx)(n.p,{children:"Export named graph to file."}),"\n",(0,a.jsx)(n.h2,{id:"sparql-query-examples",children:"SPARQL Query Examples"}),"\n",(0,a.jsx)(n.h3,{id:"traffic-flow-analysis",children:"Traffic Flow Analysis"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sparql",children:'PREFIX sosa: <http://www.w3.org/ns/sosa/>\nPREFIX ex: <http://hcmc-traffic.example.org/>\n\nSELECT ?location (AVG(?value) AS ?avgFlow)\nWHERE {\n    ?obs a sosa:Observation ;\n         sosa:observedProperty ex:VehicleCount ;\n         sosa:hasSimpleResult ?value ;\n         sosa:hasFeatureOfInterest ?location ;\n         sosa:resultTime ?time .\n    FILTER(?time >= "2024-01-15T00:00:00Z"^^xsd:dateTime)\n}\nGROUP BY ?location\nORDER BY DESC(?avgFlow)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"sensor-capabilities",children:"Sensor Capabilities"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sparql",children:"PREFIX sosa: <http://www.w3.org/ns/sosa/>\nPREFIX ssn: <http://www.w3.org/ns/ssn/>\n\nSELECT ?sensor ?property ?accuracy\nWHERE {\n    ?sensor a sosa:Sensor ;\n           sosa:observes ?property ;\n           ssn:hasSystemCapability [\n               ssn:hasAccuracy ?accuracy\n           ] .\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"weather-traffic-correlation",children:"Weather-Traffic Correlation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sparql",children:"PREFIX sosa: <http://www.w3.org/ns/sosa/>\nPREFIX ex: <http://hcmc-traffic.example.org/>\n\nSELECT ?time ?traffic ?weather\nWHERE {\n    GRAPH <http://hcmc-traffic.example.org/graph/traffic> {\n        ?trafficObs sosa:resultTime ?time ;\n                   sosa:hasSimpleResult ?traffic .\n    }\n    GRAPH <http://hcmc-traffic.example.org/graph/weather> {\n        ?weatherObs sosa:resultTime ?time ;\n                   sosa:observedProperty ex:Temperature ;\n                   sosa:hasSimpleResult ?weather .\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,a.jsx)(n.h3,{id:"with-sosassn-mapper",children:"With SOSA/SSN Mapper"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from src.agents.transformation.sosa_ssn_mapper_agent import SOSASSNMapperAgent\n\nsosa_agent = SOSASSNMapperAgent()\nloader = TriplestoreLoaderAgent()\n\n# Map to SOSA and load\nobservation = sosa_agent.map_to_sosa_observation(raw_data)\nttl = observation.serialize(format="turtle")\nloader.load_triples_from_string(ttl, graph_name="traffic")\n'})}),"\n",(0,a.jsx)(n.h3,{id:"with-ngsi-ld-to-rdf",children:"With NGSI-LD to RDF"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from src.agents.rdf_linked_data.ngsi_ld_to_rdf_agent import NGSILDToRDFAgent\n\nrdf_agent = NGSILDToRDFAgent()\n\n# Convert NGSI-LD to RDF and load\nngsi_entity = {...}\nrdf_graph = rdf_agent.convert_to_rdf(ngsi_entity)\nloader.load_graph(rdf_graph, graph_name="traffic")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,a.jsx)(n.h3,{id:"bulk-loading",children:"Bulk Loading"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"agent.configure_bulk_loading(\n    batch_size=10000,\n    parallel_workers=4,\n    compression=True\n)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"query-caching",children:"Query Caching"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"agent.enable_query_caching(\n    cache_ttl=300,\n    cache_size=100\n)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"connection-pooling",children:"Connection Pooling"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"agent.configure_connection_pool(\n    max_connections=10,\n    timeout=30\n)\n"})}),"\n",(0,a.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'health = agent.health_check()\nprint(f"Status: {health.status}")\nprint(f"Triple Count: {health.triple_count}")\nprint(f"Graphs: {health.graph_count}")\n\nstats = agent.get_graph_statistics("traffic")\nprint(f"Triples: {stats.triple_count}")\nprint(f"Last Update: {stats.last_update}")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/tes/docs/agents/transformation/sosa-ssn-mapper",children:"SOSA/SSN Mapper Agent"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/tes/docs/agents/rdf-linked-data/ngsi-ld-to-rdf",children:"NGSI-LD to RDF Agent"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/tes/docs/agents/rdf-linked-data/content-negotiation",children:"Content Negotiation Agent"})}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,a.jsx)(n.p,{children:"MIT License - Copyright (c) 2025 UIP Contributors (Nguy\u1ec5n Nh\u1eadt Quang, Nguy\u1ec5n Vi\u1ec7t Ho\xe0ng, Nguy\u1ec5n \u0110\xecnh Anh Tu\u1ea5n)"}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"../LICENSE",children:"LICENSE"})," for details."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>l});var t=r(6540);const a={},s=t.createContext(a);function i(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);