"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[3065],{6790:n=>{n.exports=JSON.parse('{"permalink":"/tes/blog/citizen-reporting-system","editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/blog/2024-06-01-citizen-reporting.md","source":"@site/blog/2024-06-01-citizen-reporting.md","title":"\ud83d\udcf1 X\xe2y d\u1ef1ng H\u1ec7 th\u1ed1ng B\xe1o c\xe1o C\xf4ng d\xe2n","description":"\x3c!--","date":"2024-06-01T00:00:00.000Z","tags":[{"inline":false,"label":"UIP","permalink":"/tes/blog/tags/uip","description":"UIP - Urban Intelligence Platform core content"},{"inline":false,"label":"Citizen Report","permalink":"/tes/blog/tags/citizen-report","description":"Citizen reporting system"},{"inline":false,"label":"API","permalink":"/tes/blog/tags/api","description":"REST API and FastAPI"},{"inline":false,"label":"Backend","permalink":"/tes/blog/tags/backend","description":"Backend development and APIs"},{"inline":false,"label":"Mobile","permalink":"/tes/blog/tags/mobile","description":"Mobile development and PWA"}],"readingTime":5.53,"hasTruncateMarker":true,"authors":[{"name":"Nguy\u1ec5n \u0110\xecnh Anh Tu\u1ea5n","title":"Backend Developer","url":"https://github.com/NguyenDinhAnhTuan04","page":{"permalink":"/tes/blog/authors/nguyendinhanhtuan"},"socials":{"github":"https://github.com/NguyenDinhAnhTuan04","email":"mailto:nguyentuan834897@gmail.com"},"imageURL":"https://github.com/NguyenDinhAnhTuan04.png","key":"nguyendinhanhtuan"}],"frontMatter":{"slug":"citizen-reporting-system","title":"\ud83d\udcf1 X\xe2y d\u1ef1ng H\u1ec7 th\u1ed1ng B\xe1o c\xe1o C\xf4ng d\xe2n","authors":["nguyendinhanhtuan"],"tags":["uip","citizen-report","api","backend","mobile"]},"unlisted":false,"prevItem":{"title":"\u26a1 T\u1ed1i \u01b0u Performance cho 1000+ Camera Streams","permalink":"/tes/blog/performance-optimization"},"nextItem":{"title":"\ud83d\udea8 Ph\xe1t hi\u1ec7n Tai n\u1ea1n Giao th\xf4ng v\u1edbi AI","permalink":"/tes/blog/ai-accident-detection"}}')},8453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>s});var i=t(6540);const r={},o=i.createContext(r);function a(n){const e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(o.Provider,{value:e},n.children)}},8805:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var i=t(6790),r=t(4848),o=t(8453);const a={slug:"citizen-reporting-system",title:"\ud83d\udcf1 X\xe2y d\u1ef1ng H\u1ec7 th\u1ed1ng B\xe1o c\xe1o C\xf4ng d\xe2n",authors:["nguyendinhanhtuan"],tags:["uip","citizen-report","api","backend","mobile"]},s="Citizen Reporting - D\xe2n ch\u1ee7 h\xf3a Gi\xe1m s\xe1t Giao th\xf4ng \ud83d\udc65",l={authorsImageUrls:[void 0]},c=[{value:"\ud83c\udfaf T\u1ea7m nh\xecn",id:"-t\u1ea7m-nh\xecn",level:2},{value:"L\u1ee3i \xedch c\u1ee7a Citizen Reports",id:"l\u1ee3i-\xedch-c\u1ee7a-citizen-reports",level:3},{value:"\ud83c\udfd7\ufe0f Ki\u1ebfn tr\xfac h\u1ec7 th\u1ed1ng",id:"\ufe0f-ki\u1ebfn-tr\xfac-h\u1ec7-th\u1ed1ng",level:2},{value:"\ud83d\udcdd Data Model",id:"-data-model",level:2},{value:"TypeScript Interface",id:"typescript-interface",level:3},{value:"NGSI-LD Entity",id:"ngsi-ld-entity",level:3},{value:"\ud83d\udcbb Backend Implementation",id:"-backend-implementation",level:2},{value:"FastAPI Endpoint",id:"fastapi-endpoint",level:3},{value:"Image Processing",id:"image-processing",level:3},{value:"\ud83c\udfa8 Frontend Implementation",id:"-frontend-implementation",level:2},{value:"Report Form Component",id:"report-form-component",level:3},{value:"\ud83d\udcca Verification Workflow",id:"-verification-workflow",level:2},{value:"\ud83d\udcc8 Statistics",id:"-statistics",level:2},{value:"\ud83c\udf93 Key Learnings",id:"-key-learnings",level:2}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.p,{children:["UIP kh\xf4ng ch\u1ec9 d\u1ef1a v\xe0o camera - ch\xfang t\xf4i tin r\u1eb1ng ",(0,r.jsx)(e.strong,{children:"ng\u01b0\u1eddi d\xe2n"})," l\xe0 ngu\u1ed3n th\xf4ng tin qu\xfd gi\xe1 nh\u1ea5t. B\xe0i vi\u1ebft n\xe0y chia s\u1ebb c\xe1ch x\xe2y d\u1ef1ng h\u1ec7 th\u1ed1ng Citizen Reporting."]}),"\n",(0,r.jsx)(e.h2,{id:"-t\u1ea7m-nh\xecn",children:"\ud83c\udfaf T\u1ea7m nh\xecn"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:'"M\u1ed7i ng\u01b0\u1eddi d\xe2n l\xe0 m\u1ed9t sensor di \u0111\u1ed9ng cho th\xe0nh ph\u1ed1 th\xf4ng minh"'}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"l\u1ee3i-\xedch-c\u1ee7a-citizen-reports",children:"L\u1ee3i \xedch c\u1ee7a Citizen Reports"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\ud83d\udccd ",(0,r.jsx)(e.strong,{children:"Ph\u1ee7 s\xf3ng r\u1ed9ng"})," - \u0110\u1ebfn c\u1ea3 n\u01a1i kh\xf4ng c\xf3 camera"]}),"\n",(0,r.jsxs)(e.li,{children:["\ud83d\udd0d ",(0,r.jsx)(e.strong,{children:"Chi ti\u1ebft h\u01a1n"})," - M\xf4 t\u1ea3 ng\u1eef c\u1ea3nh \u0111\u1ea7y \u0111\u1ee7"]}),"\n",(0,r.jsxs)(e.li,{children:["\u26a1 ",(0,r.jsx)(e.strong,{children:"Real-time"})," - B\xe1o c\xe1o ngay l\u1eadp t\u1ee9c"]}),"\n",(0,r.jsxs)(e.li,{children:["\ud83d\udca1 ",(0,r.jsx)(e.strong,{children:"Insight m\u1edbi"})," - Ph\xe1t hi\u1ec7n v\u1ea5n \u0111\u1ec1 ch\u01b0a bi\u1ebft"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\ufe0f-ki\u1ebfn-tr\xfac-h\u1ec7-th\u1ed1ng",children:"\ud83c\udfd7\ufe0f Ki\u1ebfn tr\xfac h\u1ec7 th\u1ed1ng"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Frontend (React)                        \u2502\n\u2502  CitizenReportForm \u2192 CitizenReportMap \u2192 CitizenReportList   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      API Layer (FastAPI)                     \u2502\n\u2502  POST /api/citizen-reports \u2192 Validation \u2192 Processing        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Processing Pipeline                       \u2502\n\u2502  Image Analysis \u2192 Location Verification \u2192 NGSI-LD Transform \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Storage Layer                           \u2502\n\u2502  MongoDB (reports) \u2192 Stellio (NGSI-LD) \u2192 Fuseki (RDF)       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-data-model",children:"\ud83d\udcdd Data Model"}),"\n",(0,r.jsx)(e.h3,{id:"typescript-interface",children:"TypeScript Interface"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:'// types/citizenReport.ts\nexport interface CitizenReport {\n  id: string;\n  type: ReportType;\n  title: string;\n  description: string;\n  location: {\n    type: "Point";\n    coordinates: [number, number]; // [lng, lat]\n    address?: string;\n  };\n  images: string[];\n  severity: "low" | "medium" | "high" | "critical";\n  status: "pending" | "verified" | "resolved" | "rejected";\n  reporter: {\n    name?: string;\n    phone?: string;\n    email?: string;\n    isAnonymous: boolean;\n  };\n  metadata: {\n    submittedAt: string;\n    verifiedAt?: string;\n    resolvedAt?: string;\n    source: "web" | "mobile" | "api";\n    deviceInfo?: string;\n  };\n}\n\nexport enum ReportType {\n  ACCIDENT = "accident",\n  CONGESTION = "congestion",\n  ROAD_DAMAGE = "road_damage",\n  ILLEGAL_PARKING = "illegal_parking",\n  TRAFFIC_LIGHT = "traffic_light",\n  FLOODING = "flooding",\n  OTHER = "other"\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"ngsi-ld-entity",children:"NGSI-LD Entity"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "@context": [\n    "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld"\n  ],\n  "id": "urn:ngsi-ld:CitizenReport:CR2024051501",\n  "type": "CitizenReport",\n  "reportType": {\n    "type": "Property",\n    "value": "accident"\n  },\n  "description": {\n    "type": "Property",\n    "value": "Va ch\u1ea1m gi\u1eefa 2 xe m\xe1y t\u1ea1i ng\xe3 t\u01b0"\n  },\n  "location": {\n    "type": "GeoProperty",\n    "value": {\n      "type": "Point",\n      "coordinates": [106.6885, 10.7626]\n    }\n  },\n  "severity": {\n    "type": "Property",\n    "value": "high"\n  },\n  "status": {\n    "type": "Property",\n    "value": "verified"\n  },\n  "reportedAt": {\n    "type": "Property",\n    "value": "2024-05-15T08:30:00Z"\n  },\n  "refNearbyCamera": {\n    "type": "Relationship",\n    "object": "urn:ngsi-ld:TrafficCamera:CAM045"\n  }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"-backend-implementation",children:"\ud83d\udcbb Backend Implementation"}),"\n",(0,r.jsx)(e.h3,{id:"fastapi-endpoint",children:"FastAPI Endpoint"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'# api/citizen_reports.py\nfrom fastapi import APIRouter, UploadFile, File, Form\nfrom pydantic import BaseModel, validator\n\nrouter = APIRouter(prefix="/api/citizen-reports", tags=["Citizen Reports"])\n\nclass CitizenReportCreate(BaseModel):\n    type: ReportType\n    title: str\n    description: str\n    latitude: float\n    longitude: float\n    severity: Severity\n    reporter_name: Optional[str] = None\n    reporter_phone: Optional[str] = None\n    is_anonymous: bool = False\n    \n    @validator(\'latitude\')\n    def validate_lat(cls, v):\n        if not (10.3 <= v <= 11.2):  # HCMC bounds\n            raise ValueError(\'Location must be in HCMC\')\n        return v\n\n@router.post("/", response_model=CitizenReportResponse)\nasync def create_report(\n    report: CitizenReportCreate,\n    images: List[UploadFile] = File(default=[]),\n    db: MongoDB = Depends(get_db),\n    stellio: StellioClient = Depends(get_stellio)\n):\n    """Submit a new citizen report"""\n    \n    # 1. Validate and process images\n    image_urls = await process_images(images)\n    \n    # 2. Reverse geocode location\n    address = await reverse_geocode(report.latitude, report.longitude)\n    \n    # 3. Find nearby cameras for correlation\n    nearby_cameras = await find_nearby_cameras(\n        report.latitude, \n        report.longitude,\n        radius_meters=500\n    )\n    \n    # 4. Create report document\n    report_doc = {\n        "id": generate_report_id(),\n        "type": report.type.value,\n        "title": report.title,\n        "description": report.description,\n        "location": {\n            "type": "Point",\n            "coordinates": [report.longitude, report.latitude],\n            "address": address\n        },\n        "images": image_urls,\n        "severity": report.severity.value,\n        "status": "pending",\n        "reporter": {\n            "name": report.reporter_name,\n            "phone": report.reporter_phone,\n            "isAnonymous": report.is_anonymous\n        },\n        "nearbyCameras": [cam.id for cam in nearby_cameras],\n        "metadata": {\n            "submittedAt": datetime.utcnow().isoformat(),\n            "source": "web"\n        }\n    }\n    \n    # 5. Store in MongoDB\n    result = await db.citizen_reports.insert_one(report_doc)\n    \n    # 6. Publish to Stellio as NGSI-LD\n    ngsi_entity = transform_to_ngsi_ld(report_doc)\n    await stellio.create_entity(ngsi_entity)\n    \n    # 7. Trigger verification workflow\n    await trigger_verification(report_doc)\n    \n    return CitizenReportResponse(**report_doc)\n'})}),"\n",(0,r.jsx)(e.h3,{id:"image-processing",children:"Image Processing"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'# services/image_processor.py\nfrom PIL import Image\nimport boto3\nfrom io import BytesIO\n\nasync def process_images(files: List[UploadFile]) -> List[str]:\n    """Process and upload images to S3"""\n    urls = []\n    s3 = boto3.client(\'s3\')\n    \n    for file in files:\n        # Read and validate\n        content = await file.read()\n        img = Image.open(BytesIO(content))\n        \n        # Resize if too large\n        max_size = (1920, 1080)\n        img.thumbnail(max_size, Image.LANCZOS)\n        \n        # Strip EXIF (privacy)\n        img_clean = Image.new(img.mode, img.size)\n        img_clean.putdata(list(img.getdata()))\n        \n        # Compress\n        buffer = BytesIO()\n        img_clean.save(buffer, format=\'JPEG\', quality=85)\n        buffer.seek(0)\n        \n        # Upload to S3\n        key = f"citizen-reports/{uuid4()}.jpg"\n        s3.upload_fileobj(\n            buffer,\n            BUCKET_NAME,\n            key,\n            ExtraArgs={\'ContentType\': \'image/jpeg\'}\n        )\n        \n        urls.append(f"https://{BUCKET_NAME}.s3.amazonaws.com/{key}")\n    \n    return urls\n'})}),"\n",(0,r.jsx)(e.h2,{id:"-frontend-implementation",children:"\ud83c\udfa8 Frontend Implementation"}),"\n",(0,r.jsx)(e.h3,{id:"report-form-component",children:"Report Form Component"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-tsx",children:"// components/CitizenReportForm.tsx\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { MapContainer, Marker, useMapEvents } from 'react-leaflet';\n\nconst reportSchema = z.object({\n  type: z.enum(['accident', 'congestion', 'road_damage', ...]),\n  title: z.string().min(10).max(100),\n  description: z.string().min(20).max(1000),\n  severity: z.enum(['low', 'medium', 'high', 'critical']),\n  images: z.array(z.instanceof(File)).max(5),\n  location: z.object({\n    lat: z.number(),\n    lng: z.number()\n  })\n});\n\nexport const CitizenReportForm: React.FC = () => {\n  const [location, setLocation] = useState<LatLng | null>(null);\n  const { register, handleSubmit, formState } = useForm({\n    resolver: zodResolver(reportSchema)\n  });\n  \n  const mutation = useMutation({\n    mutationFn: submitReport,\n    onSuccess: () => {\n      toast.success('B\xe1o c\xe1o \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi th\xe0nh c\xf4ng!');\n      navigate('/reports');\n    }\n  });\n  \n  return (\n    <form onSubmit={handleSubmit(mutation.mutate)} className=\"space-y-6\">\n      {/* Report Type */}\n      <div>\n        <label>Lo\u1ea1i b\xe1o c\xe1o</label>\n        <select {...register('type')} className=\"w-full p-3 border rounded\">\n          <option value=\"accident\">\ud83d\udea8 Tai n\u1ea1n</option>\n          <option value=\"congestion\">\ud83d\ude97 \xd9n t\u1eafc</option>\n          <option value=\"road_damage\">\ud83d\udee3\ufe0f H\u01b0 h\u1ecfng \u0111\u01b0\u1eddng</option>\n          <option value=\"illegal_parking\">\ud83c\udd7f\ufe0f \u0110\u1eadu xe tr\xe1i ph\xe9p</option>\n          <option value=\"flooding\">\ud83c\udf0a Ng\u1eadp n\u01b0\u1edbc</option>\n        </select>\n      </div>\n      \n      {/* Location Picker */}\n      <div>\n        <label>V\u1ecb tr\xed</label>\n        <MapContainer \n          center={[10.7731, 106.7004]} \n          zoom={15}\n          className=\"h-64 rounded\"\n        >\n          <LocationPicker onLocationSelect={setLocation} />\n          {location && <Marker position={location} />}\n        </MapContainer>\n      </div>\n      \n      {/* Image Upload */}\n      <div>\n        <label>H\xecnh \u1ea3nh (t\u1ed1i \u0111a 5)</label>\n        <ImageUploader\n          maxFiles={5}\n          accept=\"image/*\"\n          {...register('images')}\n        />\n      </div>\n      \n      {/* Description */}\n      <div>\n        <label>M\xf4 t\u1ea3 chi ti\u1ebft</label>\n        <textarea \n          {...register('description')}\n          rows={4}\n          placeholder=\"M\xf4 t\u1ea3 t\xecnh hu\u1ed1ng b\u1ea1n g\u1eb7p ph\u1ea3i...\"\n          className=\"w-full p-3 border rounded\"\n        />\n      </div>\n      \n      {/* Severity */}\n      <div>\n        <label>M\u1ee9c \u0111\u1ed9 nghi\xeam tr\u1ecdng</label>\n        <SeveritySelector {...register('severity')} />\n      </div>\n      \n      <button \n        type=\"submit\" \n        disabled={mutation.isPending}\n        className=\"w-full py-3 bg-blue-600 text-white rounded\"\n      >\n        {mutation.isPending ? '\u0110ang g\u1eedi...' : 'G\u1eedi b\xe1o c\xe1o'}\n      </button>\n    </form>\n  );\n};\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-verification-workflow",children:"\ud83d\udcca Verification Workflow"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'# workflows/verify_citizen_report.py\nfrom prefect import flow, task\n\n@flow(name="verify-citizen-report")\nasync def verify_report(report_id: str):\n    """Automatic verification workflow"""\n    \n    # 1. Load report\n    report = await load_report(report_id)\n    \n    # 2. Image analysis\n    image_analysis = await analyze_images(report.images)\n    \n    # 3. Cross-reference with camera data\n    camera_correlation = await correlate_with_cameras(\n        report.location,\n        report.metadata.submittedAt,\n        report.type\n    )\n    \n    # 4. Check for duplicates\n    duplicates = await find_similar_reports(\n        report.location,\n        report.type,\n        time_window_minutes=30\n    )\n    \n    # 5. Calculate confidence score\n    confidence = calculate_confidence(\n        image_analysis,\n        camera_correlation,\n        duplicates\n    )\n    \n    # 6. Auto-verify or queue for manual review\n    if confidence > 0.85:\n        await verify_report(report_id, auto=True)\n    elif confidence > 0.5:\n        await queue_for_review(report_id, priority="normal")\n    else:\n        await queue_for_review(report_id, priority="high")\n    \n    return {\n        "report_id": report_id,\n        "confidence": confidence,\n        "action_taken": "auto_verified" if confidence > 0.85 else "queued"\n    }\n'})}),"\n",(0,r.jsx)(e.h2,{id:"-statistics",children:"\ud83d\udcc8 Statistics"}),"\n",(0,r.jsx)(e.p,{children:"Sau 2 th\xe1ng tri\u1ec3n khai:"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Metric"}),(0,r.jsx)(e.th,{children:"Value"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"T\u1ed5ng b\xe1o c\xe1o"}),(0,r.jsx)(e.td,{children:"2,847"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u0110\xe3 x\xe1c minh"}),(0,r.jsx)(e.td,{children:"2,431 (85%)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Th\u1eddi gian x\xe1c minh TB"}),(0,r.jsx)(e.td,{children:"12 ph\xfat"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"B\xe1o c\xe1o/ng\xe0y"}),(0,r.jsx)(e.td,{children:"~47"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Lo\u1ea1i ph\u1ed5 bi\u1ebfn nh\u1ea5t"}),(0,r.jsx)(e.td,{children:"\xd9n t\u1eafc (42%)"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"-key-learnings",children:"\ud83c\udf93 Key Learnings"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Trust but verify"})," - C\u1ea7n c\u01a1 ch\u1ebf x\xe1c minh t\u1ef1 \u0111\u1ed9ng"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Privacy first"})," - Strip EXIF, allow anonymous"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gamification helps"})," - Reward active reporters"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Mobile-first"})," - 78% b\xe1o c\xe1o t\u1eeb mobile"]}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"B\u1ea1n mu\u1ed1n b\xe1o c\xe1o s\u1ef1 c\u1ed1?"})," Truy c\u1eadp ",(0,r.jsx)(e.a,{href:"/dashboard",children:"Dashboard"})," ngay!"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.em,{children:"Nguy\u1ec5n \u0110\xecnh Anh Tu\u1ea5n - Backend Developer @ UIP Team"})})]})}function p(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}}}]);