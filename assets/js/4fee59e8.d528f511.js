"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[3062],{8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var s=t(6540);const a={},i=s.createContext(a);function r(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:n},e.children)}},8645:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"testing/complete-testing-guide","title":"complete-testing-guide","description":"\x3c!--","source":"@site/docs/testing/complete-testing-guide.md","sourceDirName":"testing","slug":"/testing/complete-testing-guide","permalink":"/tes/docs/testing/complete-testing-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/testing/complete-testing-guide.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"complete-devops-guide","permalink":"/tes/docs/devops/complete-devops-guide"},"next":{"title":"contributing","permalink":"/tes/docs/guides/contributing"}}');var a=t(4848),i=t(8453);const r={},o="Complete Testing & Quality Guide",c={},l=[{value:"Overview",id:"overview",level:2},{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Unit Testing",id:"unit-testing",level:3},{value:"Integration Testing",id:"integration-testing",level:3},{value:"E2E Testing",id:"e2e-testing",level:3},{value:"Performance Testing",id:"performance-testing",level:3},{value:"Code Quality",id:"code-quality",level:3},{value:"CI/CD Integration",id:"cicd-integration",level:3},{value:"Python Unit Tests",id:"python-unit-tests",level:2},{value:"pytest Configuration",id:"pytest-configuration",level:3},{value:"Camera Agent Unit Tests",id:"camera-agent-unit-tests",level:3},{value:"Accident Detection Unit Tests",id:"accident-detection-unit-tests",level:3},{value:"TypeScript Unit Tests",id:"typescript-unit-tests",level:2},{value:"Jest Configuration",id:"jest-configuration",level:3},{value:"Component Unit Tests",id:"component-unit-tests",level:3},{value:"API Hook Tests",id:"api-hook-tests",level:3},{value:"API Integration Tests",id:"api-integration-tests",level:2},{value:"FastAPI Integration Tests",id:"fastapi-integration-tests",level:3},{value:"Database Integration",id:"database-integration",level:2},{value:"MongoDB Integration Tests",id:"mongodb-integration-tests",level:3},{value:"Playwright Setup",id:"playwright-setup",level:2},{value:"Playwright Configuration",id:"playwright-configuration",level:3},{value:"User Workflow Tests",id:"user-workflow-tests",level:3},{value:"Load Testing",id:"load-testing",level:2},{value:"Locust Load Test",id:"locust-load-test",level:3},{value:"Running Load Tests",id:"running-load-tests",level:3},{value:"Linting",id:"linting",level:2},{value:"ESLint Configuration",id:"eslint-configuration",level:3},{value:"Pylint Configuration",id:"pylint-configuration",level:3},{value:"Pre-commit Hooks",id:"pre-commit-hooks",level:2},{value:"Pre-commit Configuration",id:"pre-commit-configuration",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"License",id:"license",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"complete-testing--quality-guide",children:"Complete Testing & Quality Guide"})}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(n.p,{children:"Comprehensive testing strategy for the HCMC Traffic Management System covering unit tests, integration tests, E2E tests, performance testing, and code quality standards."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Testing Stack:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Python"}),": pytest, pytest-cov, pytest-asyncio, pytest-mock, Locust"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"TypeScript/JavaScript"}),": Jest, React Testing Library, Playwright, Cypress"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Code Quality"}),": ESLint, Pylint, Black, Prettier, mypy, SonarQube"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"CI/CD"}),": GitHub Actions, Pre-commit hooks"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,a.jsx)(n.h3,{id:"unit-testing",children:(0,a.jsx)(n.a,{href:"#unit-testing",children:"Unit Testing"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#python-unit-tests",children:"Python Unit Tests"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#typescript-unit-tests",children:"TypeScript Unit Tests"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#test-coverage",children:"Test Coverage"})}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"integration-testing",children:(0,a.jsx)(n.a,{href:"#integration-testing",children:"Integration Testing"})}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#api-integration-tests",children:"API Integration Tests"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#database-integration",children:"Database Integration"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#agent-integration",children:"Agent Integration"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#external-services",children:"External Services"})}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"e2e-testing",children:(0,a.jsx)(n.a,{href:"#e2e-testing",children:"E2E Testing"})}),"\n",(0,a.jsxs)(n.ol,{start:"8",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#playwright-setup",children:"Playwright Setup"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#user-workflows",children:"User Workflows"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#visual-regression",children:"Visual Regression"})}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"performance-testing",children:(0,a.jsx)(n.a,{href:"#performance-testing",children:"Performance Testing"})}),"\n",(0,a.jsxs)(n.ol,{start:"11",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#load-testing",children:"Load Testing"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#stress-testing",children:"Stress Testing"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#database-performance",children:"Database Performance"})}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"code-quality",children:(0,a.jsx)(n.a,{href:"#code-quality",children:"Code Quality"})}),"\n",(0,a.jsxs)(n.ol,{start:"14",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#linting",children:"Linting"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#type-checking",children:"Type Checking"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#code-formatting",children:"Code Formatting"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#security-scanning",children:"Security Scanning"})}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"cicd-integration",children:(0,a.jsx)(n.a,{href:"#cicd-integration",children:"CI/CD Integration"})}),"\n",(0,a.jsxs)(n.ol,{start:"18",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#pre-commit-hooks",children:"Pre-commit Hooks"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#github-actions-testing",children:"GitHub Actions"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#coverage-reporting",children:"Coverage Reporting"})}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h1,{id:"unit-testing-1",children:"Unit Testing"}),"\n",(0,a.jsx)(n.h2,{id:"python-unit-tests",children:"Python Unit Tests"}),"\n",(0,a.jsx)(n.h3,{id:"pytest-configuration",children:"pytest Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ini",children:"# pytest.ini\n[pytest]\ntestpaths = tests\npython_files = test_*.py\npython_classes = Test*\npython_functions = test_*\naddopts = \n    -v\n    --cov=src\n    --cov=agents\n    --cov-report=html\n    --cov-report=term-missing\n    --cov-fail-under=80\n    --asyncio-mode=auto\nmarkers =\n    unit: Unit tests\n    integration: Integration tests\n    slow: Slow running tests\n    gpu: Tests requiring GPU\n"})}),"\n",(0,a.jsx)(n.h3,{id:"camera-agent-unit-tests",children:"Camera Agent Unit Tests"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# tests/unit/agents/test_camera_image_fetch.py\nimport pytest\nfrom unittest.mock import Mock, patch, AsyncMock\nfrom datetime import datetime\nimport cv2\nimport numpy as np\nfrom agents.camera_image_fetch import CameraImageFetchAgent\n\n@pytest.fixture\ndef camera_config():\n    """Fixture for camera configuration."""\n    return {\n        "id": "CAM_001",\n        "name": "Camera District 1",\n        "stream_url": "rtsp://example.com/stream1",\n        "location": {"lat": 10.7769, "lon": 106.7009}\n    }\n\n@pytest.fixture\ndef mock_redis():\n    """Mock Redis client."""\n    redis_mock = Mock()\n    redis_mock.get = Mock(return_value=None)\n    redis_mock.setex = Mock(return_value=True)\n    return redis_mock\n\n@pytest.fixture\ndef camera_agent(camera_config, mock_redis):\n    """Create camera agent instance."""\n    agent = CameraImageFetchAgent(config=camera_config)\n    agent.redis_client = mock_redis\n    return agent\n\nclass TestCameraImageFetchAgent:\n    """Test suite for Camera Image Fetch Agent."""\n    \n    def test_initialization(self, camera_agent, camera_config):\n        """Test agent initialization."""\n        assert camera_agent.camera_id == "CAM_001"\n        assert camera_agent.stream_url == camera_config["stream_url"]\n        assert camera_agent.location == camera_config["location"]\n    \n    @pytest.mark.asyncio\n    async def test_fetch_image_success(self, camera_agent):\n        """Test successful image fetching."""\n        # Create dummy image\n        dummy_image = np.zeros((480, 640, 3), dtype=np.uint8)\n        \n        with patch(\'cv2.VideoCapture\') as mock_cap:\n            mock_cap.return_value.read.return_value = (True, dummy_image)\n            mock_cap.return_value.release = Mock()\n            \n            result = await camera_agent.fetch_image()\n            \n            assert result is not None\n            assert result["camera_id"] == "CAM_001"\n            assert result["timestamp"] is not None\n            assert isinstance(result["image"], np.ndarray)\n    \n    @pytest.mark.asyncio\n    async def test_fetch_image_failure(self, camera_agent):\n        """Test image fetch failure handling."""\n        with patch(\'cv2.VideoCapture\') as mock_cap:\n            mock_cap.return_value.read.return_value = (False, None)\n            \n            result = await camera_agent.fetch_image()\n            \n            assert result is None\n    \n    def test_cache_hit(self, camera_agent, mock_redis):\n        """Test cache retrieval."""\n        cached_data = b\'cached_image_data\'\n        mock_redis.get.return_value = cached_data\n        \n        result = camera_agent.get_cached_image()\n        \n        assert result == cached_data\n        mock_redis.get.assert_called_once()\n    \n    def test_cache_miss(self, camera_agent, mock_redis):\n        """Test cache miss scenario."""\n        mock_redis.get.return_value = None\n        \n        result = camera_agent.get_cached_image()\n        \n        assert result is None\n    \n    @pytest.mark.parametrize("quality,expected_size", [\n        (50, 5000),\n        (75, 10000),\n        (100, 20000)\n    ])\n    def test_image_compression(self, camera_agent, quality, expected_size):\n        """Test image compression with different quality levels."""\n        dummy_image = np.zeros((480, 640, 3), dtype=np.uint8)\n        \n        compressed = camera_agent.compress_image(dummy_image, quality)\n        \n        assert len(compressed) > 0\n        assert len(compressed) < expected_size\n'})}),"\n",(0,a.jsx)(n.h3,{id:"accident-detection-unit-tests",children:"Accident Detection Unit Tests"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# tests/unit/agents/test_accident_detection.py\nimport pytest\nfrom unittest.mock import Mock, patch\nimport numpy as np\nfrom agents.accident_detection import AccidentDetectionAgent\n\n@pytest.fixture\ndef yolo_model_mock():\n    """Mock YOLOX model."""\n    model = Mock()\n    model.predict = Mock(return_value=[Mock(boxes=Mock(xyxy=np.array([[100, 100, 200, 200]])))])\n    return model\n\n@pytest.fixture\ndef detection_agent(yolo_model_mock):\n    """Create accident detection agent with YOLOX."""\n    # Using YOLOX model - mock the exp.get_model() call\n    with patch(\'yolox.exp.get_exp\') as mock_get_exp:\n        mock_get_exp.return_value.get_model.return_value = yolo_model_mock\n        agent = AccidentDetectionAgent()\n    return agent\n\nclass TestAccidentDetectionAgent:\n    """Test suite for Accident Detection Agent."""\n    \n    def test_initialization(self, detection_agent):\n        """Test agent initialization."""\n        assert detection_agent.model is not None\n        assert detection_agent.confidence_threshold == 0.5\n    \n    def test_detect_accident_positive(self, detection_agent):\n        """Test accident detection with positive result."""\n        dummy_image = np.zeros((480, 640, 3), dtype=np.uint8)\n        \n        result = detection_agent.detect(dummy_image)\n        \n        assert result is not None\n        assert "accident_detected" in result\n        assert result["accident_detected"] is True\n        assert "confidence" in result\n    \n    def test_detect_accident_negative(self, detection_agent, yolo_model_mock):\n        """Test no accident detected."""\n        yolo_model_mock.predict.return_value = [Mock(boxes=Mock(xyxy=np.array([])))]\n        dummy_image = np.zeros((480, 640, 3), dtype=np.uint8)\n        \n        result = detection_agent.detect(dummy_image)\n        \n        assert result["accident_detected"] is False\n    \n    @pytest.mark.parametrize("confidence,should_detect", [\n        (0.3, False),\n        (0.5, True),\n        (0.8, True),\n        (0.95, True)\n    ])\n    def test_confidence_threshold(self, detection_agent, confidence, should_detect):\n        """Test confidence threshold filtering."""\n        detection_agent.confidence_threshold = 0.5\n        \n        result = detection_agent._filter_by_confidence(confidence)\n        \n        assert result == should_detect\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"typescript-unit-tests",children:"TypeScript Unit Tests"}),"\n",(0,a.jsx)(n.h3,{id:"jest-configuration",children:"Jest Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// jest.config.js\nmodule.exports = {\n  preset: 'ts-jest',\n  testEnvironment: 'jsdom',\n  roots: ['<rootDir>/src'],\n  testMatch: ['**/__tests__/**/*.ts?(x)', '**/?(*.)+(spec|test).ts?(x)'],\n  transform: {\n    '^.+\\\\.tsx?$': 'ts-jest',\n  },\n  collectCoverageFrom: [\n    'src/**/*.{ts,tsx}',\n    '!src/**/*.d.ts',\n    '!src/index.tsx',\n    '!src/**/*.stories.tsx'\n  ],\n  coverageThreshold: {\n    global: {\n      branches: 80,\n      functions: 80,\n      lines: 80,\n      statements: 80\n    }\n  },\n  setupFilesAfterEnv: ['<rootDir>/src/setupTests.ts'],\n  moduleNameMapper: {\n    '\\\\.(css|less|scss|sass)$': 'identity-obj-proxy',\n    '\\\\.(jpg|jpeg|png|gif|svg)$': '<rootDir>/__mocks__/fileMock.js'\n  }\n};\n"})}),"\n",(0,a.jsx)(n.h3,{id:"component-unit-tests",children:"Component Unit Tests"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// src/components/__tests__/TrafficMap.test.tsx\nimport React from 'react';\nimport { render, screen, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { TrafficMap } from '../TrafficMap';\nimport '@testing-library/jest-dom';\n\n// Mock Leaflet\njest.mock('react-leaflet', () => ({\n  MapContainer: ({ children }: any) => <div data-testid=\"map-container\">{children}</div>,\n  TileLayer: () => <div data-testid=\"tile-layer\" />,\n  Marker: ({ children }: any) => <div data-testid=\"marker\">{children}</div>,\n  Popup: ({ children }: any) => <div data-testid=\"popup\">{children}</div>,\n}));\n\ndescribe('TrafficMap Component', () => {\n  const mockCameras = [\n    {\n      id: 'CAM_001',\n      name: 'Camera 1',\n      location: { lat: 10.7769, lon: 106.7009 },\n      status: 'active'\n    },\n    {\n      id: 'CAM_002',\n      name: 'Camera 2',\n      location: { lat: 10.7800, lon: 106.7100 },\n      status: 'inactive'\n    }\n  ];\n  \n  const mockAccidents = [\n    {\n      id: 'ACC_001',\n      location: { lat: 10.7750, lon: 106.7050 },\n      severity: 'severe',\n      timestamp: new Date().toISOString()\n    }\n  ];\n  \n  it('renders map container', () => {\n    render(<TrafficMap cameras={mockCameras} accidents={[]} />);\n    \n    expect(screen.getByTestId('map-container')).toBeInTheDocument();\n    expect(screen.getByTestId('tile-layer')).toBeInTheDocument();\n  });\n  \n  it('displays camera markers', () => {\n    render(<TrafficMap cameras={mockCameras} accidents={[]} />);\n    \n    const markers = screen.getAllByTestId('marker');\n    expect(markers).toHaveLength(2);\n  });\n  \n  it('displays accident markers', () => {\n    render(<TrafficMap cameras={[]} accidents={mockAccidents} />);\n    \n    const markers = screen.getAllByTestId('marker');\n    expect(markers).toHaveLength(1);\n  });\n  \n  it('filters cameras by status', async () => {\n    const { rerender } = render(\n      <TrafficMap cameras={mockCameras} accidents={[]} filterStatus=\"active\" />\n    );\n    \n    let markers = screen.getAllByTestId('marker');\n    expect(markers).toHaveLength(1);\n    \n    rerender(<TrafficMap cameras={mockCameras} accidents={[]} filterStatus=\"all\" />);\n    \n    markers = screen.getAllByTestId('marker');\n    expect(markers).toHaveLength(2);\n  });\n  \n  it('calls onCameraClick when camera is clicked', async () => {\n    const handleCameraClick = jest.fn();\n    const user = userEvent.setup();\n    \n    render(\n      <TrafficMap \n        cameras={mockCameras} \n        accidents={[]} \n        onCameraClick={handleCameraClick} \n      />\n    );\n    \n    const marker = screen.getAllByTestId('marker')[0];\n    await user.click(marker);\n    \n    expect(handleCameraClick).toHaveBeenCalledWith('CAM_001');\n  });\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"api-hook-tests",children:"API Hook Tests"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// src/hooks/__tests__/useCameras.test.ts\nimport { renderHook, waitFor } from '@testing-library/react';\nimport { rest } from 'msw';\nimport { setupServer } from 'msw/node';\nimport { useCameras } from '../useCameras';\n\nconst server = setupServer(\n  rest.get('/api/cameras', (req, res, ctx) => {\n    return res(\n      ctx.json({\n        data: [\n          { id: 'CAM_001', name: 'Camera 1', status: 'active' },\n          { id: 'CAM_002', name: 'Camera 2', status: 'active' }\n        ]\n      })\n    );\n  })\n);\n\nbeforeAll(() => server.listen());\nafterEach(() => server.resetHandlers());\nafterAll(() => server.close());\n\ndescribe('useCameras Hook', () => {\n  it('fetches cameras successfully', async () => {\n    const { result } = renderHook(() => useCameras());\n    \n    expect(result.current.loading).toBe(true);\n    \n    await waitFor(() => {\n      expect(result.current.loading).toBe(false);\n    });\n    \n    expect(result.current.cameras).toHaveLength(2);\n    expect(result.current.error).toBeNull();\n  });\n  \n  it('handles fetch error', async () => {\n    server.use(\n      rest.get('/api/cameras', (req, res, ctx) => {\n        return res(ctx.status(500), ctx.json({ error: 'Server error' }));\n      })\n    );\n    \n    const { result } = renderHook(() => useCameras());\n    \n    await waitFor(() => {\n      expect(result.current.loading).toBe(false);\n    });\n    \n    expect(result.current.cameras).toHaveLength(0);\n    expect(result.current.error).not.toBeNull();\n  });\n});\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h1,{id:"integration-testing-1",children:"Integration Testing"}),"\n",(0,a.jsx)(n.h2,{id:"api-integration-tests",children:"API Integration Tests"}),"\n",(0,a.jsx)(n.h3,{id:"fastapi-integration-tests",children:"FastAPI Integration Tests"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# tests/integration/test_api_integration.py\nimport pytest\nfrom httpx import AsyncClient\nfrom src.main import app\n\n@pytest.mark.integration\n@pytest.mark.asyncio\nasync def test_camera_list_endpoint():\n    """Test camera list API endpoint."""\n    async with AsyncClient(app=app, base_url="http://test") as client:\n        response = await client.get("/api/cameras")\n        \n        assert response.status_code == 200\n        data = response.json()\n        assert "data" in data\n        assert isinstance(data["data"], list)\n\n@pytest.mark.integration\n@pytest.mark.asyncio\nasync def test_camera_details_endpoint():\n    """Test camera details endpoint."""\n    async with AsyncClient(app=app, base_url="http://test") as client:\n        response = await client.get("/api/cameras/CAM_001")\n        \n        assert response.status_code == 200\n        data = response.json()\n        assert data["id"] == "CAM_001"\n        assert "name" in data\n        assert "location" in data\n\n@pytest.mark.integration\n@pytest.mark.asyncio\nasync def test_accident_report_creation():\n    """Test creating accident report."""\n    accident_data = {\n        "location": {"lat": 10.7769, "lon": 106.7009},\n        "severity": "moderate",\n        "description": "Two vehicle collision",\n        "camera_id": "CAM_001"\n    }\n    \n    async with AsyncClient(app=app, base_url="http://test") as client:\n        response = await client.post("/api/accidents", json=accident_data)\n        \n        assert response.status_code == 201\n        data = response.json()\n        assert data["severity"] == "moderate"\n        assert "id" in data\n\n@pytest.mark.integration\n@pytest.mark.asyncio\nasync def test_authentication_flow():\n    """Test authentication workflow."""\n    async with AsyncClient(app=app, base_url="http://test") as client:\n        # Login\n        login_response = await client.post(\n            "/api/auth/login",\n            json={"username": "testuser", "password": "testpass"}\n        )\n        assert login_response.status_code == 200\n        tokens = login_response.json()\n        assert "access_token" in tokens\n        \n        # Access protected endpoint\n        headers = {"Authorization": f"Bearer {tokens[\'access_token\']}"}\n        protected_response = await client.get("/api/user/profile", headers=headers)\n        assert protected_response.status_code == 200\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"database-integration",children:"Database Integration"}),"\n",(0,a.jsx)(n.h3,{id:"mongodb-integration-tests",children:"MongoDB Integration Tests"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# tests/integration/test_mongodb_integration.py\nimport pytest\nfrom motor.motor_asyncio import AsyncIOMotorClient\nfrom datetime import datetime\n\n@pytest.fixture\nasync def mongo_client():\n    """Create MongoDB test client."""\n    client = AsyncIOMotorClient("mongodb://localhost:27017")\n    db = client.test_traffic_db\n    yield db\n    await client.drop_database("test_traffic_db")\n    client.close()\n\n@pytest.mark.integration\n@pytest.mark.asyncio\nasync def test_insert_camera_data(mongo_client):\n    """Test inserting camera data."""\n    camera_data = {\n        "id": "CAM_TEST_001",\n        "name": "Test Camera",\n        "location": {"lat": 10.7769, "lon": 106.7009},\n        "status": "active",\n        "created_at": datetime.utcnow()\n    }\n    \n    result = await mongo_client.cameras.insert_one(camera_data)\n    assert result.inserted_id is not None\n    \n    # Verify insertion\n    found = await mongo_client.cameras.find_one({"id": "CAM_TEST_001"})\n    assert found["name"] == "Test Camera"\n\n@pytest.mark.integration\n@pytest.mark.asyncio\nasync def test_query_accidents_by_severity(mongo_client):\n    """Test querying accidents by severity."""\n    accidents = [\n        {"id": "ACC_001", "severity": "minor", "location": {"lat": 10.77, "lon": 106.70}},\n        {"id": "ACC_002", "severity": "severe", "location": {"lat": 10.78, "lon": 106.71}},\n        {"id": "ACC_003", "severity": "moderate", "location": {"lat": 10.79, "lon": 106.72}}\n    ]\n    \n    await mongo_client.accidents.insert_many(accidents)\n    \n    # Query severe accidents\n    severe_accidents = await mongo_client.accidents.find({"severity": "severe"}).to_list(length=100)\n    assert len(severe_accidents) == 1\n    assert severe_accidents[0]["id"] == "ACC_002"\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h1,{id:"e2e-testing-1",children:"E2E Testing"}),"\n",(0,a.jsx)(n.h2,{id:"playwright-setup",children:"Playwright Setup"}),"\n",(0,a.jsx)(n.h3,{id:"playwright-configuration",children:"Playwright Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// playwright.config.ts\nimport { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  testDir: './e2e',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: [\n    ['html'],\n    ['junit', { outputFile: 'test-results/junit.xml' }]\n  ],\n  use: {\n    baseURL: 'http://localhost:3000',\n    trace: 'on-first-retry',\n    screenshot: 'only-on-failure',\n  },\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n    },\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n    },\n    {\n      name: 'Mobile Chrome',\n      use: { ...devices['Pixel 5'] },\n    },\n  ],\n  webServer: {\n    command: 'npm run start',\n    url: 'http://localhost:3000',\n    reuseExistingServer: !process.env.CI,\n  },\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"user-workflow-tests",children:"User Workflow Tests"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// e2e/citizen-report.spec.ts\nimport { test, expect } from '@playwright/test';\n\ntest.describe('Citizen Report Workflow', () => {\n  test.beforeEach(async ({ page }) => {\n    await page.goto('/');\n  });\n  \n  test('user submits accident report', async ({ page }) => {\n    // Navigate to report page\n    await page.click('button:has-text(\"Report Accident\")');\n    await expect(page).toHaveURL('/report');\n    \n    // Fill form\n    await page.fill('input[name=\"location\"]', '10.7769, 106.7009');\n    await page.selectOption('select[name=\"severity\"]', 'moderate');\n    await page.fill('textarea[name=\"description\"]', 'Two car collision at intersection');\n    \n    // Upload image\n    await page.setInputFiles('input[type=\"file\"]', 'test-data/accident-image.jpg');\n    \n    // Submit\n    await page.click('button:has-text(\"Submit Report\")');\n    \n    // Verify success\n    await expect(page.locator('.success-message')).toBeVisible();\n    await expect(page.locator('.success-message')).toContainText('Report submitted successfully');\n  });\n  \n  test('displays real-time accident alerts', async ({ page }) => {\n    await page.goto('/map');\n    \n    // Wait for map to load\n    await page.waitForSelector('.leaflet-container');\n    \n    // Trigger accident (simulate WebSocket message)\n    await page.evaluate(() => {\n      window.dispatchEvent(new CustomEvent('accident-alert', {\n        detail: {\n          id: 'ACC_TEST_001',\n          severity: 'severe',\n          location: { lat: 10.7769, lon: 106.7009 }\n        }\n      }));\n    });\n    \n    // Verify alert appears\n    await expect(page.locator('.accident-alert')).toBeVisible();\n    await expect(page.locator('.accident-alert')).toContainText('severe');\n  });\n  \n  test('filters cameras by district', async ({ page }) => {\n    await page.goto('/cameras');\n    \n    // Wait for cameras to load\n    await page.waitForSelector('.camera-card');\n    \n    const initialCount = await page.locator('.camera-card').count();\n    \n    // Apply district filter\n    await page.selectOption('select[name=\"district\"]', 'District 1');\n    \n    // Verify filtered results\n    const filteredCount = await page.locator('.camera-card').count();\n    expect(filteredCount).toBeLessThan(initialCount);\n    \n    // Verify all visible cameras are in District 1\n    const districts = await page.locator('.camera-card .district').allTextContents();\n    districts.forEach(district => {\n      expect(district).toContain('District 1');\n    });\n  });\n});\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h1,{id:"performance-testing-1",children:"Performance Testing"}),"\n",(0,a.jsx)(n.h2,{id:"load-testing",children:"Load Testing"}),"\n",(0,a.jsx)(n.h3,{id:"locust-load-test",children:"Locust Load Test"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# tests/performance/locustfile.py\nfrom locust import HttpUser, task, between\n\nclass TrafficSystemUser(HttpUser):\n    """Simulate user behavior for load testing."""\n    \n    wait_time = between(1, 3)\n    \n    def on_start(self):\n        """Login before tests."""\n        response = self.client.post("/api/auth/login", json={\n            "username": "loadtest_user",\n            "password": "loadtest_pass"\n        })\n        self.token = response.json()["access_token"]\n        self.headers = {"Authorization": f"Bearer {self.token}"}\n    \n    @task(3)\n    def view_cameras(self):\n        """View camera list (most common operation)."""\n        self.client.get("/api/cameras", headers=self.headers)\n    \n    @task(2)\n    def view_accidents(self):\n        """View accident list."""\n        self.client.get("/api/accidents", headers=self.headers)\n    \n    @task(1)\n    def view_traffic_flow(self):\n        """View traffic flow data."""\n        self.client.get("/api/traffic/flow", headers=self.headers)\n    \n    @task(1)\n    def view_camera_details(self):\n        """View specific camera details."""\n        self.client.get("/api/cameras/CAM_001", headers=self.headers)\n    \n    @task(1)\n    def submit_citizen_report(self):\n        """Submit citizen report."""\n        report_data = {\n            "location": {"lat": 10.7769, "lon": 106.7009},\n            "severity": "moderate",\n            "description": "Test report from load testing"\n        }\n        self.client.post("/api/citizen-reports", json=report_data, headers=self.headers)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"running-load-tests",children:"Running Load Tests"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Run load test with 100 users\nlocust -f tests/performance/locustfile.py --host=http://localhost:8000 --users 100 --spawn-rate 10\n\n# Run headless with specific duration\nlocust -f tests/performance/locustfile.py --host=http://localhost:8000 \\\n    --users 1000 --spawn-rate 50 --run-time 10m --headless\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h1,{id:"code-quality-1",children:"Code Quality"}),"\n",(0,a.jsx)(n.h2,{id:"linting",children:"Linting"}),"\n",(0,a.jsx)(n.h3,{id:"eslint-configuration",children:"ESLint Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// .eslintrc.js\nmodule.exports = {\n  extends: [\n    'react-app',\n    'react-app/jest',\n    'plugin:@typescript-eslint/recommended',\n    'plugin:react-hooks/recommended',\n    'prettier'\n  ],\n  parser: '@typescript-eslint/parser',\n  parserOptions: {\n    ecmaVersion: 2021,\n    sourceType: 'module',\n    ecmaFeatures: {\n      jsx: true\n    }\n  },\n  rules: {\n    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],\n    '@typescript-eslint/explicit-module-boundary-types': 'off',\n    'react-hooks/rules-of-hooks': 'error',\n    'react-hooks/exhaustive-deps': 'warn',\n    'no-console': ['warn', { allow: ['warn', 'error'] }]\n  }\n};\n"})}),"\n",(0,a.jsx)(n.h3,{id:"pylint-configuration",children:"Pylint Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ini",children:"# .pylintrc\n[MASTER]\nmax-line-length=120\ndisable=\n    C0111,  # missing-docstring\n    R0903,  # too-few-public-methods\n    R0913,  # too-many-arguments\n\n[TYPECHECK]\ngenerated-members=cv2.*,torch.*\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"pre-commit-hooks",children:"Pre-commit Hooks"}),"\n",(0,a.jsx)(n.h3,{id:"pre-commit-configuration",children:"Pre-commit Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# .pre-commit-config.yaml\nrepos:\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.4.0\n    hooks:\n      - id: trailing-whitespace\n      - id: end-of-file-fixer\n      - id: check-yaml\n      - id: check-json\n      - id: check-added-large-files\n        args: ['--maxkb=1000']\n  \n  - repo: https://github.com/psf/black\n    rev: 23.3.0\n    hooks:\n      - id: black\n        language_version: python3.9\n  \n  - repo: https://github.com/pycqa/isort\n    rev: 5.12.0\n    hooks:\n      - id: isort\n        args: [\"--profile\", \"black\"]\n  \n  - repo: https://github.com/pycqa/flake8\n    rev: 6.0.0\n    hooks:\n      - id: flake8\n        args: ['--max-line-length=120']\n  \n  - repo: https://github.com/pre-commit/mirrors-mypy\n    rev: v1.3.0\n    hooks:\n      - id: mypy\n        additional_dependencies: [types-all]\n  \n  - repo: https://github.com/pre-commit/mirrors-prettier\n    rev: v3.0.0\n    hooks:\n      - id: prettier\n        types_or: [javascript, jsx, ts, tsx, json, css, markdown]\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/tes/docs/agents/complete-agents-reference",children:"Complete Agents Reference"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/tes/docs/frontend/complete-components-reference",children:"Complete Components Reference"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/tes/docs/api/complete-api-reference",children:"Complete API Reference"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/tes/docs/devops/complete-devops-guide",children:"Complete DevOps Guide"})}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,a.jsx)(n.p,{children:"MIT License - Copyright (c) 2025 UIP Contributors (Nguy\u1ec5n Nh\u1eadt Quang, Nguy\u1ec5n Vi\u1ec7t Ho\xe0ng, Nguy\u1ec5n \u0110\xecnh Anh Tu\u1ea5n)"}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"../LICENSE",children:"LICENSE"})," for details."]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);