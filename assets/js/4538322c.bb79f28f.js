"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[2513],{6135:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"agents/transformation/ngsi-ld-transformer","title":"ngsi-ld-transformer","description":"\x3c!--","source":"@site/docs/agents/transformation/ngsi-ld-transformer.md","sourceDirName":"agents/transformation","slug":"/agents/transformation/ngsi-ld-transformer","permalink":"/tes/docs/agents/transformation/ngsi-ld-transformer","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/transformation/ngsi-ld-transformer.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"image-refresh","permalink":"/tes/docs/agents/data-collection/image-refresh"},"next":{"title":"sosa-ssn-mapper","permalink":"/tes/docs/agents/transformation/sosa-ssn-mapper"}}');var a=t(4848),r=t(8453);const s={},l="NGSI-LD Transformer Agent",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Usage",id:"usage",level:2},{value:"Basic Entity Transformation",id:"basic-entity-transformation",level:3},{value:"Batch Transformation",id:"batch-transformation",level:3},{value:"Custom Property Mapping",id:"custom-property-mapping",level:3},{value:"Relationship Establishment",id:"relationship-establishment",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Class: <code>NGSILDTransformerAgent</code>",id:"class-ngsildtransformeragent",level:3},{value:"Methods",id:"methods",level:4},{value:"<code>transform_to_ngsi_ld(data: dict, entity_type: str, custom_mappings: dict = None) -&gt; dict</code>",id:"transform_to_ngsi_lddata-dict-entity_type-str-custom_mappings-dict--none---dict",level:5},{value:"<code>batch_transform(data_list: List[dict], entity_type: str, parallel: bool = False) -&gt; List[dict]</code>",id:"batch_transformdata_list-listdict-entity_type-str-parallel-bool--false---listdict",level:5},{value:"<code>validate_entity(entity: dict) -&gt; ValidationResult</code>",id:"validate_entityentity-dict---validationresult",level:5},{value:"<code>add_temporal_property(entity: dict, property_name: str, value: any, observed_at: str) -&gt; dict</code>",id:"add_temporal_propertyentity-dict-property_name-str-value-any-observed_at-str---dict",level:5},{value:"<code>build_relationship(source_entity: dict, target_entity_id: str, relationship_name: str) -&gt; dict</code>",id:"build_relationshipsource_entity-dict-target_entity_id-str-relationship_name-str---dict",level:5},{value:"Data Models",id:"data-models",level:3},{value:"<code>ValidationResult</code>",id:"validationresult",level:4},{value:"Supported Entity Types",id:"supported-entity-types",level:2},{value:"1. TrafficFlowObserved",id:"1-trafficflowobserved",level:3},{value:"2. Device (Camera)",id:"2-device-camera",level:3},{value:"3. Alert (Accident)",id:"3-alert-accident",level:3},{value:"4. WeatherObserved",id:"4-weatherobserved",level:3},{value:"5. AirQualityObserved",id:"5-airqualityobserved",level:3},{value:"NGSI-LD Property Types",id:"ngsi-ld-property-types",level:2},{value:"GeoProperty",id:"geoproperty",level:3},{value:"Property",id:"property",level:3},{value:"Relationship",id:"relationship",level:3},{value:"Integration Examples",id:"integration-examples",level:2},{value:"Integration with Stellio Context Broker",id:"integration-with-stellio-context-broker",level:3},{value:"Integration with Data Quality Validator",id:"integration-with-data-quality-validator",level:3},{value:"Integration with Temporal Data Manager",id:"integration-with-temporal-data-manager",level:3},{value:"Monitoring &amp; Metrics",id:"monitoring--metrics",level:2},{value:"Health Check",id:"health-check",level:3},{value:"Transformation Metrics",id:"transformation-metrics",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Parallel Processing",id:"parallel-processing",level:3},{value:"Schema Caching",id:"schema-caching",level:3},{value:"Context Preloading",id:"context-preloading",level:3},{value:"Testing",id:"testing",level:2},{value:"Unit Tests",id:"unit-tests",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Validate Entities",id:"1-always-validate-entities",level:3},{value:"2. Use Proper URN Format",id:"2-use-proper-urn-format",level:3},{value:"3. Include @context",id:"3-include-context",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: Validation Failures",id:"issue-validation-failures",level:3},{value:"Issue: Slow Transformation",id:"issue-slow-transformation",level:3},{value:"Issue: Context Loading Errors",id:"issue-context-loading-errors",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"License",id:"license",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"ngsi-ld-transformer-agent",children:"NGSI-LD Transformer Agent"})}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(n.p,{children:"The NGSI-LD Transformer Agent converts raw traffic data into NGSI-LD compliant entities following FIWARE Smart Data Models standards, enabling semantic interoperability and context-aware data integration across the smart city platform."}),"\n",(0,a.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Smart Data Models Compliance"}),": Full adherence to FIWARE Smart Data Models"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Multi-Entity Support"}),": Transform 15+ entity types (TrafficFlowObserved, RoadSegment, Vehicle, etc.)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Context Management"}),": Handle @context and vocabulary mappings"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Relationship Building"}),": Establish semantic relationships between entities"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Batch Processing"}),": Transform thousands of entities efficiently"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Validation"}),": Schema validation and constraint checking"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mermaid",children:"graph TB\n    A[Raw Traffic Data] --\x3e B[Data Normalizer]\n    B --\x3e C[NGSI-LD Transformer]\n    C --\x3e D{Entity Type}\n    D --\x3e|TrafficFlowObserved| E[Traffic Flow Mapper]\n    D --\x3e|Camera| F[Device Mapper]\n    D --\x3e|Accident| G[Alert Mapper]\n    E --\x3e H[Context Builder]\n    F --\x3e H\n    G --\x3e H\n    H --\x3e I[Validator]\n    I --\x3e J{Valid?}\n    J --\x3e|Yes| K[Stellio Publisher]\n    J --\x3e|No| L[Error Handler]\n    K --\x3e M[Context Broker]\n"})}),"\n",(0,a.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"File"}),": ",(0,a.jsx)(n.code,{children:"config/ngsi_ld_mappings.yaml"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'ngsi_ld:\n  context:\n    default: "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld"\n    traffic: "https://raw.githubusercontent.com/smart-data-models/dataModel.Transportation/master/context.jsonld"\n    \n  entity_types:\n    traffic_flow:\n      type: "TrafficFlowObserved"\n      id_prefix: "urn:ngsi-ld:TrafficFlowObserved:"\n      required_properties:\n        - "location"\n        - "dateObserved"\n        - "intensity"\n        \n    camera:\n      type: "Device"\n      id_prefix: "urn:ngsi-ld:Device:Camera:"\n      required_properties:\n        - "location"\n        - "deviceState"\n        \n    accident:\n      type: "Alert"\n      id_prefix: "urn:ngsi-ld:Alert:Accident:"\n      required_properties:\n        - "location"\n        - "alertSource"\n        - "severity"\n        \n  property_mappings:\n    timestamp: "dateObserved"\n    vehicle_count: "intensity"\n    avg_speed: "averageVehicleSpeed"\n    occupancy: "occupancy"\n    \n  relationship_mappings:\n    camera_id: "refDevice"\n    zone_id: "refRoadSegment"\n    \n  validation:\n    strict_mode: true\n    allow_additional_properties: false\n    validate_context: true\n'})}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(n.h3,{id:"basic-entity-transformation",children:"Basic Entity Transformation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from src.agents.transformation.ngsi_ld_transformer_agent import NGSILDTransformerAgent\n\n# Initialize agent\nagent = NGSILDTransformerAgent()\n\n# Transform traffic flow data\nraw_data = {\n    "camera_id": "CAM_001",\n    "timestamp": "2024-01-15T10:30:00Z",\n    "vehicle_count": 45,\n    "avg_speed": 35.5,\n    "location": {"lat": 10.7769, "lon": 106.7009}\n}\n\nentity = agent.transform_to_ngsi_ld(\n    data=raw_data,\n    entity_type="TrafficFlowObserved"\n)\n\nprint(json.dumps(entity, indent=2))\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Output:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "id": "urn:ngsi-ld:TrafficFlowObserved:CAM_001:20240115T103000Z",\n  "type": "TrafficFlowObserved",\n  "@context": [\n    "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",\n    "https://raw.githubusercontent.com/smart-data-models/dataModel.Transportation/master/context.jsonld"\n  ],\n  "location": {\n    "type": "GeoProperty",\n    "value": {\n      "type": "Point",\n      "coordinates": [106.7009, 10.7769]\n    }\n  },\n  "dateObserved": {\n    "type": "Property",\n    "value": "2024-01-15T10:30:00Z"\n  },\n  "intensity": {\n    "type": "Property",\n    "value": 45\n  },\n  "averageVehicleSpeed": {\n    "type": "Property",\n    "value": 35.5,\n    "unitCode": "KMH"\n  },\n  "refDevice": {\n    "type": "Relationship",\n    "object": "urn:ngsi-ld:Device:Camera:CAM_001"\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"batch-transformation",children:"Batch Transformation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Transform multiple entities\nraw_records = [\n    {"camera_id": "CAM_001", "vehicle_count": 45, ...},\n    {"camera_id": "CAM_002", "vehicle_count": 62, ...},\n    {"camera_id": "CAM_003", "vehicle_count": 38, ...}\n]\n\nentities = agent.batch_transform(\n    data_list=raw_records,\n    entity_type="TrafficFlowObserved",\n    parallel=True\n)\n\nprint(f"Transformed {len(entities)} entities")\n'})}),"\n",(0,a.jsx)(n.h3,{id:"custom-property-mapping",children:"Custom Property Mapping"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Define custom mappings\ncustom_mappings = {\n    "congestion_level": "laneOccupancy",\n    "flow_rate": "intensity",\n    "density": "vehicleDensity"\n}\n\nentity = agent.transform_to_ngsi_ld(\n    data=raw_data,\n    entity_type="TrafficFlowObserved",\n    custom_mappings=custom_mappings\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"relationship-establishment",children:"Relationship Establishment"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Create entity with relationships\naccident_entity = agent.transform_to_ngsi_ld(\n    data={\n        "accident_id": "ACC_001",\n        "severity": "high",\n        "location": {"lat": 10.7769, "lon": 106.7009},\n        "camera_id": "CAM_001",\n        "zone_id": "ZONE_D1"\n    },\n    entity_type="Alert",\n    relationships={\n        "refDevice": "urn:ngsi-ld:Device:Camera:CAM_001",\n        "refRoadSegment": "urn:ngsi-ld:RoadSegment:ZONE_D1"\n    }\n)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,a.jsxs)(n.h3,{id:"class-ngsildtransformeragent",children:["Class: ",(0,a.jsx)(n.code,{children:"NGSILDTransformerAgent"})]}),"\n",(0,a.jsx)(n.h4,{id:"methods",children:"Methods"}),"\n",(0,a.jsx)(n.h5,{id:"transform_to_ngsi_lddata-dict-entity_type-str-custom_mappings-dict--none---dict",children:(0,a.jsx)(n.code,{children:"transform_to_ngsi_ld(data: dict, entity_type: str, custom_mappings: dict = None) -> dict"})}),"\n",(0,a.jsx)(n.p,{children:"Transform raw data to NGSI-LD entity."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"data"})," (dict): Raw input data"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"entity_type"})," (str): Target NGSI-LD entity type"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"custom_mappings"})," (dict, optional): Custom property mappings"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"dict: NGSI-LD compliant entity"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Example:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'entity = agent.transform_to_ngsi_ld(\n    data=raw_data,\n    entity_type="TrafficFlowObserved"\n)\n'})}),"\n",(0,a.jsx)(n.h5,{id:"batch_transformdata_list-listdict-entity_type-str-parallel-bool--false---listdict",children:(0,a.jsx)(n.code,{children:"batch_transform(data_list: List[dict], entity_type: str, parallel: bool = False) -> List[dict]"})}),"\n",(0,a.jsx)(n.p,{children:"Transform multiple entities in batch."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"data_list"})," (List[dict]): List of raw data records"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"entity_type"})," (str): Target entity type"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"parallel"})," (bool): Enable parallel processing"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"List[dict]: List of NGSI-LD entities"}),"\n"]}),"\n",(0,a.jsx)(n.h5,{id:"validate_entityentity-dict---validationresult",children:(0,a.jsx)(n.code,{children:"validate_entity(entity: dict) -> ValidationResult"})}),"\n",(0,a.jsx)(n.p,{children:"Validate NGSI-LD entity against schema."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"entity"})," (dict): NGSI-LD entity to validate"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"ValidationResult: Validation outcome"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Example:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'validation = agent.validate_entity(entity)\nif not validation.is_valid:\n    print(f"Validation errors: {validation.errors}")\n'})}),"\n",(0,a.jsx)(n.h5,{id:"add_temporal_propertyentity-dict-property_name-str-value-any-observed_at-str---dict",children:(0,a.jsx)(n.code,{children:"add_temporal_property(entity: dict, property_name: str, value: any, observed_at: str) -> dict"})}),"\n",(0,a.jsx)(n.p,{children:"Add temporal property to entity."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"entity"})," (dict): NGSI-LD entity"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"property_name"})," (str): Property name"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"value"})," (any): Property value"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"observed_at"})," (str): Observation timestamp (ISO 8601)"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"dict: Updated entity"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Example:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'entity = agent.add_temporal_property(\n    entity=entity,\n    property_name="temperature",\n    value=28.5,\n    observed_at="2024-01-15T10:30:00Z"\n)\n'})}),"\n",(0,a.jsx)(n.h5,{id:"build_relationshipsource_entity-dict-target_entity_id-str-relationship_name-str---dict",children:(0,a.jsx)(n.code,{children:"build_relationship(source_entity: dict, target_entity_id: str, relationship_name: str) -> dict"})}),"\n",(0,a.jsx)(n.p,{children:"Build relationship between entities."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"source_entity"})," (dict): Source entity"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"target_entity_id"})," (str): Target entity URN"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"relationship_name"})," (str): Relationship type"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"dict: Updated entity with relationship"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"data-models",children:"Data Models"}),"\n",(0,a.jsx)(n.h4,{id:"validationresult",children:(0,a.jsx)(n.code,{children:"ValidationResult"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"@dataclass\nclass ValidationResult:\n    is_valid: bool\n    errors: List[str]\n    warnings: List[str]\n    entity_type: str\n    schema_version: str\n"})}),"\n",(0,a.jsx)(n.h2,{id:"supported-entity-types",children:"Supported Entity Types"}),"\n",(0,a.jsx)(n.h3,{id:"1-trafficflowobserved",children:"1. TrafficFlowObserved"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'traffic_flow = agent.transform_to_ngsi_ld(\n    data={\n        "camera_id": "CAM_001",\n        "timestamp": "2024-01-15T10:30:00Z",\n        "vehicle_count": 45,\n        "avg_speed": 35.5,\n        "occupancy": 0.65,\n        "location": {"lat": 10.7769, "lon": 106.7009}\n    },\n    entity_type="TrafficFlowObserved"\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"2-device-camera",children:"2. Device (Camera)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'camera = agent.transform_to_ngsi_ld(\n    data={\n        "camera_id": "CAM_001",\n        "name": "District 1 Camera",\n        "status": "active",\n        "location": {"lat": 10.7769, "lon": 106.7009}\n    },\n    entity_type="Device"\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"3-alert-accident",children:"3. Alert (Accident)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'alert = agent.transform_to_ngsi_ld(\n    data={\n        "accident_id": "ACC_001",\n        "severity": "high",\n        "description": "Multi-vehicle collision",\n        "location": {"lat": 10.7769, "lon": 106.7009}\n    },\n    entity_type="Alert"\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"4-weatherobserved",children:"4. WeatherObserved"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'weather = agent.transform_to_ngsi_ld(\n    data={\n        "temperature": 28.5,\n        "humidity": 75,\n        "precipitation": 0,\n        "wind_speed": 15,\n        "location": {"lat": 10.7769, "lon": 106.7009}\n    },\n    entity_type="WeatherObserved"\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"5-airqualityobserved",children:"5. AirQualityObserved"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'air_quality = agent.transform_to_ngsi_ld(\n    data={\n        "aqi": 85,\n        "pm25": 35.5,\n        "pm10": 60,\n        "location": {"lat": 10.7769, "lon": 106.7009}\n    },\n    entity_type="AirQualityObserved"\n)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"ngsi-ld-property-types",children:"NGSI-LD Property Types"}),"\n",(0,a.jsx)(n.h3,{id:"geoproperty",children:"GeoProperty"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Location property\n"location": {\n    "type": "GeoProperty",\n    "value": {\n        "type": "Point",\n        "coordinates": [106.7009, 10.7769]  # [lon, lat]\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"property",children:"Property"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Simple property\n"intensity": {\n    "type": "Property",\n    "value": 45\n}\n\n# Property with unit\n"averageVehicleSpeed": {\n    "type": "Property",\n    "value": 35.5,\n    "unitCode": "KMH"\n}\n\n# Property with metadata\n"temperature": {\n    "type": "Property",\n    "value": 28.5,\n    "unitCode": "CEL",\n    "observedAt": "2024-01-15T10:30:00Z"\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"relationship",children:"Relationship"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Entity relationship\n"refDevice": {\n    "type": "Relationship",\n    "object": "urn:ngsi-ld:Device:Camera:CAM_001"\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,a.jsx)(n.h3,{id:"integration-with-stellio-context-broker",children:"Integration with Stellio Context Broker"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from src.agents.context_management.entity_publisher_agent import EntityPublisherAgent\n\ntransformer = NGSILDTransformerAgent()\npublisher = EntityPublisherAgent()\n\n# Transform and publish\nentity = transformer.transform_to_ngsi_ld(raw_data, "TrafficFlowObserved")\npublisher.publish_entity(entity)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"integration-with-data-quality-validator",children:"Integration with Data Quality Validator"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from src.agents.monitoring.data_quality_validator_agent import DataQualityValidatorAgent\n\nvalidator = DataQualityValidatorAgent()\n\n# Validate before transformation\nquality_check = validator.validate_data(raw_data)\n\nif quality_check.is_valid:\n    entity = agent.transform_to_ngsi_ld(raw_data, "TrafficFlowObserved")\n'})}),"\n",(0,a.jsx)(n.h3,{id:"integration-with-temporal-data-manager",children:"Integration with Temporal Data Manager"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from src.agents.context_management.temporal_data_manager_agent import TemporalDataManagerAgent\n\ntemporal_manager = TemporalDataManagerAgent()\n\n# Transform with temporal properties\nentity = agent.transform_to_ngsi_ld(raw_data, "TrafficFlowObserved")\ntemporal_manager.store_temporal_entity(entity)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"monitoring--metrics",children:"Monitoring & Metrics"}),"\n",(0,a.jsx)(n.h3,{id:"health-check",children:"Health Check"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'health = agent.health_check()\nprint(f"Status: {health.status}")\nprint(f"Entities Transformed Today: {health.entities_transformed}")\nprint(f"Validation Success Rate: {health.validation_success_rate}%")\nprint(f"Average Transformation Time: {health.avg_transform_time}ms")\n'})}),"\n",(0,a.jsx)(n.h3,{id:"transformation-metrics",children:"Transformation Metrics"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'metrics = agent.get_metrics(time_range="24h")\n\nprint(f"Total Transformations: {metrics.total}")\nprint(f"Success Rate: {metrics.success_rate}%")\nprint(f"Entity Type Distribution: {metrics.entity_type_dist}")\nprint(f"Validation Errors: {metrics.validation_errors}")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,a.jsx)(n.h3,{id:"parallel-processing",children:"Parallel Processing"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# Enable parallel batch transformation\nagent.configure_parallel_processing(\n    num_workers=8,\n    batch_size=100\n)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"schema-caching",children:"Schema Caching"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# Cache schemas for faster validation\nagent.enable_schema_caching(\n    cache_ttl=3600,\n    cache_size=100\n)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"context-preloading",children:"Context Preloading"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Preload JSON-LD contexts\nagent.preload_contexts([\n    "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",\n    "https://raw.githubusercontent.com/smart-data-models/dataModel.Transportation/master/context.jsonld"\n])\n'})}),"\n",(0,a.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,a.jsx)(n.h3,{id:"unit-tests",children:"Unit Tests"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'import pytest\n\ndef test_traffic_flow_transformation():\n    agent = NGSILDTransformerAgent()\n    \n    raw_data = {\n        "camera_id": "CAM_TEST",\n        "timestamp": "2024-01-15T10:30:00Z",\n        "vehicle_count": 45,\n        "avg_speed": 35.5\n    }\n    \n    entity = agent.transform_to_ngsi_ld(raw_data, "TrafficFlowObserved")\n    \n    assert entity["type"] == "TrafficFlowObserved"\n    assert "location" in entity\n    assert entity["intensity"]["value"] == 45\n\ndef test_validation():\n    agent = NGSILDTransformerAgent()\n    \n    # Valid entity\n    valid_entity = {...}\n    result = agent.validate_entity(valid_entity)\n    assert result.is_valid == True\n    \n    # Invalid entity (missing required property)\n    invalid_entity = {"type": "TrafficFlowObserved"}\n    result = agent.validate_entity(invalid_entity)\n    assert result.is_valid == False\n    assert len(result.errors) > 0\n'})}),"\n",(0,a.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsx)(n.h3,{id:"1-always-validate-entities",children:"1. Always Validate Entities"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'entity = agent.transform_to_ngsi_ld(raw_data, "TrafficFlowObserved")\nvalidation = agent.validate_entity(entity)\n\nif not validation.is_valid:\n    logger.error(f"Validation failed: {validation.errors}")\n    return None\n'})}),"\n",(0,a.jsx)(n.h3,{id:"2-use-proper-urn-format",children:"2. Use Proper URN Format"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Correct URN format\n"id": "urn:ngsi-ld:TrafficFlowObserved:CAM_001:20240115T103000Z"\n\n# Include entity type, identifier, and timestamp\n'})}),"\n",(0,a.jsx)(n.h3,{id:"3-include-context",children:"3. Include @context"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Always include context for semantic interoperability\n"@context": [\n    "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",\n    "https://raw.githubusercontent.com/smart-data-models/dataModel.Transportation/master/context.jsonld"\n]\n'})}),"\n",(0,a.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(n.h3,{id:"issue-validation-failures",children:"Issue: Validation Failures"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Solution"}),": Check schema compliance and required properties"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'validation = agent.validate_entity(entity)\nfor error in validation.errors:\n    print(f"Error: {error}")\n'})}),"\n",(0,a.jsx)(n.h3,{id:"issue-slow-transformation",children:"Issue: Slow Transformation"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Solution"}),": Enable parallel processing and caching"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"agent.configure_parallel_processing(num_workers=8)\nagent.enable_schema_caching(cache_ttl=3600)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"issue-context-loading-errors",children:"Issue: Context Loading Errors"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Solution"}),": Use local context files as fallback"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'agent.configure_context_loading(\n    use_local_fallback=True,\n    local_context_path="config/contexts/"\n)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/tes/docs/agents/context-management/entity-publisher",children:"Entity Publisher Agent"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/tes/docs/agents/transformation/sosa-ssn-mapper",children:"SOSA/SSN Mapper Agent"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/tes/docs/agents/rdf-linked-data/smart-data-models-validation",children:"Smart Data Models Validation"})}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,a.jsx)(n.p,{children:"MIT License - Copyright (c) 2025 UIP Contributors (Nguy\u1ec5n Nh\u1eadt Quang, Nguy\u1ec5n Vi\u1ec7t Ho\xe0ng, Nguy\u1ec5n \u0110\xecnh Anh Tu\u1ea5n)"}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"../LICENSE",children:"LICENSE"})," for details."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var i=t(6540);const a={},r=i.createContext(a);function s(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);