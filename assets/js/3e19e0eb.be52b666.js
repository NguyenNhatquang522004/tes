"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[8343],{2688:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"agents/analytics/accident-detection","title":"accident-detection","description":"\x3c!--","source":"@site/docs/agents/analytics/accident-detection.md","sourceDirName":"agents/analytics","slug":"/agents/analytics/accident-detection","permalink":"/tes/docs/agents/analytics/accident-detection","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/analytics/accident-detection.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"complete-agents-reference","permalink":"/tes/docs/agents/complete-agents-reference"},"next":{"title":"congestion-detection","permalink":"/tes/docs/agents/analytics/congestion-detection"}}');var s=t(4848),r=t(8453);const a={},c="Accident Detection Agent",l={},o=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Usage",id:"usage",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Real-time Stream Processing",id:"real-time-stream-processing",level:3},{value:"Severity Assessment",id:"severity-assessment",level:3},{value:"Multi-Camera Monitoring",id:"multi-camera-monitoring",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Class: <code>AccidentDetectionAgent</code>",id:"class-accidentdetectionagent",level:3},{value:"Methods",id:"methods",level:4},{value:"<code>detect_accident(camera_id: str, image: np.ndarray) -&gt; DetectionResult</code>",id:"detect_accidentcamera_id-str-image-npndarray---detectionresult",level:5},{value:"<code>assess_severity(detection_result: DetectionResult, factors: dict) -&gt; SeverityAssessment</code>",id:"assess_severitydetection_result-detectionresult-factors-dict---severityassessment",level:5},{value:"<code>trigger_emergency_response(result: DetectionResult) -&gt; ResponseStatus</code>",id:"trigger_emergency_responseresult-detectionresult---responsestatus",level:5},{value:"<code>get_accident_history(time_range: str, location: str = None) -&gt; List[AccidentRecord]</code>",id:"get_accident_historytime_range-str-location-str--none---listaccidentrecord",level:5},{value:"Data Models",id:"data-models",level:3},{value:"<code>DetectionResult</code>",id:"detectionresult",level:4},{value:"<code>SeverityAssessment</code>",id:"severityassessment",level:4},{value:"<code>ResponseStatus</code>",id:"responsestatus",level:4},{value:"Detection Pipeline",id:"detection-pipeline",level:2},{value:"1. Image Preprocessing",id:"1-image-preprocessing",level:3},{value:"2. YOLOX Inference",id:"2-yolox-inference",level:3},{value:"3. Temporal Validation",id:"3-temporal-validation",level:3},{value:"4. Severity Classification",id:"4-severity-classification",level:3},{value:"Integration Examples",id:"integration-examples",level:2},{value:"Integration with Alert Dispatcher",id:"integration-with-alert-dispatcher",level:3},{value:"Integration with NGSI-LD",id:"integration-with-ngsi-ld",level:3},{value:"Integration with Pattern Recognition",id:"integration-with-pattern-recognition",level:3},{value:"Monitoring &amp; Metrics",id:"monitoring--metrics",level:2},{value:"Health Check",id:"health-check",level:3},{value:"Performance Metrics",id:"performance-metrics",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"GPU Acceleration",id:"gpu-acceleration",level:3},{value:"Model Optimization",id:"model-optimization",level:3},{value:"Multi-threaded Processing",id:"multi-threaded-processing",level:3},{value:"Testing",id:"testing",level:2},{value:"Unit Tests",id:"unit-tests",level:3},{value:"Integration Tests",id:"integration-tests",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Temporal Validation",id:"1-temporal-validation",level:3},{value:"2. Confidence Thresholding",id:"2-confidence-thresholding",level:3},{value:"3. Resource Management",id:"3-resource-management",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: High False Positive Rate",id:"issue-high-false-positive-rate",level:3},{value:"Issue: Slow Detection Speed",id:"issue-slow-detection-speed",level:3},{value:"Issue: Missing Detections",id:"issue-missing-detections",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"License",id:"license",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"accident-detection-agent",children:"Accident Detection Agent"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The Accident Detection Agent uses YOLOX-X computer vision model to analyze camera feeds in real-time, detecting traffic accidents, classifying severity levels, and triggering immediate response workflows."}),"\n",(0,s.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time Detection"}),": YOLOX-X-based accident detection from camera streams"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Severity Classification"}),": 4-level severity system (minor, moderate, severe, critical)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multi-Camera Processing"}),": Parallel processing of 50+ camera feeds"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Incident Verification"}),": False positive reduction through temporal analysis"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Automated Response"}),": Immediate alert dispatch and emergency services notification"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Historical Analysis"}),": Accident pattern identification and hotspot mapping"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph TB\n    A[Camera Feeds] --\x3e B[Image Preprocessor]\n    B --\x3e C[YOLOX-X Model]\n    C --\x3e D[Accident Detector]\n    D --\x3e E{Detected?}\n    E --\x3e|Yes| F[Severity Classifier]\n    E --\x3e|No| A\n    F --\x3e G[Temporal Validator]\n    G --\x3e H{Confirmed?}\n    H --\x3e|Yes| I[Alert Dispatcher]\n    H --\x3e|No| A\n    I --\x3e J[Emergency Services]\n    I --\x3e K[NGSI-LD Publisher]\n    K --\x3e L[Stellio Context Broker]\n    G --\x3e M[MongoDB Storage]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File"}),": ",(0,s.jsx)(n.code,{children:"config/accident_config.yaml"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'accident_detection:\n  model:\n    type: "yolox_x"\n    weights: "yolox_x.pt"\n    confidence_threshold: 0.65\n    device: "cuda"  # cuda, mps, cpu\n    \n  detection_classes:\n    - "accident"\n    - "collision"\n    - "overturned_vehicle"\n    - "fire"\n    - "debris"\n    \n  severity_rules:\n    minor:\n      conditions:\n        - vehicle_count: 1-2\n        - lane_blockage: "partial"\n        - smoke_detected: false\n        - fire_detected: false\n      response_time: 15  # minutes\n      \n    moderate:\n      conditions:\n        - vehicle_count: 2-3\n        - lane_blockage: "full"\n        - injuries_possible: true\n      response_time: 10\n      \n    severe:\n      conditions:\n        - vehicle_count: ">3"\n        - multiple_lanes: true\n        - fire_detected: true\n        - heavy_smoke: true\n      response_time: 5\n      \n    critical:\n      conditions:\n        - fire_detected: true\n        - explosion_detected: true\n        - highway_closure: true\n        - mass_casualty: true\n      response_time: 2\n      \n  temporal_validation:\n    enabled: true\n    min_consecutive_frames: 3\n    time_window: 5  # seconds\n    \n  alert_dispatch:\n    immediate_severity: ["severe", "critical"]\n    notification_channels: ["email", "sms", "webhook"]\n    emergency_services_api: "https://emergency.hcmc.gov.vn/api"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from src.agents.analytics.accident_detection_agent import AccidentDetectionAgent\n\n# Initialize agent\nagent = AccidentDetectionAgent()\n\n# Process camera image\nresult = agent.detect_accident(\n    camera_id="CAM_001",\n    image_path="traffic_cam_001.jpg"\n)\n\nif result.accident_detected:\n    print(f"Accident detected!")\n    print(f"Severity: {result.severity}")\n    print(f"Confidence: {result.confidence}")\n    print(f"Location: {result.location}")\n    print(f"Vehicles Involved: {result.vehicle_count}")\n'})}),"\n",(0,s.jsx)(n.h3,{id:"real-time-stream-processing",children:"Real-time Stream Processing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Process real-time camera streams\ndef process_camera_stream(camera_id):\n    agent = AccidentDetectionAgent()\n    \n    for frame in camera_stream(camera_id):\n        result = agent.detect_accident(\n            camera_id=camera_id,\n            image=frame\n        )\n        \n        if result.accident_detected:\n            # Trigger immediate response\n            agent.trigger_emergency_response(result)\n            break\n"})}),"\n",(0,s.jsx)(n.h3,{id:"severity-assessment",children:"Severity Assessment"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Detailed severity analysis\nseverity_analysis = agent.assess_severity(\n    detection_result=result,\n    factors={\n        "vehicle_count": 3,\n        "lane_blockage": "full",\n        "fire_detected": True,\n        "time_of_day": "rush_hour",\n        "weather_conditions": "heavy_rain"\n    }\n)\n\nprint(f"Severity Score: {severity_analysis.score}/100")\nprint(f"Classification: {severity_analysis.level}")\nprint(f"Response Priority: {severity_analysis.priority}")\nprint(f"Estimated Response Time: {severity_analysis.est_response_time}min")\n'})}),"\n",(0,s.jsx)(n.h3,{id:"multi-camera-monitoring",children:"Multi-Camera Monitoring"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Monitor multiple cameras concurrently\ncameras = ["CAM_001", "CAM_002", "CAM_003", "CAM_004"]\n\nagent.monitor_cameras(\n    camera_ids=cameras,\n    callback=handle_accident_detection,\n    parallel=True\n)\n\ndef handle_accident_detection(result):\n    print(f"Accident at {result.camera_id}: {result.severity}")\n    # Dispatch emergency services\n    dispatch_response(result)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsxs)(n.h3,{id:"class-accidentdetectionagent",children:["Class: ",(0,s.jsx)(n.code,{children:"AccidentDetectionAgent"})]}),"\n",(0,s.jsx)(n.h4,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(n.h5,{id:"detect_accidentcamera_id-str-image-npndarray---detectionresult",children:(0,s.jsx)(n.code,{children:"detect_accident(camera_id: str, image: np.ndarray) -> DetectionResult"})}),"\n",(0,s.jsx)(n.p,{children:"Detect accident in camera image."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"camera_id"})," (str): Camera identifier"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"image"})," (np.ndarray): Image frame (BGR format)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"DetectionResult: Detection information"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'result = agent.detect_accident(\n    camera_id="CAM_001",\n    image=cv2.imread("frame.jpg")\n)\n'})}),"\n",(0,s.jsx)(n.h5,{id:"assess_severitydetection_result-detectionresult-factors-dict---severityassessment",children:(0,s.jsx)(n.code,{children:"assess_severity(detection_result: DetectionResult, factors: dict) -> SeverityAssessment"})}),"\n",(0,s.jsx)(n.p,{children:"Calculate accident severity."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"detection_result"})," (DetectionResult): Detection result object"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"factors"})," (dict): Additional factors (weather, time, traffic)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"SeverityAssessment: Severity analysis"}),"\n"]}),"\n",(0,s.jsx)(n.h5,{id:"trigger_emergency_responseresult-detectionresult---responsestatus",children:(0,s.jsx)(n.code,{children:"trigger_emergency_response(result: DetectionResult) -> ResponseStatus"})}),"\n",(0,s.jsx)(n.p,{children:"Initiate emergency response workflow."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"result"})," (DetectionResult): Accident detection result"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ResponseStatus: Response dispatch status"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'response = agent.trigger_emergency_response(result)\nprint(f"Emergency services notified: {response.agencies}")\nprint(f"Estimated arrival: {response.eta} minutes")\n'})}),"\n",(0,s.jsx)(n.h5,{id:"get_accident_historytime_range-str-location-str--none---listaccidentrecord",children:(0,s.jsx)(n.code,{children:"get_accident_history(time_range: str, location: str = None) -> List[AccidentRecord]"})}),"\n",(0,s.jsx)(n.p,{children:"Retrieve historical accident data."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"time_range"}),' (str): Time range (e.g., "7d", "30d", "1y")']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"location"})," (str, optional): Filter by location"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"List[AccidentRecord]: Historical accidents"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"data-models",children:"Data Models"}),"\n",(0,s.jsx)(n.h4,{id:"detectionresult",children:(0,s.jsx)(n.code,{children:"DetectionResult"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"@dataclass\nclass DetectionResult:\n    timestamp: datetime\n    camera_id: str\n    accident_detected: bool\n    confidence: float              # 0.0-1.0\n    severity: str                  # minor, moderate, severe, critical\n    location: dict\n    bounding_boxes: List[dict]     # Vehicle/object bounding boxes\n    vehicle_count: int\n    lane_blockage: str             # none, partial, full\n    fire_detected: bool\n    smoke_detected: bool\n    image_path: str\n    metadata: dict\n"})}),"\n",(0,s.jsx)(n.h4,{id:"severityassessment",children:(0,s.jsx)(n.code,{children:"SeverityAssessment"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"@dataclass\nclass SeverityAssessment:\n    level: str                     # minor, moderate, severe, critical\n    score: int                     # 0-100\n    priority: int                  # 1-5\n    factors: dict\n    est_response_time: int         # minutes\n    recommended_resources: List[str]\n    affected_area: dict\n    traffic_impact: str\n"})}),"\n",(0,s.jsx)(n.h4,{id:"responsestatus",children:(0,s.jsx)(n.code,{children:"ResponseStatus"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"@dataclass\nclass ResponseStatus:\n    response_id: str\n    agencies_notified: List[str]   # police, fire, ambulance, etc.\n    eta: int                       # minutes\n    status: str                    # dispatched, en_route, on_scene\n    resources_deployed: List[str]\n    updates: List[dict]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"detection-pipeline",children:"Detection Pipeline"}),"\n",(0,s.jsx)(n.h3,{id:"1-image-preprocessing",children:"1. Image Preprocessing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Preprocessing configuration\nagent.configure_preprocessing(\n    resize=(640, 640),\n    normalize=True,\n    augment=False  # Disable for real-time\n)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-yolox-inference",children:"2. YOLOX Inference"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Model inference settings\nagent.configure_model(\n    confidence_threshold=0.65,\n    iou_threshold=0.45,\n    max_detections=100\n)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-temporal-validation",children:"3. Temporal Validation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Reduce false positives through temporal analysis\nagent.enable_temporal_validation(\n    min_consecutive_frames=3,\n    time_window_seconds=5\n)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-severity-classification",children:"4. Severity Classification"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Multi-factor severity assessment\nseverity = agent.classify_severity(\n    detection=detection_result,\n    context={\n        "traffic_density": high,\n        "weather": "heavy_rain",\n        "time": "rush_hour",\n        "road_type": "highway"\n    }\n)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,s.jsx)(n.h3,{id:"integration-with-alert-dispatcher",children:"Integration with Alert Dispatcher"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from src.agents.notification.alert_dispatcher_agent import AlertDispatcherAgent\n\naccident_agent = AccidentDetectionAgent()\nalert_agent = AlertDispatcherAgent()\n\ndef handle_accident(detection):\n    if detection.severity in ["severe", "critical"]:\n        # Immediate alert\n        alert_agent.dispatch_alert(\n            type="ACCIDENT_CRITICAL",\n            location=detection.location,\n            severity=detection.severity,\n            image_url=detection.image_path\n        )\n'})}),"\n",(0,s.jsx)(n.h3,{id:"integration-with-ngsi-ld",children:"Integration with NGSI-LD"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Publish accident as NGSI-LD entity\naccident_entity = {\n    "id": f"urn:ngsi-ld:Accident:{result.id}",\n    "type": "Accident",\n    "location": {\n        "type": "GeoProperty",\n        "value": {\n            "type": "Point",\n            "coordinates": [result.location.lon, result.location.lat]\n        }\n    },\n    "severity": {\n        "type": "Property",\n        "value": result.severity\n    },\n    "detectedAt": {\n        "type": "Property",\n        "value": result.timestamp.isoformat()\n    },\n    "cameraId": {\n        "type": "Relationship",\n        "object": f"urn:ngsi-ld:Camera:{result.camera_id}"\n    }\n}\n\nagent.publish_to_context_broker(accident_entity)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"integration-with-pattern-recognition",children:"Integration with Pattern Recognition"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from src.agents.analytics.pattern_recognition_agent import PatternRecognitionAgent\n\npattern_agent = PatternRecognitionAgent()\n\n# Analyze accident patterns\npatterns = pattern_agent.analyze_accident_patterns(\n    time_range="30d",\n    location="District 1"\n)\n\nprint(f"Accident hotspots: {patterns.hotspots}")\nprint(f"Peak hours: {patterns.peak_hours}")\nprint(f"Common factors: {patterns.factors}")\n'})}),"\n",(0,s.jsx)(n.h2,{id:"monitoring--metrics",children:"Monitoring & Metrics"}),"\n",(0,s.jsx)(n.h3,{id:"health-check",children:"Health Check"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'health = agent.health_check()\nprint(f"Status: {health.status}")\nprint(f"Model Loaded: {health.model_loaded}")\nprint(f"Cameras Monitored: {health.active_cameras}")\nprint(f"Detection Rate: {health.detections_per_hour}")\nprint(f"False Positive Rate: {health.false_positive_rate}%")\n'})}),"\n",(0,s.jsx)(n.h3,{id:"performance-metrics",children:"Performance Metrics"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'metrics = agent.get_metrics(time_range="24h")\n\nprint(f"Total Detections: {metrics.total_detections}")\nprint(f"True Positives: {metrics.true_positives}")\nprint(f"False Positives: {metrics.false_positives}")\nprint(f"Average Confidence: {metrics.avg_confidence}")\nprint(f"Average Response Time: {metrics.avg_response_time}s")\n'})}),"\n",(0,s.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"gpu-acceleration",children:"GPU Acceleration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Enable GPU processing\nagent.configure_device(\n    device="cuda",\n    batch_size=8,\n    precision="fp16"  # Half-precision for speed\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"model-optimization",children:"Model Optimization"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Use TensorRT for faster inference\nagent.export_optimized_model(\n    format="tensorrt",\n    dynamic_axes=False\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"multi-threaded-processing",children:"Multi-threaded Processing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Process multiple cameras in parallel\nagent.configure_parallel_processing(\n    num_workers=4,\n    queue_size=100\n)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,s.jsx)(n.h3,{id:"unit-tests",children:"Unit Tests"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import pytest\n\ndef test_accident_detection():\n    agent = AccidentDetectionAgent()\n    \n    # Test with known accident image\n    image = cv2.imread("test_data/accident_image.jpg")\n    result = agent.detect_accident("CAM_TEST", image)\n    \n    assert result.accident_detected == True\n    assert result.confidence > 0.65\n    assert result.severity in ["minor", "moderate", "severe", "critical"]\n\ndef test_severity_classification():\n    agent = AccidentDetectionAgent()\n    \n    # Test severity rules\n    severity = agent.classify_severity(\n        vehicle_count=4,\n        lane_blockage="full",\n        fire_detected=True\n    )\n    \n    assert severity.level == "severe"\n    assert severity.priority >= 4\n'})}),"\n",(0,s.jsx)(n.h3,{id:"integration-tests",children:"Integration Tests"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def test_end_to_end_detection():\n    agent = AccidentDetectionAgent()\n    \n    # Simulate accident detection workflow\n    result = agent.detect_accident("CAM_001", test_image)\n    \n    if result.accident_detected:\n        response = agent.trigger_emergency_response(result)\n        assert response.agencies_notified is not None\n        assert response.eta > 0\n'})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"1-temporal-validation",children:"1. Temporal Validation"}),"\n",(0,s.jsx)(n.p,{children:"Always enable temporal validation to reduce false positives:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"agent.enable_temporal_validation(min_frames=3)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-confidence-thresholding",children:"2. Confidence Thresholding"}),"\n",(0,s.jsx)(n.p,{children:"Adjust confidence threshold based on severity:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"agent.set_adaptive_threshold(\n    minor=0.70,\n    moderate=0.65,\n    severe=0.60,\n    critical=0.55\n)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-resource-management",children:"3. Resource Management"}),"\n",(0,s.jsx)(n.p,{children:"Clean up resources properly:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"with AccidentDetectionAgent() as agent:\n    result = agent.detect_accident(camera_id, image)\n# Automatic cleanup\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"issue-high-false-positive-rate",children:"Issue: High False Positive Rate"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Increase confidence threshold and enable temporal validation"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"agent.configure_model(confidence_threshold=0.75)\nagent.enable_temporal_validation(min_consecutive_frames=5)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"issue-slow-detection-speed",children:"Issue: Slow Detection Speed"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Enable GPU acceleration and reduce image resolution"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'agent.configure_device(device="cuda", precision="fp16")\nagent.configure_preprocessing(resize=(416, 416))\n'})}),"\n",(0,s.jsx)(n.h3,{id:"issue-missing-detections",children:"Issue: Missing Detections"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Lower confidence threshold and check camera quality"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"agent.configure_model(confidence_threshold=0.55)\nagent.enable_image_quality_check(min_quality=0.6)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/tes/docs/agents/analytics/pattern-recognition",children:"Pattern Recognition Agent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/tes/docs/agents/notification/alert-dispatcher",children:"Alert Dispatcher Agent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/tes/docs/agents/data-collection/camera-image-fetch",children:"Camera Image Fetch Agent"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,s.jsx)(n.p,{children:"MIT License - Copyright (c) 2025 UIP Contributors (Nguy\u1ec5n Nh\u1eadt Quang, Nguy\u1ec5n Vi\u1ec7t Ho\xe0ng, Nguy\u1ec5n \u0110\xecnh Anh Tu\u1ea5n)"}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"../LICENSE",children:"LICENSE"})," for details."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var i=t(6540);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);