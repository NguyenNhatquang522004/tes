"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[213],{8453:(e,r,s)=>{s.d(r,{R:()=>d,x:()=>l});var n=s(6540);const i={},t=n.createContext(i);function d(e){const r=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),n.createElement(t.Provider,{value:r},e.children)}},9632:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"backend/routes/routes-overview","title":"API Routes Overview","description":"Complete overview of all 12 API route modules in the UIP Traffic Backend with endpoints, methods, and usage examples.","source":"@site/docs/backend/routes/overview.md","sourceDirName":"backend/routes","slug":"/backend/routes/routes-overview","permalink":"/tes/docs/backend/routes/routes-overview","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/backend/routes/overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"routes-overview","title":"API Routes Overview","sidebar_label":"Overview","sidebar_position":1,"description":"Complete overview of all 12 API route modules in the UIP Traffic Backend with endpoints, methods, and usage examples.","keywords":["api","routes","rest","endpoints","express","overview"]}}');var i=s(4848),t=s(8453);const d={id:"routes-overview",title:"API Routes Overview",sidebar_label:"Overview",sidebar_position:1,description:"Complete overview of all 12 API route modules in the UIP Traffic Backend with endpoints, methods, and usage examples.",keywords:["api","routes","rest","endpoints","express","overview"]},l="API Routes Overview",c={},a=[{value:"Route Architecture",id:"route-architecture",level:2},{value:"Route Summary",id:"route-summary",level:2},{value:"Common Query Parameters",id:"common-query-parameters",level:2},{value:"Pagination",id:"pagination",level:3},{value:"Geo-Spatial",id:"geo-spatial",level:3},{value:"Time-Based",id:"time-based",level:3},{value:"Common Response Format",id:"common-response-format",level:2},{value:"Success Response",id:"success-response",level:3},{value:"Error Response",id:"error-response",level:3},{value:"Entity Type Mapping",id:"entity-type-mapping",level:2},{value:"Route Registration",id:"route-registration",level:2},{value:"API Categories",id:"api-categories",level:2},{value:"Data Retrieval APIs",id:"data-retrieval-apis",level:3},{value:"Analytics APIs",id:"analytics-apis",level:3},{value:"Navigation APIs",id:"navigation-apis",level:3},{value:"AI Agent APIs",id:"ai-agent-apis",level:3},{value:"Middleware Stack",id:"middleware-stack",level:2},{value:"Error Codes",id:"error-codes",level:2},{value:"Testing Endpoints",id:"testing-endpoints",level:2},{value:"Health Check",id:"health-check",level:3},{value:"Get All Cameras",id:"get-all-cameras",level:3},{value:"Get Nearby Cameras",id:"get-nearby-cameras",level:3},{value:"AI Agent Query",id:"ai-agent-query",level:3},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Related Documentation",id:"related-documentation",level:2},{value:"References",id:"references",level:2}];function o(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"api-routes-overview",children:"API Routes Overview"})}),"\n",(0,i.jsxs)(r.p,{children:["Complete overview of all ",(0,i.jsx)(r.strong,{children:"12 API route modules"})," in the UIP Traffic Backend. All routes are prefixed with ",(0,i.jsx)(r.code,{children:"/api"})," and follow RESTful conventions."]}),"\n",(0,i.jsx)(r.h2,{id:"route-architecture",children:"Route Architecture"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-mermaid",children:'graph TB\r\n    subgraph Express["Express Server (port 5000)"]\r\n        APP[app.use]\r\n    end\r\n    \r\n    subgraph Routes["Route Modules"]\r\n        CAMERA["/api/cameras"]\r\n        WEATHER["/api/weather"]\r\n        AIR["/api/air-quality"]\r\n        ACCIDENT["/api/accidents"]\r\n        PATTERN["/api/patterns"]\r\n        ANALYTICS["/api/analytics"]\r\n        HISTORICAL["/api/historical"]\r\n        CORRELATION["/api/correlation"]\r\n        ROUTING["/api/routing"]\r\n        GEOCODING["/api/geocoding"]\r\n        AGENT["/api/agents"]\r\n        MULTIAGENT["/api/multi-agent"]\r\n    end\r\n    \r\n    APP --\x3e CAMERA\r\n    APP --\x3e WEATHER\r\n    APP --\x3e AIR\r\n    APP --\x3e ACCIDENT\r\n    APP --\x3e PATTERN\r\n    APP --\x3e ANALYTICS\r\n    APP --\x3e HISTORICAL\r\n    APP --\x3e CORRELATION\r\n    APP --\x3e ROUTING\r\n    APP --\x3e GEOCODING\r\n    APP --\x3e AGENT\r\n    APP --\x3e MULTIAGENT\n'})}),"\n",(0,i.jsx)(r.h2,{id:"route-summary",children:"Route Summary"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Route Module"}),(0,i.jsx)(r.th,{children:"Base Path"}),(0,i.jsx)(r.th,{children:"Description"}),(0,i.jsx)(r.th,{children:"Methods"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/camera-routes",children:"Camera"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/cameras"})}),(0,i.jsx)(r.td,{children:"Traffic cameras & images"}),(0,i.jsx)(r.td,{children:"GET"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/weather-routes",children:"Weather"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/weather"})}),(0,i.jsx)(r.td,{children:"Weather observations"}),(0,i.jsx)(r.td,{children:"GET"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/air-quality-routes",children:"Air Quality"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/air-quality"})}),(0,i.jsx)(r.td,{children:"AQI sensors & readings"}),(0,i.jsx)(r.td,{children:"GET"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/accident-routes",children:"Accident"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/accidents"})}),(0,i.jsx)(r.td,{children:"Traffic accidents"}),(0,i.jsx)(r.td,{children:"GET"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/pattern-routes",children:"Pattern"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/patterns"})}),(0,i.jsx)(r.td,{children:"Traffic congestion patterns"}),(0,i.jsx)(r.td,{children:"GET"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/analytics-routes",children:"Analytics"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/analytics"})}),(0,i.jsx)(r.td,{children:"Statistical analysis"}),(0,i.jsx)(r.td,{children:"GET"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/historical-routes",children:"Historical"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/historical"})}),(0,i.jsx)(r.td,{children:"Time-series data"}),(0,i.jsx)(r.td,{children:"GET"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/correlation-routes",children:"Correlation"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/correlation"})}),(0,i.jsx)(r.td,{children:"Entity correlations"}),(0,i.jsx)(r.td,{children:"GET"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/routing-routes",children:"Routing"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/routing"})}),(0,i.jsx)(r.td,{children:"Navigation & directions"}),(0,i.jsx)(r.td,{children:"GET"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/geocoding-routes",children:"Geocoding"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/geocoding"})}),(0,i.jsx)(r.td,{children:"Address/coordinate lookup"}),(0,i.jsx)(r.td,{children:"GET"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/agent-routes",children:"Agent"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/agents"})}),(0,i.jsx)(r.td,{children:"AI agent interactions"}),(0,i.jsx)(r.td,{children:"POST"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/tes/docs/backend/routes/multi-agent-routes",children:"Multi-Agent"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/api/multi-agent"})}),(0,i.jsx)(r.td,{children:"Coordinated AI agents"}),(0,i.jsx)(r.td,{children:"POST"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"common-query-parameters",children:"Common Query Parameters"}),"\n",(0,i.jsx)(r.h3,{id:"pagination",children:"Pagination"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Parameter"}),(0,i.jsx)(r.th,{children:"Type"}),(0,i.jsx)(r.th,{children:"Default"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"limit"})}),(0,i.jsx)(r.td,{children:"number"}),(0,i.jsx)(r.td,{children:"100"}),(0,i.jsx)(r.td,{children:"Maximum results"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"offset"})}),(0,i.jsx)(r.td,{children:"number"}),(0,i.jsx)(r.td,{children:"0"}),(0,i.jsx)(r.td,{children:"Skip N results"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"page"})}),(0,i.jsx)(r.td,{children:"number"}),(0,i.jsx)(r.td,{children:"1"}),(0,i.jsx)(r.td,{children:"Page number"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"pageSize"})}),(0,i.jsx)(r.td,{children:"number"}),(0,i.jsx)(r.td,{children:"20"}),(0,i.jsx)(r.td,{children:"Results per page"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"geo-spatial",children:"Geo-Spatial"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Parameter"}),(0,i.jsx)(r.th,{children:"Type"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"lat"})}),(0,i.jsx)(r.td,{children:"number"}),(0,i.jsx)(r.td,{children:"Latitude (WGS84)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"lon"})}),(0,i.jsx)(r.td,{children:"number"}),(0,i.jsx)(r.td,{children:"Longitude (WGS84)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"maxDistance"})}),(0,i.jsx)(r.td,{children:"number"}),(0,i.jsx)(r.td,{children:"Search radius in meters"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"bbox"})}),(0,i.jsx)(r.td,{children:"string"}),(0,i.jsxs)(r.td,{children:["Bounding box: ",(0,i.jsx)(r.code,{children:"minLat,minLon,maxLat,maxLon"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"geometry"})}),(0,i.jsx)(r.td,{children:"object"}),(0,i.jsx)(r.td,{children:"GeoJSON geometry"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"georel"})}),(0,i.jsx)(r.td,{children:"string"}),(0,i.jsx)(r.td,{children:"NGSI-LD geo-relation"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"time-based",children:"Time-Based"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Parameter"}),(0,i.jsx)(r.th,{children:"Type"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"from"})}),(0,i.jsx)(r.td,{children:"string"}),(0,i.jsx)(r.td,{children:"Start date (ISO 8601)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"to"})}),(0,i.jsx)(r.td,{children:"string"}),(0,i.jsx)(r.td,{children:"End date (ISO 8601)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"timerel"})}),(0,i.jsx)(r.td,{children:"string"}),(0,i.jsx)(r.td,{children:"Temporal relation (before/after/between)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"interval"})}),(0,i.jsx)(r.td,{children:"string"}),(0,i.jsx)(r.td,{children:"Aggregation interval (hour/day/week)"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"common-response-format",children:"Common Response Format"}),"\n",(0,i.jsx)(r.h3,{id:"success-response",children:"Success Response"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{\r\n  "success": true,\r\n  "data": [...],\r\n  "meta": {\r\n    "total": 150,\r\n    "limit": 100,\r\n    "offset": 0,\r\n    "timestamp": "2025-01-15T10:30:00.000Z"\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(r.h3,{id:"error-response",children:"Error Response"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{\r\n  "success": false,\r\n  "error": {\r\n    "code": "VALIDATION_ERROR",\r\n    "message": "Invalid latitude value",\r\n    "details": {\r\n      "field": "lat",\r\n      "received": "abc",\r\n      "expected": "number between -90 and 90"\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(r.h2,{id:"entity-type-mapping",children:"Entity Type Mapping"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"API Endpoint"}),(0,i.jsx)(r.th,{children:"NGSI-LD Entity Type"}),(0,i.jsx)(r.th,{children:"Source"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/cameras"})}),(0,i.jsx)(r.td,{children:"Camera, TrafficFlowObserved"}),(0,i.jsx)(r.td,{children:"Stellio"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/weather"})}),(0,i.jsx)(r.td,{children:"WeatherObserved"}),(0,i.jsx)(r.td,{children:"Stellio"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/air-quality"})}),(0,i.jsx)(r.td,{children:"AirQualityObserved"}),(0,i.jsx)(r.td,{children:"Stellio"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/accidents"})}),(0,i.jsx)(r.td,{children:"RoadAccident"}),(0,i.jsx)(r.td,{children:"Stellio, Neo4j"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/patterns"})}),(0,i.jsx)(r.td,{children:"TrafficFlowObserved"}),(0,i.jsx)(r.td,{children:"Stellio, Fuseki"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"route-registration",children:"Route Registration"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"// server.ts\r\nimport cameraRoutes from './routes/cameraRoutes';\r\nimport weatherRoutes from './routes/weatherRoutes';\r\nimport airQualityRoutes from './routes/airQualityRoutes';\r\nimport accidentRoutes from './routes/accidentRoutes';\r\nimport patternRoutes from './routes/patternRoutes';\r\nimport analyticsRoutes from './routes/analyticsRoutes';\r\nimport historicalRoutes from './routes/historicalRoutes';\r\nimport correlationRoutes from './routes/correlationRoutes';\r\nimport routingRoutes from './routes/routingRoutes';\r\nimport geocodingRoutes from './routes/geocodingRoutes';\r\nimport agentRoutes from './routes/agentRoutes';\r\nimport multiAgentRoutes from './routes/multiAgentRoutes';\r\n\r\napp.use('/api/cameras', cameraRoutes);\r\napp.use('/api/weather', weatherRoutes);\r\napp.use('/api/air-quality', airQualityRoutes);\r\napp.use('/api/accidents', accidentRoutes);\r\napp.use('/api/patterns', patternRoutes);\r\napp.use('/api/analytics', analyticsRoutes);\r\napp.use('/api/historical', historicalRoutes);\r\napp.use('/api/correlation', correlationRoutes);\r\napp.use('/api/routing', routingRoutes);\r\napp.use('/api/geocoding', geocodingRoutes);\r\napp.use('/api/agents', agentRoutes);\r\napp.use('/api/multi-agent', multiAgentRoutes);\n"})}),"\n",(0,i.jsx)(r.h2,{id:"api-categories",children:"API Categories"}),"\n",(0,i.jsx)(r.h3,{id:"data-retrieval-apis",children:"Data Retrieval APIs"}),"\n",(0,i.jsx)(r.p,{children:"Routes that query NGSI-LD entities from Stellio and transform them:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Camera Routes"}),": Traffic camera images, status, metrics"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Weather Routes"}),": Temperature, humidity, precipitation"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Air Quality Routes"}),": PM2.5, PM10, AQI readings"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Accident Routes"}),": Incident locations, severity, status"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Pattern Routes"}),": Congestion zones, traffic flow"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"analytics-apis",children:"Analytics APIs"}),"\n",(0,i.jsx)(r.p,{children:"Routes that perform calculations and aggregations:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Analytics Routes"}),": Statistics, summaries, dashboards"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Historical Routes"}),": Time-series queries, trends"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Correlation Routes"}),": Entity relationships, causation analysis"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"navigation-apis",children:"Navigation APIs"}),"\n",(0,i.jsx)(r.p,{children:"Routes for location services:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Routing Routes"}),": Turn-by-turn directions (OSRM)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Geocoding Routes"}),": Address \u2194 coordinates (Nominatim)"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"ai-agent-apis",children:"AI Agent APIs"}),"\n",(0,i.jsx)(r.p,{children:"Routes for intelligent agent interactions:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Agent Routes"}),": Individual agent endpoints (EcoTwin, etc.)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Multi-Agent Routes"}),": Coordinated multi-agent analysis"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"middleware-stack",children:"Middleware Stack"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-mermaid",children:"flowchart LR\r\n    REQ[Request] --\x3e CORS\r\n    CORS --\x3e JSON[JSON Parser]\r\n    JSON --\x3e AUTH[Auth Check]\r\n    AUTH --\x3e ROUTE[Route Handler]\r\n    ROUTE --\x3e ERROR[Error Handler]\r\n    ERROR --\x3e RES[Response]\n"})}),"\n",(0,i.jsx)(r.p,{children:"Applied middleware in order:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"CORS"}),": Cross-origin resource sharing"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"JSON Parser"}),": ",(0,i.jsx)(r.code,{children:"express.json()"})," body parsing"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Request Logger"}),": Winston logging"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Route Handler"}),": Business logic"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Error Handler"}),": Centralized error handling"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"error-codes",children:"Error Codes"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Code"}),(0,i.jsx)(r.th,{children:"Status"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"VALIDATION_ERROR"})}),(0,i.jsx)(r.td,{children:"400"}),(0,i.jsx)(r.td,{children:"Invalid request parameters"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"NOT_FOUND"})}),(0,i.jsx)(r.td,{children:"404"}),(0,i.jsx)(r.td,{children:"Entity not found"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"SERVICE_UNAVAILABLE"})}),(0,i.jsx)(r.td,{children:"503"}),(0,i.jsx)(r.td,{children:"External service down"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"INTERNAL_ERROR"})}),(0,i.jsx)(r.td,{children:"500"}),(0,i.jsx)(r.td,{children:"Unexpected server error"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"RATE_LIMITED"})}),(0,i.jsx)(r.td,{children:"429"}),(0,i.jsx)(r.td,{children:"Too many requests"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"testing-endpoints",children:"Testing Endpoints"}),"\n",(0,i.jsx)(r.h3,{id:"health-check",children:"Health Check"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"curl http://localhost:5000/api/health\n"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{\r\n  "status": "ok",\r\n  "timestamp": "2025-01-15T10:30:00.000Z",\r\n  "services": {\r\n    "stellio": "connected",\r\n    "neo4j": "connected",\r\n    "fuseki": "connected"\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(r.h3,{id:"get-all-cameras",children:"Get All Cameras"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"curl http://localhost:5000/api/cameras?limit=10\n"})}),"\n",(0,i.jsx)(r.h3,{id:"get-nearby-cameras",children:"Get Nearby Cameras"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'curl "http://localhost:5000/api/cameras/near?lat=10.77&lon=106.70&maxDistance=5000"\n'})}),"\n",(0,i.jsx)(r.h3,{id:"ai-agent-query",children:"AI Agent Query"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'curl -X POST http://localhost:5000/api/agents/eco-twin/advice \\\r\n  -H "Content-Type: application/json" \\\r\n  -d \'{\r\n    "message": "Is it safe to exercise outdoors?",\r\n    "location": { "lat": 10.77, "lng": 106.70 }\r\n  }\'\n'})}),"\n",(0,i.jsx)(r.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Endpoint Category"}),(0,i.jsx)(r.th,{children:"Limit"}),(0,i.jsx)(r.th,{children:"Window"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Data APIs"}),(0,i.jsx)(r.td,{children:"100 req/min"}),(0,i.jsx)(r.td,{children:"1 minute"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Analytics APIs"}),(0,i.jsx)(r.td,{children:"30 req/min"}),(0,i.jsx)(r.td,{children:"1 minute"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"AI Agent APIs"}),(0,i.jsx)(r.td,{children:"10 req/min"}),(0,i.jsx)(r.td,{children:"1 minute"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"/tes/docs/backend/overview",children:"Backend Overview"})," - Server architecture"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"/tes/docs/backend/services/stellio-service",children:"Services"})," - Data layer"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"/tes/docs/backend/middlewares/error-handler",children:"Error Handler"})," - Error handling"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"references",children:"References"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://expressjs.com/en/guide/routing.html",children:"Express.js Routing"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://www.etsi.org/deliver/etsi_gs/CIM/001_099/009/01.06.01_60/gs_cim009v010601p.pdf",children:"NGSI-LD Specification"})}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);