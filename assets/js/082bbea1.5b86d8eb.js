"use strict";(globalThis.webpackChunkuip_urban_intelligence_platform_docs=globalThis.webpackChunkuip_urban_intelligence_platform_docs||[]).push([[1474],{1380:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"agents/rdf-linked-data/content-negotiation","title":"content-negotiation","description":"\x3c!--","source":"@site/docs/agents/rdf-linked-data/content-negotiation.md","sourceDirName":"agents/rdf-linked-data","slug":"/agents/rdf-linked-data/content-negotiation","permalink":"/tes/docs/agents/rdf-linked-data/content-negotiation","draft":false,"unlisted":false,"editUrl":"https://github.com/NguyenNhatquang522004/UIP-Urban_Intelligence_Platform/tree/main/apps/traffic-web-app/frontend/docs/docs/agents/rdf-linked-data/content-negotiation.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"triplestore-loader","permalink":"/tes/docs/agents/rdf-linked-data/triplestore-loader"},"next":{"title":"lod-linkset-enrichment","permalink":"/tes/docs/agents/rdf-linked-data/lod-linkset-enrichment"}}');var i=t(4848),s=t(8453);const d={sidebar_position:2},l="Content Negotiation Agent",a={},o=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\ud83c\udfaf Purpose",id:"-purpose",level:2},{value:"\ud83d\udcca Supported Formats",id:"-supported-formats",level:2},{value:"\ud83d\ude80 Usage",id:"-usage",level:2},{value:"Negotiate Format",id:"negotiate-format",level:3},{value:"Serialize RDF",id:"serialize-rdf",level:3},{value:"Handle Request",id:"handle-request",level:3},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:2},{value:"\ud83d\udcd6 Related Documentation",id:"-related-documentation",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"content-negotiation-agent",children:"Content Negotiation Agent"})}),"\n",(0,i.jsx)(n.p,{children:"The Content Negotiation Agent handles HTTP content negotiation for RDF data in multiple formats."}),"\n",(0,i.jsx)(n.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Property"}),(0,i.jsx)(n.th,{children:"Value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Module"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"src.agents.rdf_linked_data.content_negotiation_agent"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Class"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ContentNegotiationAgent"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Author"})}),(0,i.jsx)(n.td,{children:"UIP Team"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Version"})}),(0,i.jsx)(n.td,{children:"1.0.0"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"-purpose",children:"\ud83c\udfaf Purpose"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Negotiate content types"})," for RDF responses"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Serialize RDF data"})," in requested formats"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Support multiple RDF syntaxes"})," (Turtle, JSON-LD, N-Triples, RDF/XML)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle format conversion"})," transparently"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-supported-formats",children:"\ud83d\udcca Supported Formats"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Format"}),(0,i.jsx)(n.th,{children:"MIME Type"}),(0,i.jsx)(n.th,{children:"Extension"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Turtle"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"text/turtle"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".ttl"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"JSON-LD"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"application/ld+json"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".jsonld"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"N-Triples"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"application/n-triples"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".nt"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RDF/XML"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"application/rdf+xml"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".rdf"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"N-Quads"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"application/n-quads"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".nq"})})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"-usage",children:"\ud83d\ude80 Usage"}),"\n",(0,i.jsx)(n.h3,{id:"negotiate-format",children:"Negotiate Format"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from src.agents.rdf_linked_data.content_negotiation_agent import ContentNegotiationAgent\r\n\r\nagent = ContentNegotiationAgent()\r\n\r\n# Determine best format from Accept header\r\nformat = agent.negotiate(\r\n    accept_header="text/turtle, application/ld+json;q=0.8"\r\n)\r\n# Returns: "text/turtle"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"serialize-rdf",children:"Serialize RDF"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Serialize graph to requested format\r\nfrom rdflib import Graph\r\n\r\ngraph = Graph()\r\n# ... populate graph ...\r\n\r\noutput = agent.serialize(\r\n    graph=graph,\r\n    format="text/turtle"\r\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"handle-request",children:"Handle Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Complete request handling\r\nasync def handle_rdf_request(request, entity_id):\r\n    graph = await get_entity_graph(entity_id)\r\n    \r\n    format = agent.negotiate(request.headers.get("Accept"))\r\n    content = agent.serialize(graph, format)\r\n    \r\n    return Response(\r\n        content=content,\r\n        media_type=format\r\n    )\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# config/content_negotiation_config.yaml\r\ncontent_negotiation:\r\n  enabled: true\r\n  \r\n  # Default format if no Accept header\r\n  default_format: "application/ld+json"\r\n  \r\n  # Format preferences (quality values)\r\n  preferences:\r\n    "text/turtle": 1.0\r\n    "application/ld+json": 0.9\r\n    "application/n-triples": 0.8\r\n    "application/rdf+xml": 0.7\r\n  \r\n  # Serialization options\r\n  serialization:\r\n    turtle:\r\n      indent: 2\r\n      base: "https://uip.city.gov/"\r\n    jsonld:\r\n      compact: true\r\n      context: "https://uip.city.gov/context.jsonld"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"-related-documentation",children:"\ud83d\udcd6 Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"triplestore-loader",children:"Triplestore Loader"})," - RDF storage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"ngsi-ld-to-rdf",children:"NGSI-LD to RDF"})," - Format conversion"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"lod-linkset-enrichment",children:"LOD Linkset Enrichment"})," - Linked data"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.a,{href:"../complete-agents-reference",children:"complete agents reference"})," for all available agents."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>l});var r=t(6540);const i={},s=r.createContext(i);function d(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);